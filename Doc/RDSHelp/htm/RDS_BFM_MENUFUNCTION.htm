<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>А.2.6.7. RDS_BFM_MENUFUNCTION &ndash; выбор пользователем пункта меню</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="app_index.htm">Приложения</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a">Приложение А. Функции, константы и структуры RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_2">А.2. События блока и связанные с ними описания</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_2_6">А.2.6. События пользовательского интерфейса и рисования внешнего вида блоков</a></p>
<div class="level"><p>А.2.6.7. <span class="cpp">RDS_BFM_MENUFUNCTION</span> &ndash; выбор пользователем пункта меню</p>
</div>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="RDS_BFM_KEYUP.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="RDS_BFM_MOUSEDBLCLICK.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:RDS_BFM_MENUFUNCTION">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Приложения</h1>
<h2 class="off">Приложение А. Функции, константы и структуры RDS</h2>
<h3 class="off">А.2. События блока и связанные с ними описания</h3>
<h4 class="off">А.2.6. События пользовательского интерфейса и рисования внешнего вида блоков</h4>
<h5>А.2.6.7. <span class="cpp">RDS_BFM_MENUFUNCTION</span> &ndash; выбор пользователем пункта меню</h5>


<p class="apphdr">Поток, в котором вызывается <a href="app_a_2_1.htm" title="А.2.1. Функция модели блока">функция модели</a></p>
<p>Главный поток RDS.</p>

<p class="apphdr">Первый параметр функции модели (<span class="cpp">int&nbsp;CallMode</span>)</p>
<p>Константа <span class="cpp">RDS_BFM_MENUFUNCTION</span>.</p>

<p class="apphdr">Третий параметр функции модели (<span class="cpp">void&nbsp;*ExtParam</span>)</p>
<p>Указатель на структуру описания события <span class="cpp"><a href="#ref1" title="Структура RDS_MENUFUNCDATA">RDS_MENUFUNCDATA</a></span>.</p>

<p class="apphdr">Возвращаемое функцией модели значение</p>
<p>Не используется, можно возвращать любое значение.</p>

<p class="apphdr">Примечания</p>
<p>Реакция на событие <span class="cpp">RDS_BFM_MENUFUNCTION</span> вызывается при выборе пользователем либо
постоянного пункта контекстного или системного меню, зарегистрированного моделью блока, либо временного
пункта контекстного меню, добавленного в него моделью при реакции на событие
<span class="cpp"><a href="RDS_BFM_CONTEXTPOPUP.htm" title="А.2.6.2. RDS_BFM_CONTEXTPOPUP &ndash; вызов контекстного меню блока">RDS_BFM_CONTEXTPOPUP</a></span>. Постоянные пункты системного меню создаются сервисной функцией
<span class="cpp"><a href="rdsRegisterMenuItem.htm" title="А.5.17.8. rdsRegisterMenuItem &ndash; создать пункт системного меню RDS">rdsRegisterMenuItem</a></span> и размещаются в меню &laquo;<span class="menu">Система | Дополнительно</span>&raquo;
<a href="um_2_1.htm" title="&sect;2.1. Главное окно и главное меню">главного окна</a>
RDS, с ними можно связывать &laquo;горячие клавиши&raquo;
(см. <a href="pm_2_12_7.htm" title="&sect;2.12.7. Добавление пунктов в системное меню RDS">&sect;2.12.7 руководства программиста</a>) . Постоянные пункты контекстного (то есть
выводимого при щелчке правой кнопкой мыши на блоке или свободном месте окна подсистемы, см. 
<a href="pm_2_12_6.htm" title="&sect;2.12.6. Добавление пунктов в контекстное меню блока">&sect;2.12.6</a> там же) меню создаются сервисными функциями
<span class="cpp"><a href="rdsRegisterContextMenuItem.htm" title="А.5.17.6. rdsRegisterContextMenuItem &ndash; создать постоянный пункт контекстного меню блока">rdsRegisterContextMenuItem</a></span> и
<span class="cpp"><a href="rdsRegisterContextMenuItemEx.htm" title="А.5.17.7. rdsRegisterContextMenuItemEx &ndash; создать постоянный пункт контекстного меню блока">rdsRegisterContextMenuItemEx</a></span>, временные пункты контекстного меню &ndash; сервисными функциями
<span class="cpp"><a href="rdsAdditionalContextMenuItem.htm" title="А.5.17.1. rdsAdditionalContextMenuItem &ndash; добавить временный пункт в контекстное меню блока">rdsAdditionalContextMenuItem</a></span> и
<span class="cpp"><a href="rdsAdditionalContextMenuItemEx.htm" title="А.5.17.2. rdsAdditionalContextMenuItemEx &ndash; добавить временный пункт в контекстное меню блока">rdsAdditionalContextMenuItemEx</a></span>. Вызывая модель блока для реакции на выбор пункта меню,
RDS не делает разницы между системным и контекстным меню или между постоянными и временными пунктами
&ndash; во всех случаях в модель передается константа <span class="cpp">RDS_BFM_MENUFUNCTION</span>.</p>

<p><span id="ref1">Для</span> <span id="ref2">описания</span>
выбранного пункта меню служит структура <span class="cpp">RDS_MENUFUNCDATA</span>:</p>

<pre class="cpp">  <span class="kw">typedef</span> <span class="kw">struct</span> {
    <span class="kw">int</span> Function;    <span class="rem">// Номер функции меню</span>
    <span class="kw">int</span> MenuData;    <span class="rem">// Данные меню</span>
  } <span id="light_ref1">RDS_MENUFUNCDATA</span>;
  <span class="kw">typedef</span> RDS_MENUFUNCDATA *<span id="light_ref2">RDS_PMENUFUNCDATA</span>;</pre>

<p class="apphdr">Поля структуры</p>

<dl>
  <dt><span class="cpp">Function</span>&emsp;(<span class="cpp"><i>int</i></span>)</dt>
  <dd>Идентификатор пункта меню, указанный при его создании.</dd>

  <dt><span class="cpp">MenuData</span>&emsp;(<span class="cpp"><i>int</i></span>)</dt>
  <dd>Дополнительное целое число, указанное при создании выбранного пункта меню.</dd>

<p>Пара чисел <span class="cpp">Function</span>&nbsp;/&nbsp;<span class="cpp">MenuData</span> указывается при
создании пункта меню и должна быть уникальной для данного блока, чтобы модель могла отличить один пункт от
другого в реакции на событие <span class="cpp">RDS_BFM_MENUFUNCTION</span>. Разные блоки могут иметь
совпадающие идентификаторы пунктов меню, поскольку при выборе пункта всегда вызывается модель именно того
блока, который создал этот пункт.</p>

<p class="apphdr">См. также</p>
<p class="seealso"><span class="cpp"><a href="RDS_BFM_CONTEXTPOPUP.htm" title="А.2.6.2. RDS_BFM_CONTEXTPOPUP &ndash; вызов контекстного меню блока">RDS_BFM_CONTEXTPOPUP</a></span>,
<span class="cpp"><a href="rdsRegisterContextMenuItem.htm" title="А.5.17.6. rdsRegisterContextMenuItem &ndash; создать постоянный пункт контекстного меню блока">rdsRegisterContextMenuItem</a></span>,
<span class="cpp"><a href="rdsRegisterContextMenuItemEx.htm" title="А.5.17.7. rdsRegisterContextMenuItemEx &ndash; создать постоянный пункт контекстного меню блока">rdsRegisterContextMenuItemEx</a></span>,
<span class="cpp"><a href="rdsAdditionalContextMenuItem.htm" title="А.5.17.1. rdsAdditionalContextMenuItem &ndash; добавить временный пункт в контекстное меню блока">rdsAdditionalContextMenuItem</a></span>,
<span class="cpp"><a href="rdsAdditionalContextMenuItemEx.htm" title="А.5.17.2. rdsAdditionalContextMenuItemEx &ndash; добавить временный пункт в контекстное меню блока">rdsAdditionalContextMenuItemEx</a></span>,
<span class="cpp"><a href="rdsRegisterMenuItem.htm" title="А.5.17.8. rdsRegisterMenuItem &ndash; создать пункт системного меню RDS">rdsRegisterMenuItem</a></span>.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="RDS_BFM_KEYUP.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="RDS_BFM_MOUSEDBLCLICK.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:RDS_BFM_MENUFUNCTION">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
