<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>А.2.6.21. RDS_BFM_WINREFRESH &ndash; обновление окон блока</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="app_index.htm">Приложения</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a">Приложение А. Функции, константы и структуры RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_2">А.2. События блока и связанные с ними описания</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_2_6">А.2.6. События пользовательского интерфейса и рисования внешнего вида блоков</a></p>
<div class="level"><p>А.2.6.21. <span class="cpp">RDS_BFM_WINREFRESH</span> &ndash; обновление окон блока</p>
</div>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="RDS_BFM_WINDOWOPERATION.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="RDS_BFM_MANUALDELETE.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:RDS_BFM_WINREFRESH">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Приложения</h1>
<h2 class="off">Приложение А. Функции, константы и структуры RDS</h2>
<h3 class="off">А.2. События блока и связанные с ними описания</h3>
<h4 class="off">А.2.6. События пользовательского интерфейса и рисования внешнего вида блоков</h4>
<h5>А.2.6.21. <span class="cpp">RDS_BFM_WINREFRESH</span> &ndash; обновление окон блока</h5>


<p class="apphdr">Поток, в котором вызывается <a href="app_a_2_1.htm" title="А.2.1. Функция модели блока">функция модели</a></p>
<p>Главный поток RDS.</p>

<p class="apphdr">Первый параметр функции модели (<span class="cpp">int&nbsp;CallMode</span>)</p>
<p>Константа <span class="cpp">RDS_BFM_WINREFRESH</span>.</p>

<p class="apphdr">Третий параметр функции модели (<span class="cpp">void&nbsp;*ExtParam</span>)</p>
<p>Указатель на структуру описания события <span class="cpp"><a href="#ref1" title="Структура RDS_WINREFRESHDATA">RDS_WINREFRESHDATA</a></span>.</p>

<p class="apphdr">Возвращаемое функцией модели значение</p>
<p>Не используется, можно возвращать любое значение.</p>

<p class="apphdr">Примечания</p>
<p>Реакция на событие <span class="cpp">RDS_BFM_WINREFRESH</span> вызывается у подсистемы или блока
при необходимости обновить принадлежащие им окна по таймеру или по команде от пользователя, другого
блока или
<a href="pm_index.htm#light_htm:pm_3" title="Глава 3. Управление RDS из других приложений">внешнего управляющего приложения</a>. Действия по обновлению
стандартных окон подсистем производятся автоматически, в их модели не обязательно добавлять реакцию
на это событие. Если же блоку или подсистеме принадлежат какие-либо немодальные окна,
открытые моделью самостоятельно, процедурой их обновления должна заниматься модель. Следует помнить,
что при работе с немодальными окнами в RDS необходимо блокировать данные, как описывается в
<a href="pm_1_8.htm" title="&sect;1.8. Открытие окон в модели блока">&sect;1.8 руководства программиста</a>.</p>

<p><span id="ref1">В</span> <span id="ref2">параметре</span>
<span class="cpp">ExtParam</span> передается указатель на структуру <span class="cpp">RDS_WINREFRESHDATA</span>,
описывающую событие:</p>

<pre class="cpp">  <span class="kw">typedef</span> <span class="kw">struct</span> {
    <a class="hidden" href="app_ids.htm#light_ref3" title="Идентификатор таймера">RDS_TIMERID</a> Timer;  <span class="rem">// Таймер, вызвавший обновление, или NULL</span>
    <span class="kw">double</span> Delay;       <span class="rem">// Возвращаемое время обновления окна, мс</span>
  } <span id="light_ref1">RDS_WINREFRESHDATA</span>;
  <span class="kw">typedef</span> RDS_WINREFRESHDATA *<span id="light_ref2">RDS_PWINREFRESHDATA</span>;</pre>

<p class="apphdr">Поля структуры</p>

<dl>
  <dt><span class="cpp">Timer</span>&emsp;(<span class="cpp"><i>RDS_TIMERID</i></span>)</dt>
  <dd>Идентификатор сработавшего таймера (<span class="cpp"><a href="app_ids.htm#light_ref3" title="Идентификатор таймера">RDS_TIMERID</a></span>), созданного с флагом
  <span class="cpp"><a href="RDS_TIMERDESCRIPTION.htm#light_ref9" title="RDS_TIMERS_WINREF">RDS_TIMERS_WINREF</a></span> (такие таймеры служат для обновления окон) или
  <span class="cpp">NULL</span>, если обновление окна вызвано не таймером, а сервисной функцией или
  командой пользователя.</dd>

  <dt><span class="cpp">Delay</span>&emsp;(<span class="cpp"><i>double</i></span>)</dt>
  <dd>Возвращаемое моделью полное время обновления окна в миллисекундах. Исходно в этом поле
  находится значение &minus;1. Модель может не вычислять это время и оставить в поле
  отрицательное значение, в этом случае RDS вычислит время обновления окна по задержке между
  вызовом модели и возвратом из нее. Времена обновления окон используются в
  <a href="um_2_18.htm#ref23" title="Автоподстройка частоты обновления окон">адаптивном алгоритме</a>
  вычисления частоты обновления для недопущения слишком больших потерь времени на обновление при
  высокой загрузке процессора.</dd>
</dl>

<p class="apphdr">См. также</p>
<p class="seealso"><span class="cpp"><a href="rdsRefreshBlockWindows.htm" title="А.5.8.14. rdsRefreshBlockWindows &ndash; обновить немодальные окна">rdsRefreshBlockWindows</a></span>,
<span class="cpp"><a href="rdsSetBlockTimer.htm" title="А.5.12.4. rdsSetBlockTimer &ndash; создать таймер">rdsSetBlockTimer</a></span>,
<span class="cpp"><a href="RDS_TIMERDESCRIPTION.htm" title="А.4.16. RDS_TIMERDESCRIPTION &ndash; описание таймера">RDS_TIMERDESCRIPTION</a></span>.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="RDS_BFM_WINDOWOPERATION.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="RDS_BFM_MANUALDELETE.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:RDS_BFM_WINREFRESH">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
