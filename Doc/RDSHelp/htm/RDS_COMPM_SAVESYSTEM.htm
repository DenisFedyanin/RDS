<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>А.3.4.18. RDS_COMPM_SAVESYSTEM &ndash; сохранение схемы</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="app_index.htm">Приложения</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a">Приложение А. Функции, константы и структуры RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_3">А.3. События модуля автокомпиляции и связанные с ними структуры</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_3_4">А.3.4. События модуля автокомпиляции</a></p>
<div class="level"><p>А.3.4.18. <span class="cpp">RDS_COMPM_SAVESYSTEM</span> &ndash; сохранение схемы</p>
</div>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="RDS_COMPM_SAVEBLOCK.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="RDS_COMPM_SETUP.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:RDS_COMPM_SAVESYSTEM">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Приложения</h1>
<h2 class="off">Приложение А. Функции, константы и структуры RDS</h2>
<h3 class="off">А.3. События модуля автокомпиляции и связанные с ними структуры</h3>
<h4 class="off">А.3.4. События модуля автокомпиляции</h4>
<h5>А.3.4.18. <span class="cpp">RDS_COMPM_SAVESYSTEM</span> &ndash; сохранение схемы</h5>


<p class="apphdr">Первый параметр <a href="app_a_3_1.htm" title="А.3.1. Функция модуля автокомпиляции">функции модуля</a> (<span class="cpp">int&nbsp;CallMode</span>)</p>
<p>Константа <span class="cpp">RDS_COMPM_SAVESYSTEM</span>.</p>

<p class="apphdr">Третий параметр функции модуля (<span class="cpp">void&nbsp;*ExtParam</span>)</p>
<p>Указатель на структуру <span class="cpp"><a href="#ref1" title="Структура RDS_COMPSAVESYSTEMDATA">RDS_COMPSAVESYSTEMDATA</a></span>, содержащую новое и прежнее
имена файла сохраняемой схемы.</p>

<p class="apphdr">Возвращаемое функцией модуля значение</p>
<p>Не используется, можно возвращать любое значение.</p>

<p class="apphdr">Примечания</p>
<p>Событие <span class="cpp">RDS_COMPM_SAVESYSTEM</span> возникает перед сохранением всей схемы,
реакция на него вызывается один раз для каждого модуля автокомпиляции. Эта реакция может
использоваться, например, для предложения пользователю сделать копии всех моделей для новой схемы,
если он сохраняет схему под другим именем.</p>

<p><span id="ref1">В</span> <span id="ref2">параметре</span>
<span class="cpp">ExtParam</span> при реакции на это событие передается указатель на структуру
<span class="cpp">RDS_COMPSAVESYSTEMDATA</span>:</p>

<pre class="cpp">  <span class="kw">typedef</span> <span class="kw">struct</span> {
    <a class="hidden" href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a> FileName;    <span class="rem">// Имя сохраняемого файла</span>
    <a class="hidden" href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a> OldFileName; <span class="rem">// Имя файла до сохранения или NULL при первом сохранении</span>
  } <span id="light_ref1">RDS_COMPSAVESYSTEMDATA</span>;
  <span class="kw">typedef</span> RDS_COMPSAVESYSTEMDATA *<span id="light_ref2">RDS_PCOMPSAVESYSTEMDATA</span>;</pre>

<p class="apphdr">Поля структуры</p>

<dl>
  <dt><span class="cpp">FileName</span>&emsp;(<span class="cpp"><i>LPSTR</i></span>)</dt>
  <dd>Указатель на строку с полным путем к сохраняемому файлу схемы во внутренней памяти
  RDS. Функция модуля не должна изменять эту строку.</dd>

  <dt><span class="cpp">OldFileName</span>&emsp;(<span class="cpp"><i>LPSTR</i></span>)</dt>
  <dd>Указатель на строку с прежним именем файла (при прошлом сохранении) или NULL, если только что
  созданная схема сохраняется в первый раз. Если схема сохраняется в тот же самый файл, что и в
  прошлый раз, значение поля будет совпадать с полем <span class="cpp">FileName</span>. Эта строка
  находится во внутренней памяти RDS, функция модуля не должна изменять ее.</dd>
</dl>

<p class="apphdr">См. также</p>
<p class="seealso"><span class="cpp"><a href="RDS_COMPM_SAVEBLOCK.htm" title="А.3.4.17. RDS_COMPM_SAVEBLOCK &ndash; сохранение блока">RDS_COMPM_SAVEBLOCK</a></span>.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="RDS_COMPM_SAVEBLOCK.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="RDS_COMPM_SETUP.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:RDS_COMPM_SAVESYSTEM">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
