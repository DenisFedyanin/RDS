<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;1.2. Блоки RDS и их типы</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="pm_index.htm">Руководство программиста</a></p>
<div class="level"><p><a href="pm_index.htm#light_htm:pm_1">Глава 1. Устройство RDS</a></p>
<div class="level"><p>&sect;1.2. Блоки RDS и их типы</p>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="pm_1_1.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="pm_1_3.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="pm_index.htm#light_htm:pm_1_2">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Руководство программиста</h1>
<h2 class="off">Глава 1. Устройство RDS</h2>
<h3>&sect;1.2. Блоки RDS и их типы</h3>
<p class="abstract">Описываются типы блоков, из которых состоит схема RDS, и особенности каждого из этих типов.</p>


<p>Схема в RDS состоит из набора блоков, соединенных друг с другом
(см. <a href="um_1_2.htm" title="&sect;1.2. Блоки и связи в RDS, их типы и основные параметры">&sect;1.2 описания пользователя</a>).
<span id="ref1">Блоку</span> может ставиться в соответствие
функция-<span class="term" id="light_ref1">модель</span> во внешней библиотеке (DLL), определяющая его реакцию на различные события и действия пользователя
(при вызове модели ей передается одна из констант <span class="cpp">RDS_BFM_*</span>, соответствующая
произошедшему событию). У большинства блоков есть набор
<a href="pm_1_5.htm" title="&sect;1.5. Статические переменные блоков, входы и выходы">статических переменных</a>,
то есть переменных, которые, как правило, создаются вместе с блоком, и не изменяют свою структуру в
процессе его работы. Они служат для хранения данных и передачи их между блоками. Статическая переменная может быть
входом блока, выходом или внутренней. Выход одного блока может соединяться со входами нескольких других при
помощи <a href="um_2_7_1.htm" title="&sect;2.7.1. Общие принципы создания связей">связи</a>, которая изображается как линия (возможно, разветвленная)
со стрелками в местах соединения со
входами блоков. Каждая связь может быть подключена только к одному выходу блока и к произвольному числу
входов. К одному входу блока может быть подключено несколько связей, в этом случае на вход будут переданы
данные той связи, которая сработала последней. Связь не может реагировать на какие-либо события или изменять
передаваемые данные, вся обработка должна осуществляться в блоках, к которым подключена эта связь. Кроме
обычных связей в схеме могут присутствовать
<a href="um_2_8.htm" title="&sect;2.8. Использование шин">шины</a>
&ndash; группы связей, изображаемых одной линией (как правило, жирной). Шина состоит из независимых друг от
друга каналов передачи данных, к которым снаружи могут подключаться обычные связи (одна ко входу канала,
произвольное число к выходу).</p>

<p><span id="ref2">Все блоки</span>

в RDS принадлежат к одному из пяти <span id="light_ref2">типов</span>:</p>
<ul>
    <div class="picright"><div class="container" id="pic1">
<img src="../img/SimpleBlock.png" width="204" height="107" alt="Простой блок с подключенными связями" />
<p id="light_pic1">Рис.&nbsp;1. Простой блок<br />с подключенными связями</p>
</div></div>


  <li><span class="term"><span id="light_ref3">Простой блок</span></span>. Это &ndash; самый распространенный тип блока
  (<a href="#pic1" title="Простой блок с подключенными связями">рис.&nbsp;1</a>). Его поведение определяется только его параметрами и
  моделью в DLL. Статические переменные простого блока чаще всего задаются при его создании и более не
  изменяются, поэтому внутри функции модели к ним можно обращаться непосредственно по адресам. Структура этих
  переменных может быть любой, но первые две переменных любого простого блока всегда жестко зафиксированы: первая
  из них является входом, управляющим запуском модели блока, а вторая &ndash; выходом, сигнализирующим о
  срабатывании модели и разрешающим передачу данных по связям. Особенности работы с этими переменными будут описаны в
  <a href="pm_1_3.htm" title="&sect;1.3. Режимы работы RDS">&sect;1.3</a>.</li>

  <div class="picright"><div class="container" id="pic2">
<img src="../img/SubSystem.png" width="284" height="328" alt="Подсистема с внешними входами Input1 и Input2 и выходом Output1" />
<p id="light_pic2">Рис.&nbsp;2. Подсистема с внешними<br />входами &laquo;<span class="rdsvar">Input1</span>&raquo; и &laquo;<span class="rdsvar">Input2</span>&raquo; и<br /> выходом &laquo;<span class="rdsvar">Output1</span>&raquo;</p>
</div></div>


  <li><span class="term"><span id="light_ref4">Подсистема</span></span> &ndash; блок, содержащий внутри себя другие блоки и связи
  (<a href="#pic2" title="Подсистема с внешними входами Input1 и Input2 и выходом Output1">рис.&nbsp;2</a>). Каждая подсистема отображается в отдельном окне.
  Статические переменные подсистемы появляются и исчезают при редактировании ее содержимого, поэтому обращение к
  ним из функции модели нежелательно. <span id="ref5">Схема</span>
   всегда содержит хотя бы одну подсистему &ndash;
  <span class="term" id="light_ref5">корневую</span> (главную). В корневой подсистеме содержатся все остальные
  блоки схемы.</li>

  <li><span class="term"><span id="light_ref6">Внешний вход</span></span> &ndash; блок, служащий для передачи данных внутрь подсистемы.
  <span id="ref7">Он</span>
   имеет единственную статическую переменную-выход, при этом ей всегда соответствует статическая
  переменная-вход того же типа в <span class="term" id="light_ref7">родительской подсистеме</span>
  (то есть в подсистеме, внутри которой находится этот
  блок). Для того, чтобы передать данные внутрь подсистемы, необходимо присоединить связь к переменной-входу в
  этой подсистеме, затем найти внутри нее внешний вход, соответствующий этой переменной, и продолжить связь
  от него.</li>

  <li><span class="term"><span id="light_ref8">Внешний выход</span></span> &ndash; блок, служащий для передачи
  данных изнутри подсистемы наружу. Он имеет единственную статическую переменную-вход, при этом ей всегда
  соответствует статическая переменная-выход того же типа в родительской подсистеме. Для передачи данных наружу
  необходимо присоединить связь к единственной переменной внешнего выхода, а затем продолжить ее от
  соответствующего выхода самой подсистемы.</li>

  <div class="picright"><div class="container" id="pic3">
<img src="../img/BusPort.png" width="297" height="334" alt="Ввод шины в подсистему" />
<p id="light_pic3">Рис.&nbsp;3. Ввод шины в подсистему</p>
</div></div>


  <li><span class="term"><span id="light_ref9">Ввод шины</span></span> &ndash; блок, позволяющий <a href="um_2_11_3.htm" title="&sect;2.11.3. Ввод шин в подсистему">соединить</a>
  шину внутри подсистемы с шиной снаружи
  (<a href="#pic3" title="Ввод шины в подсистему">рис.&nbsp;3</a>). Соединенные шины имеют один и тот же набор каналов и
  обеспечивают передачу данных между подсистемами. Для того, чтобы соединить внутреннюю и внешнюю шины, необходимо
  добавить в подсистему ввод, соединить с ним внутреннюю шину, а затем соединить внешнюю шину с подсистемой, указав
  имя этого ввода (можно действовать и в обратной последовательности).</li>
</ul>

<p class="noindent">Блоки можно сохранять в отдельные файлы для использования в других схемах. Именно так
устроены <a href="um_index.htm#light_htm:um_2_16" title="&sect;2.16. Создание и редактирование библиотек и вкладок панели блоков">библиотека и панель</a> стандартных блоков RDS: это просто
набор отдельных файлов в соответствующих папках. Простые блоки, внешние входы и выходы, вводы шин обычно
сохраняются в файлы с расширением <span id="light_ref10">&laquo;<span class="file">.blk</span>&raquo;</span>, а
подсистемы &ndash; в файлы с расширением <span id="light_ref11">&laquo;<span class="file">.rds</span>&raquo;</span>.
Это же расширение имеют и схемы, поскольку файл схемы &ndash; это, по сути, корневая подсистема схемы,
сохраненная в файл. Таким образом, сохраненные схемы можно, при желании, использовать как блоки в других
схемах.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="pm_1_1.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="pm_1_3.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="pm_index.htm#light_htm:pm_1_2">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
