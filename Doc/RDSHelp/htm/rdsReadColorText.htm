<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>А.5.11.4. rdsReadColorText &ndash; разбор описания цвета</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="app_index.htm">Приложения</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a">Приложение А. Функции, константы и структуры RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_5">А.5. Сервисные функции RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_5_11">А.5.11. Разбор текста</a></p>
<div class="level"><p>А.5.11.4. <span class="cpp">rdsReadColorText</span> &ndash; разбор описания цвета</p>
</div>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="rdsGetTextWordDyn.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="rdsReadFontText.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:rdsReadColorText">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Приложения</h1>
<h2 class="off">Приложение А. Функции, константы и структуры RDS</h2>
<h3 class="off">А.5. Сервисные функции RDS</h3>
<h4 class="off">А.5.11. Разбор текста</h4>
<h5>А.5.11.4. <span class="cpp">rdsReadColorText</span> &ndash; разбор описания цвета</h5>


<p>Функция <span class="cpp">rdsReadColorText</span> считывает из переданной в параметрах строки описание цвета
и возвращает считанное значение типа <span class="cpp"><a href="app_ids.htm#light_ref13" title="Цвет Windows API">COLORREF</a></span>.</p>

<pre class="cpp">  <a class="hidden" href="app_ids.htm#light_ref13" title="Цвет Windows API">COLORREF</a> <a class="hidden" href="app_ids.htm#light_ref24" title="Тип вызова сервисных функций">RDSCALL</a> rdsReadColorText(
      <a class="hidden" href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a> Start,         <span class="rem">// Начало текста</span>
      <a class="hidden" href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a> *pNextWord,    <span class="rem">// Возврат – следующее слово</span>
  );</pre>

<p class="apphdr">Тип указателя на эту функцию</p>
<p><span class="cpp">RDS_CrSpS</span></p>

<p class="apphdr">Параметры</p>

<dl>
  <dt><span class="cpp">Start</span>&emsp;(<span class="cpp"><i><a href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a></i></span>)</dt>
  <dd>Указатель на начало текста, из которого нужно извлечь описание цвета. Все пробелы и табуляции
  перед описанием будут пропущены.</dd>

  <dt><span class="cpp">pNextWord</span>&emsp;(<span class="cpp"><i>LPSTR*</i></span>)</dt>
  <dd>Указатель на переменную типа <span class="cpp">char*</span>, в которую будет записан указатель на
  начало следующего после описания цвета слова. Если вызывающей программе оно не нужно, в этом
  параметре можно передать <span class="cpp">NULL</span>.</dd>
</dl>

<p class="apphdr">Возвращаемое значение</p>
<p>Считанное из текста значение цвета в виде целого числа (тип <span class="cpp"><a href="app_ids.htm#light_ref13" title="Цвет Windows API">COLORREF</a></span>). Если текст не
соответствует формату описания цвета, возвращается нулевое значение (оно соответствует черному цвету).</p>

<p class="apphdr">Примечания</p>
<p>Эта функция разбирает текстовое описание цвета в том же формате, который используется в функции
<span class="cpp"><a href="rdsWriteColorText.htm" title="А.5.10.6. rdsWriteColorText &ndash; запись цвета в текстовом формате">rdsWriteColorText</a></span>. Сначала она извлекает из текста, указатель на который передан в
параметре <span class="cpp">Start</span>, первое слово. Если это слово &laquo;rgb&raquo;, она считывает следующие
за ним три слова, преобразует их в целые числа тем же способом, который используется в функции
<span class="cpp"><a href="rdsAtoI.htm" title="А.5.4.4. rdsAtoI &ndash; преобразование строки в целое число">rdsAtoI</a></span>, и собирает из этих трех чисел значение цвета, считая их интенсивностями
его красного, зеленого и синего компонентов (каждое из трех целых чисел может принимать значения в интервале
0&hellip;255). В противном случае, то есть если первое слово в тексте по указателю
<span class="cpp">Start</span> &ndash; не &laquo;rgb&raquo;, функция преобразует это слово в целое
число и считает его значением цвета, которое нужно вернуть. По указателю <span class="cpp">pNextWord</span>
функция записывает указатель на следующее после описания цвета слово, то есть указатель на следующее слово
после считанного числа, если цвет был представлен числом, или указатель на слово, следующее за значением
синего компонента, если цвет описывается словом &laquo;rgb&raquo; и тремя интенсивностями компонентов.</p>

<p>Функция <span class="cpp">rdsReadColorText</span> автоматически обрабатывает знак продолжения
&laquo;+&raquo;, используемый в текстовом формате схем RDS &ndash; обнаружив его, она пропускает
следующий за ним перевод строки и повторение знака продолжения, считая следующую строку текста продолжением
текущей строки.</p>

<p class="apphdr">См. также</p>
<p class="seealso"><span class="cpp"><a href="rdsWriteColorText.htm" title="А.5.10.6. rdsWriteColorText &ndash; запись цвета в текстовом формате">rdsWriteColorText</a></span>,
<span class="cpp"><a href="rdsAtoI.htm" title="А.5.4.4. rdsAtoI &ndash; преобразование строки в целое число">rdsAtoI</a></span>,
<span class="cpp"><a href="RDS_BFM_LOADTXT.htm" title="А.2.5.5. RDS_BFM_LOADTXT &ndash; загрузка данных блока в текстовом формате">RDS_BFM_LOADTXT</a></span>.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="rdsGetTextWordDyn.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="rdsReadFontText.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:rdsReadColorText">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
