<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>А.5.13.12. rdsRegisterFunction &ndash; регистрация функции блока</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="app_index.htm">Приложения</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a">Приложение А. Функции, константы и структуры RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_5">А.5. Сервисные функции RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_5_13">А.5.13. Вызов функций блоков</a></p>
<div class="level"><p>А.5.13.12. <span class="cpp">rdsRegisterFunction</span> &ndash; регистрация функции блока</p>
</div>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="rdsRegisterFuncProvider.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="rdsSubscribeToFuncProvider.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:rdsRegisterFunction">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Приложения</h1>
<h2 class="off">Приложение А. Функции, константы и структуры RDS</h2>
<h3 class="off">А.5. Сервисные функции RDS</h3>
<h4 class="off">А.5.13. Вызов функций блоков</h4>
<h5>А.5.13.12. <span class="cpp">rdsRegisterFunction</span> &ndash; регистрация функции блока</h5>


<p>Функция <span class="cpp">rdsRegisterFunction</span> регистрирует в RDS функцию с указанным именем,
присваивая ей уникальный целый идентификатор.</p>

<pre class="cpp">  <span class="kw">int</span> <a class="hidden" href="app_ids.htm#light_ref24" title="Тип вызова сервисных функций">RDSCALL</a> rdsRegisterFunction(
      <a class="hidden" href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a> FuncName    <span class="rem">// Имя функции</span>
  );</pre>

<p class="apphdr">Тип указателя на эту функцию</p>
<p><span class="cpp">RDS_IS</span></p>

<p class="apphdr">Параметр</p>

<dl>
  <dt><span class="cpp">FuncName</span>&emsp;(<span class="cpp"><i><a href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a></i></span>)</dt>
  <dd>Указатель на строку (<span class="cpp">char*</span>) с именем регистрируемой функции.</dd>
</dl>

<p class="apphdr">Возвращаемое значение</p>
<p>Уникальный целый идентификатор, присвоенный функции.</p>

<p class="apphdr">Примечания</p>
<p>Вызов <span class="cpp">rdsRegisterFunction</span> регистрирует функцию с указанным именем в RDS:
если эта функция регистрируется в первый раз с момента загрузки схемы в память или создания новой схемы,
имя функции заносится во внутреннюю таблицу и ей присваивается уникальный целый идентификатор, который будет
использоваться для вызова этой функции и для опознания ее в модели блока при реакции на событие
<span class="cpp"><a href="RDS_BFM_FUNCTIONCALL.htm" title="А.2.4.6. RDS_BFM_FUNCTIONCALL &ndash; вызов функции блока">RDS_BFM_FUNCTIONCALL</a></span>. Если функция с этим именем уже регистрировалась,
<span class="cpp">rdsRegisterFunction</span> возвратит идентификатор, присвоенный этой функции при первой
регистрации. Таким образом, регистрацию функции можно безопасно проводить несколько раз подряд &ndash;
ее идентификатор от этого не изменится. Следует помнить, что при выгрузке схемы из памяти внутренняя таблица
функций RDS очищается, поэтому при следующей загрузке той же самой схемы функции блоков могут получить
другие идентификаторы.</p>

<p>Поскольку функцию блока достаточно зарегистрировать один раз за все время нахождения схемы в памяти,
все вызовы <span class="cpp">rdsRegisterFunction</span> часто выносят в
<a href="DllEntryPoint.htm" title="А.2.2. Главная функция DLL">главную функцию DLL</a>, но можно регистрировать функции и при
инициализации моделей блоков. RDS никогда не дает регистрируемой функции нулевой идентификатор, поэтому
значение 0 в переменной, в которой будет храниться идентификатор функции, можно использовать как признак того,
что эта функция еще не регистрировалась.</p>

<p class="apphdr">Пример</p>
<p>Пример использования функции <span class="cpp">rdsRegisterFunction</span> приведен
в <a href="pm_2_13_1.htm" title="&sect;2.13.1. Общие принципы вызова функций блоков">&sect;2.13.1 руководства программиста</a>.</p>

<p class="apphdr">См. также</p>
<p class="seealso"><span class="cpp"><a href="RDS_BFM_FUNCTIONCALL.htm" title="А.2.4.6. RDS_BFM_FUNCTIONCALL &ndash; вызов функции блока">RDS_BFM_FUNCTIONCALL</a></span>,
<a href="DllEntryPoint.htm" title="А.2.2. Главная функция DLL">главная функция DLL</a>,
<span class="cpp"><a href="RDS_BFM_INIT.htm" title="А.2.4.7. RDS_BFM_INIT &ndash; инициализация блока">RDS_BFM_INIT</a></span>.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="rdsRegisterFuncProvider.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="rdsSubscribeToFuncProvider.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:rdsRegisterFunction">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
