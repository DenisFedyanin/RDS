<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>А.5.2.31. rdsRegisterWindow &ndash; регистрация немодального окна</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="app_index.htm">Приложения</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a">Приложение А. Функции, константы и структуры RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_5">А.5. Сервисные функции RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_5_2">А.5.2. Управление работой RDS и функции общего назначения</a></p>
<div class="level"><p>А.5.2.31. <span class="cpp">rdsRegisterWindow</span> &ndash; регистрация немодального окна</p>
</div>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="rdsModalWindowMustClose.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="rdsRegWinActivateNotify.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:rdsRegisterWindow">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Приложения</h1>
<h2 class="off">Приложение А. Функции, константы и структуры RDS</h2>
<h3 class="off">А.5. Сервисные функции RDS</h3>
<h4 class="off">А.5.2. Управление работой RDS и функции общего назначения</h4>
<h5>А.5.2.31. <span class="cpp">rdsRegisterWindow</span> &ndash; регистрация немодального окна</h5>


<p><span id="ref1">Функция</span>
<span class="cpp"><span id="ref2">rdsRegisterWindow</span></span>
<span id="ref3">добавляет</span> указанное немодальное окно в меню
&laquo;<span class="menu">окна</span>&raquo; и на
<a href="um_2_1.htm#pic1" title="Главное окно RDS и его панели">панель с кнопками окон</a>, чтобы пользователь мог активировать это
окно, выбрав его название в меню или нажав соответствующую ему кнопку панели.</p>

<pre class="cpp">  <a class="hidden" href="app_ids.htm#light_ref11" title="Логический тип Windows API">BOOL</a> <a class="hidden" href="app_ids.htm#light_ref24" title="Тип вызова сервисных функций">RDSCALL</a> rdsRegisterWindow(
      <span id="light_ref1"><a class="hidden" href="app_ids.htm#light_ref18" title="Дескриптор окна">HWND</a></span> Handle,      <span class="rem">// Дескриптор окна</span>
      <a class="hidden" href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a> Title,      <span class="rem">// Название окна</span>
      <span id="light_ref2"><a class="hidden" href="app_ids.htm#light_ref15" title="Дескриптор BMP">HBITMAP</a></span> HBmp,     <span class="rem">// Дескриптор картинки окна</span>
      <span id="light_ref3"><a class="hidden" href="app_ids.htm#light_ref17" title="Дескриптор модуля">HINSTANCE</a></span> HInst,  <span class="rem">// Дескриптор модуля с картинкой</span>
      <a class="hidden" href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a> ResName     <span class="rem">// Имя ресурса с картинкой</span>
  );</pre>

<p class="apphdr">Тип указателя на эту функцию</p>
<p><span class="cpp">RDS_BHwSHbHiS</span></p>

<p class="apphdr">Параметры</p>

<dl>
  <dt><span class="cpp">Handle</span>&emsp;(<span class="cpp"><i><a href="app_ids.htm#light_ref18" title="Дескриптор окна">HWND</a></i></span>)</dt>
  <dd>Дескриптор регистрируемого немодального окна. Именно это окно RDS будет помещать на передний план
  при выборе пользователем его названия в меню &laquo;<span class="menu">окна</span>&raquo; или нажатии кнопки на панели окон.</dd>

  <dt><span class="cpp">Title</span>&emsp;(<span class="cpp"><i><a href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a></i></span>)</dt>
  <dd>Указатель на строку с названием окна. Это название будет добавлено в меню &laquo;<span class="menu">окна</span>&raquo;
  и на панель кнопок окон RDS.</dd>

  <dt><span class="cpp">HBmp</span>&emsp;(<span class="cpp"><i><a href="app_ids.htm#light_ref15" title="Дескриптор BMP">HBITMAP</a></i></span>)</dt>
  <dd>Дескриптор растрового рисунка, который должен быть помещен на кнопку окна слева от названия. Может иметь
  значение <span class="cpp">NULL</span>, тогда растровый рисунок задается параметрами
  <span class="cpp">HInst</span> и <span class="cpp">ResName</span>.</dd>

  <dt><span class="cpp">HInst</span>&emsp;(<span class="cpp"><i><a href="app_ids.htm#light_ref17" title="Дескриптор модуля">HINSTANCE</a></i></span>)</dt>
  <dd>Дескриптор модуля, из ресурсов которого должен быть загружен растровый рисунок для кнопки окна. Значение
  этого параметра используется только тогда, когда параметр <span class="cpp">HBmp</span> равен
  <span class="cpp">NULL</span>, в противном случае значение <span class="cpp">HInst</span> может быть любым (можно
  передавать <span class="cpp">NULL</span>). Понятие ресурсов и их использования рассматривается в описании
  Windows API.</dd>

  <dt><span class="cpp">ResName</span>&emsp;(<span class="cpp"><i>LPSTR</i></span>)</dt>
  <dd>Имя ресурса, в котором находится растровый рисунок для кнопки окна. Значение этого параметра используется
  только тогда, когда параметр <span class="cpp">HBmp</span> равен <span class="cpp">NULL</span>, а параметр
  <span class="cpp">HInst</span> не равен <span class="cpp">NULL</span>. В противном случае значение
  <span class="cpp"></span> может быть любым (можно передавать <span class="cpp">NULL</span>).</dd>
</dl>

<p class="apphdr">Возвращаемое значение</p>
<p><span class="cpp">TRUE</span>, если окно успешно зарегистрировано, <span class="cpp">FALSE</span> в противном
случае. Как правило, результат возврата этой функции можно не проверять &ndash; отказ в регистрации окна обычно
связан с недопустимыми параметрами функции (например, если параметр <span class="cpp">Handle</span> равен
<span class="cpp">NULL</span>), что легко обнаруживается и исправляется на этапе разработки программы.</p>

<p class="apphdr">Примечания</p>
<p>Если модель блока или модуль автоматической компиляции открывает немодальные окна (то есть окна,
разрешающие пользователю переключаться в другие окна), желательно регистрировать их в RDS функцией
<span class="cpp">rdsRegisterWindow</span>, чтобы пользователю проще было вызывать их на передний план.
При регистрации обязательно указывается дескриптор окна <span class="cpp">Handle</span>, используемый
RDS для перемещения окна на передний план, и название окна <span class="cpp">Title</span>, по которому
пользователь будет его опознавать в меню и на панели кнопок окон (обычно название окна делают одинаковым с
его заголовком, чтобы пользователю было проще сопоставить их). Кроме того, при регистрации может быть задан
растровый рисунок, который будет изображаться на кнопке этого окна слева от названия. Рисунок должен иметь размеры
16&times;16 точек, причем цвет его левой нижней точки будет считаться прозрачным, то есть этот цвет
при изображении рисунка будет заменен на цвет фона кнопки. Сам рисунок задается тремя параметрами функции:
<span class="cpp">HBmp</span>, <span class="cpp">HInst</span> и <span class="cpp">ResName</span>. Возможны
следующие сочетания параметров:</p>

<div class="tablecenter"><div class="tcont">
<table>
  <tr>
    <th><span class="cpp">HBmp</span></th>
    <th><span class="cpp">HInst</span></th>
    <th><span class="cpp">ResName</span></th>
    <th>Рисунок</th>
  </tr>
  <tr>
    <td class="center"><span class="cpp">NULL</span></td>
    <td class="center"><span class="cpp">NULL</span></td>
    <td class="center">Не важно (<span class="cpp">NULL</span>)</td>
    <td>Кнопка окна не будет иметь рисунка.</td>
  </tr>
  <tr>
    <td class="center"><span class="cpp">NULL</span></td>
    <td class="center">Дескриптор модуля</td>
    <td class="center">Имя ресурса в модуле</td>
    <td>Рисунок будет загружен из ресурса с именем <span class="cpp">ResName</span>,
    находящегося в модуле <span class="cpp">HInst</span>.</td>
  </tr>
  <tr>
    <td class="center">Дескриптор рисунка</td>
    <td class="center">Не важно (<span class="cpp">NULL</span>)</td>
    <td class="center">Не важно (<span class="cpp">NULL</span>)</td>
    <td>Рисунок будет скопирован из рисунка с дескриптором <span class="cpp">HBmp</span>.</td>
  </tr>
</table>
</div></div>

<p>Как правило, при загрузке рисунка из ресурса этот ресурс размещают в одной DLL с моделью блока или модулем
автокомпиляции, и в качестве дескриптора модуля <span class="cpp">HInst</span> указывают дескриптор той библиотеки,
из которой вызвана функция <span class="cpp">rdsRegisterWindow</span>. Однако, это не является обязательным
требованием: в <span class="cpp">HInst</span> можно передать дескриптор любого модуля, загруженного в память
на момент вызова. После регистрации окна этот модуль можно, при желании, немедленно выгрузить &ndash;
для дальнейшей работы он не нужен.</p>

<p>После регистрации окна функцией <span class="cpp">rdsRegisterWindow</span> процедура этого окна обязательно
должна сообщать RDS об активации этого окна вызовом <span class="cpp"><a href="rdsRegWinActivateNotify.htm" title="А.5.2.32. rdsRegWinActivateNotify &ndash; уведомление об активации зарегистрированного окна">rdsRegWinActivateNotify</a></span>,
иначе кнопка этого окна не будет переходить в нажатое состояние, а его название в меню &laquo;<span class="menu">окна</span>&raquo;
не будет помечаться. При закрытии окна его необходимо убрать из меню и с панели вызовом
<span class="cpp"><a href="rdsUnregisterWindow.htm" title="А.5.2.44. rdsUnregisterWindow &ndash; отмена регистрации немодального окна">rdsUnregisterWindow</a></span>.</p>

<p class="apphdr">См. также</p>
<p class="seealso"><span class="cpp"><a href="rdsUnregisterWindow.htm" title="А.5.2.44. rdsUnregisterWindow &ndash; отмена регистрации немодального окна">rdsUnregisterWindow</a></span>,
<span class="cpp"><a href="rdsChangeRegWinTitle.htm" title="А.5.2.13. rdsChangeRegWinTitle &ndash; изменение названия немодального окна">rdsChangeRegWinTitle</a></span>,
<span class="cpp"><a href="rdsRegWinActivateNotify.htm" title="А.5.2.32. rdsRegWinActivateNotify &ndash; уведомление об активации зарегистрированного окна">rdsRegWinActivateNotify</a></span>.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="rdsModalWindowMustClose.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="rdsRegWinActivateNotify.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:rdsRegisterWindow">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
