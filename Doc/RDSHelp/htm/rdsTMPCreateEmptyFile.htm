<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>А.5.19.1. rdsTMPCreateEmptyFile &ndash; создать временный файл</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="app_index.htm">Приложения</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a">Приложение А. Функции, константы и структуры RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_5">А.5. Сервисные функции RDS</a></p>
<div class="level"><p><a href="app_index.htm#light_htm:app_a_5_19">А.5.19. Работа с временными файлами</a></p>
<div class="level"><p>А.5.19.1. <span class="cpp">rdsTMPCreateEmptyFile</span> &ndash; создать временный файл</p>
</div>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="rdsXGTriangle.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="rdsTMPCreateFileSet.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:rdsTMPCreateEmptyFile">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Приложения</h1>
<h2 class="off">Приложение А. Функции, константы и структуры RDS</h2>
<h3 class="off">А.5. Сервисные функции RDS</h3>
<h4>А.5.19. Работа с временными файлами</h4>
<p class="abstract">Описываются функции, облегчающие использование временных (автоматически удаляемых) файлов.</p>
<h5>А.5.19.1. <span class="cpp">rdsTMPCreateEmptyFile</span> &ndash; создать временный файл</h5>


<p>Функция <span class="cpp">rdsTMPCreateEmptyFile</span> создает пустой временный файл и возвращает его имя.</p>

<pre class="cpp">  <a class="hidden" href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a> <a class="hidden" href="app_ids.htm#light_ref24" title="Тип вызова сервисных функций">RDSCALL</a> rdsTMPCreateEmptyFile(
    <span class="kw">int</span> SetId,         <span class="rem">// Набор временных файлов</span>
    <a class="hidden" href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a> DesiredName  <span class="rem">// Желаемое имя с путем</span>
  );</pre>

<p class="apphdr">Тип указателя на эту функцию</p>
<p><span class="cpp">RDS_SIS</span></p>

<p class="apphdr">Параметры</p>

<dl>
  <dt><span class="cpp">SetId</span>&emsp;(<span class="cpp"><i>int</i></span>)</dt>
  <dd>Уникальный целый идентификатор набора временных файлов, к которому будет принадлежать этот файл.</dd>

  <dt><span class="cpp">DesiredName</span>&emsp;(<span class="cpp"><i><a href="app_ids.htm#light_ref20" title="Указатель на строку (char*)">LPSTR</a></i></span>)</dt>
  <dd>Указатель на строку с желаемым именем файла. Имя должно содержать путь к файлу (возможно
  использование <a href="rdsGetFullFilePath.htm#ref1" title="Символические обозначения стандартных путей">символических обозначений путей</a>).</dd>
</dl>

<p class="apphdr">Возвращаемое значение</p>
<p>Указатель на строку во внутренней памяти RDS, содержащую полное (с путем) имя созданного временного файла.</p>

<p class="apphdr">Примечания</p>
<p>Эта функция создает пустой (нулевого размера) временный файл в папке, путь к к которой берется из
желаемого имени файла <span class="cpp">DesiredName</span>. Если на диске в данный момент нет файла с
именем <span class="cpp">DesiredName</span>, файл получит это имя, если же такой файл уже есть,
функция подберет для файла уникальное имя с тем же расширением и разместит его в этой же папке. Например,
результат вызова</p>

<pre class="cpp">  <span class="kw">char</span> *name=rdsTMPCreateEmptyFile(setid,<span class="str">"c:\\rds\\temp.tmp"</span>);</pre>

<p class="noindent">будет зависеть от того, существует ли на момент вызова функции файл
&laquo;<span class="file">c:\rds\temp.tmp</span>&raquo;. Если такого файла нет, он будет создан, и
функция вернет указатель на внутреннюю копию строки с его полным именем. Если файл уже есть,
функция заменит часть имени файла, не относящуюся к пути и расширению, на уникальный для данной папки
набор символов &ndash; например,
&laquo;<span class="file">c:\rds\201114081443145.tmp</span>&raquo;.</p>

<p>Созданный файл будет принадлежать к набору временных файлов <span class="cpp">SetId</span>. Наборы временных
файлов создаются функцией <span class="cpp"><a href="rdsTMPCreateFileSet.htm" title="А.5.19.2. rdsTMPCreateFileSet &ndash; создать набор временных файлов">rdsTMPCreateFileSet</a></span>, они нужны для того, чтобы можно было
уничтожить все файлы в наборе одним вызовом
<span class="cpp"><a href="rdsTMPDeleteFileSet.htm" title="А.5.19.4. rdsTMPDeleteFileSet &ndash; удалить набор временных файлов">rdsTMPDeleteFileSet</a></span>. При выгрузке схемы из памяти все временные файлы, созданные
RDS, уничтожаются автоматически.</p>

<p>Строка, указатель на которую возвращает функция, находится во внутренней памяти RDS (и
будет находиться там, пока этот временный файл не будет удален из набора или пока весь набор не будет
удален), поэтому вызывающей программе не нужно освобождать ее.</p>

<p class="apphdr">Пример</p>
<p>Пример использования функции <span class="cpp">rdsTMPCreateEmptyFile</span> приведен
в <a href="pm_4_4.htm" title="&sect;4.4. Компиляция моделей">&sect;4.4 руководства программиста</a>.</p>

<p class="apphdr">См. также</p>
<p class="seealso"><span class="cpp"><a href="rdsTMPCreateFileSet.htm" title="А.5.19.2. rdsTMPCreateFileSet &ndash; создать набор временных файлов">rdsTMPCreateFileSet</a></span>,
<span class="cpp"><a href="rdsTMPDeleteFileSet.htm" title="А.5.19.4. rdsTMPDeleteFileSet &ndash; удалить набор временных файлов">rdsTMPDeleteFileSet</a></span>,
<span class="cpp"><a href="rdsTMPRememberFileName.htm" title="А.5.19.5. rdsTMPRememberFileName &ndash; запомнить файл как временный">rdsTMPRememberFileName</a></span>.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="rdsXGTriangle.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="rdsTMPCreateFileSet.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="app_index.htm#light_htm:rdsTMPCreateEmptyFile">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
