<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;1.3. Режимы работы RDS</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_1">Глава 1. Необходимые сведения об устройстве RDS</a></p>
<div class="level"><p>&sect;1.3. Режимы работы RDS</p>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_1_2.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_1_4.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_1_3">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 1. Необходимые сведения об устройстве RDS</h2>
<h3>&sect;1.3. Режимы работы RDS</h3>
<p class="abstract">Описываются три режима работы RDS и принцип выполнения расчета в одноименном режиме.</p>


<p><span id="ref1">RDS</span>
может находиться в одном из трех режимов:
<span class="term">редактирования</span>,
<span class="term">моделирования</span> и
<span class="term">расчета</span>.</p>

<p>В режиме <span class="term"  id="light_ref1">редактирования</span> пользователь может изменять схему, добавляя и удаляя
блоки и связи, вводя их параметры и т.п. При этом его взаимодействие с самими
блоками ограничено: например, если блок изображает кнопку, то щелчок левой кнопкой
мыши на этом блоке в режиме редактирования вызовет не нажатие кнопки, а
<a href="um_2_6.htm" title="&sect;2.6. Действия с блоками в окне подсистемы">выделение</a> блока, после чего его можно будет
переместить, удалить, ввести различные параметры и т.п. Щелчки на стрелках
увеличения и уменьшения числового поля ввода тоже не будут приводить к изменению
его значения, вместо этого будет выделяться само поле ввода. Передача данных по
связям от блока к блоку в режиме редактирования не производится. Сразу после загрузки
схемы RDS обычно переключается именно в режим редактирования, позже его
можно включить при помощи кнопок и меню <a href="um_2_1.htm#ref10" title="Включение режима редактирования">главного окна</a> или
кнопок <a href="um_2_3.htm#light_ref1" title="Панель расчета">панели расчета</a> окна подсистемы.</p>

<div class="picright"><div class="container" id="pic1">
<img src="../img/HandleAndInput.png" width="201" height="182" alt="Соединение рукоятки и поля ввода" />
<p id="light_pic1">Рис.&nbsp;5. Соединение<br />рукоятки и поля ввода</p>
</div></div>

<p><span id="ref2">В</span>
режиме <span class="term" id="light_ref2">моделирования</span>
(его тоже можно включить в <a href="um_2_1.htm#ref11" title="Включение режима моделирования">главном окне</a>  RDS или
на <a href="um_2_3.htm#light_ref1" title="Панель расчета">панели расчета</a> окна подсистемы)
пользователь не может ни редактировать схему, ни вызвать
функции настройки блоков. Все его действия передаются блокам, которые обрабатывают
их согласно своим моделям. Щелчок левой кнопкой мыши на блоке-кнопке вызовет нажатие
этой кнопки, щелчок на стрелках числового поля ввода &ndash; изменение его значения
и т.п. Данные по связям в этом режиме обычно тоже не передаются, однако, некоторые
блоки могут принудительно активировать свои выходные связи и сообщить об этом
другим, соединенным с ними, блокам, если такая возможность была заложена в модели
разработчиком. Как правило, в режиме моделирования принудительно передают данные
своих выходов различные поля ввода, это позволяет соединять такие блоки в цепочки
и кольца, чтобы, при изменении значения в одном из них, автоматически изменялись
значения в других. Например, на
<a href="#pic1" title="Соединение рукоятки и поля ввода">рис.&nbsp;5</a>
изображены рукоятка и поле ввода, соединенные друг с другом: при перемещении
рукоятки будет автоматически изменяться значение в поле ввода, а при изменении значения
в поле ввода – автоматически перемещаться рукоятка, даже если расчет схемы не запущен.
Реализация такого поведения требует специального написания моделей блоков, поэтому
пользователь не может ни включить его, ни отключить. Большинство блоков не активирует
свои выходы принудительно и, таким образом, блоки не передают данные по связям в режиме
моделирования &ndash; для этого служит режим расчета.</p>

<p><span id="ref3">В</span>
режиме <span class="term" id="light_ref3">расчета</span>, как и в режиме моделирования, пользователь
не может изменять схему, и все его действия передаются блокам.
<span id="ref4">Кроме того</span>, непрерывно выполняется следующая
последовательность действий, называемая
<span class="term"  id="light_ref4">тактом расчета</span>:</p>

<ul>
  <li>По очереди в произвольном порядке вызываются все модели простых блоков,
  у которых установлен параметр
  &laquo;<a href="um_2_9_1.htm#light_ref8" title="Установка режима запуска блока">запуск каждый такт</a>&raquo; или
  <a href="um_1_4.htm#ref25" title="Сигнал запуска блока">сигнал управления запуском</a>
  которых имеет значение 1. Перед запуском модели блока вход управления запуском
  сбрасывается в 0, а
  <a href="um_1_4.htm#ref27" title="Сигнал готовности блока">выходу готовности</a>
  присваивается единица. Модель блока может, при необходимости, сбросить
  выход готовности, показав таким образом, что блок по каким-либо причинам не
  выполнил свою функцию.</li>
  <li>Для всех простых блоков, у которых выход готовности имеет значение 1,
  выполняется передача данных по связям, подключенным к выходам (некоторые выходы
  блока могут быть запрещены, в этом случае передача данных этого выхода не
  производится). Таким образом, все сработавшие блоки передают свои данные.
  После передачи значение выхода готовности сбрасывается в 0.</li>
  <li>Начинается следующий такт расчета: снова вызываются все модели простых блоков,
  передаются данные по связям, и т.д. до тех пор, пока пользователь или один из
  блоков не даст команду остановить расчет, то есть перейти в режим моделирования
  или редактирования.</li>
</ul>

<p>Как правило, именно в режиме расчета выполняются все вычисления, ради которых
собирается схема. Как и два других режима, он обычно включается при помощи кнопок и
меню <a href="um_2_1.htm#ref13" title="Запуск расчета">главного окна</a> или
кнопок <a href="um_2_3.htm#light_ref1" title="Панель расчета">панели расчета</a> окна подсистемы.</p>

<div class="picright"><div class="container" id="pic2">
<img src="../img/ExtInput.png" width="362" height="207" alt="В расчете участвуют только блоки Block1 и Block2" />
<p id="light_pic2">Рис.&nbsp;6. В расчете участвуют только блоки<br />&laquo;<span class="rdsvar">Block1</span>&raquo; и &laquo;<span class="rdsvar">Block2</span>&raquo;</p>
</div></div>

<p><span id="ref5">Следует учитывать</span>,
что <span id="light_ref5">в расчете участвуют только простые блоки</span>. Ни подсистемы, ни внешние входы/выходы,
ни вводы шин в расчете не участвуют, то есть их модели не вызываются в такте расчета.
Если, например, данные передаются от простого блока &laquo;<span class="rdsvar">Block1</span>&raquo; внутрь
подсистемы &laquo;<span class="rdsvar">Sys1</span>&raquo; через внешний вход &laquo;<span class="rdsvar">Input1</span>&raquo; ко
второму простому блоку &laquo;<span class="rdsvar">Block2</span>&raquo;
(<a href="#pic2" title="В расчете участвуют только блоки Block1 и Block2">рис.&nbsp;6</a>),
то в такте расчета будут вызваны только модели первого и второго блоков, при этом
после срабатывания первого блока данные его выхода &laquo;<span class="rdsvar">y</span>&raquo;
передадутся непосредственно на вход второго блока &laquo;<span class="rdsvar">x</span>&raquo;,
на вход &laquo;<span class="rdsvar">Input1</span>&raquo; подсистемы &laquo;<span class="rdsvar">Sys1</span>&raquo; и на выход ее
внешнего входа &laquo;<span class="rdsvar">Input1</span>&raquo;. Статические переменные подсистемы и
внешнего входа все равно получат данные первого блока, хотя их модели и не
вызываются, и это можно использовать при создании векторных картинок этих блоков.
Например, если добавить в векторную картинку подсистемы &laquo;<span class="rdsvar">Sys1</span>&raquo;
строку текста и связать ее с входом &laquo;<span class="rdsvar">Input1</span>&raquo; этой подсистемы, в
режимах расчета и моделирования на изображении подсистемы будет выводиться
числовое значение, полученное по связи от блока &laquo;<span class="rdsvar">Block1</span>&raquo;.</p>

<p><span id="ref6">Кроме</span>
<span id="ref7">основного</span>
 режима расчета в RDS существует еще и
<span class="term" id="light_ref6">инициализационный</span>, или
<span class="term" id="light_ref7">предварительный</span>, расчет.
Он выполняется для некоторых блоков в момент выхода из режима редактирования по запросу
начальных блоков алгебраических цепочек &ndash; чаще всего такими начальными блоками служат поля
ввода и прочие блоки интерфейса пользователя. Алгебраическими считаются блоки, которые
немедленно вычисляют свои выходные значения при изменении входных: сумматоры, перемножители,
переключатели и т. д. &laquo;Мгновенное&raquo; вычисление значений такими блоками непосредственно
перед запуском расчета позволяет сократить переходный процесс в схеме.
На <a href="um_1_4.htm#pic4" title="Две ветви алгебраических блоков">рис.&nbsp;10</a> изображена такая цепочка, состоящая
из трех сумматоров, подключенных к полю ввода (нижняя ветвь схемы). Для того, чтобы на
выходе третьего сумматора установилось правильное значение, требуется три такта расчета:
в первом такте сработает первый сумматор, во втором &ndash; второй сумматор обработает выход первого
и т. д. При предварительном расчете все три сумматора будут вызваны последовательно в момент
выхода из режима редактирования, поэтому правильные значения на их выходах будут установлены
уже на момент самого первого такта расчета. Чтобы предварительный расчет работал, необходимо, чтобы
его поддерживали модели как алгебраических блоков, так и блоков интерфейса пользователя. Большинство
стандартных блоков RDS поддерживает предварительный расчет.</p>

<p>Переключение между режимами работы RDS обычно осуществляется пользователем
при помощи меню или кнопок
<a href="um_2_1.htm" title="&sect;2.1. Главное окно и главное меню">главного окна</a> или
<a href="um_2_3.htm" title="&sect;2.3. Элементы и меню окна подсистемы">окна подсистемы</a>. В некоторых случаях режимы
могут переключаться самими блоками &ndash; например, сетевой блок синхронизации
расчета автоматически меняет режим RDS на ведомой машине согласно режиму ведущей.</p>

<p>Состояние схемы, ни разу не переходившей в режим расчета, отличается от состояния
после завершения или прекращения расчета. До запуска расчета схема находится в
исходном состоянии, и все переменные всех блоков имеют значения, заданные для них
<a href="um_1_4.htm#ref22" title="Значение переменной по умолчанию">по умолчанию</a>. В процессе расчета значения
переменных и состояния блоков изменяются: счетчики увеличивают свои значения,
на графиках появляются кривые, и т.п.
<span id="ref8">Когда</span> расчет остановится по команде
пользователя или одного из блоков схемы (например, если достигнуто время остановки
расчета, заданное в
<span id="light_ref8">блоке-планировщике</span>
расчета), схема останется в новом состоянии, и на индикаторах можно будет наблюдать
результаты этого расчета.
Если после этого снова запустить расчет, он не
начнется заново, а продолжится с текущего состояния.
<span id="ref9">Чтобы</span> вернуть схему в
исходное состояние, нужно
<span class="term" id="light_ref9">сбросить</span>
расчет кнопкой или пунктом меню в главном окне
RDS или в окне любой подсистемы. Некоторые блоки, например,
стандартный блок параметрической оптимизации, могут программно сбрасывать расчет
для выполнения многократного моделирования с разными параметрами.</p>

<p>Следует иметь в виду, что, если в процессе расчета пользователь как-то
взаимодействовал со схемой (например, изменял значения в полях ввода),
после сброса расчета все эти изменения, как правило, тоже сбрасываются.
Как именно блоки реагируют на сброс, и запоминают ли они значения, вводимые
пользователем в процессе расчета, определяется разработчиком модели блока,
но, в большинстве случаев, сброс расчета приводит к возврату всех переменных
блока в исходное состояние. Например, стандартное числовое поле ввода при сбросе
всегда возвращается к значению, введенному в него пользователем перед первым
запуском расчета.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_1_2.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_1_4.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_1_3">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
