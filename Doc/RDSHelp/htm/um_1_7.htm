<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;1.7. Интерактивные блоки</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_1">Глава 1. Необходимые сведения об устройстве RDS</a></p>
<div class="level"><p>&sect;1.7. Интерактивные блоки</p>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_1_6.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_1_8.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_1_7">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 1. Необходимые сведения об устройстве RDS</h2>
<h3>&sect;1.7. Интерактивные блоки</h3>
<p class="abstract">Кратко описываются основные способы взаимодействия блоков схемы с пользователем.</p>


<p>Некоторые блоки RDS специально предназначены для того, чтобы дать
пользователю возможность вмешиваться в расчет. К ним относятся разного рода
кнопки, рукоятки, поля ввода и т.п. С их помощью можно создавать интерактивные
схемы: пользователь может нажимать кнопки и двигать рукоятки не только перед
запуском <a href="um_1_3.htm#ref3" title="Режим расчета">расчета</a> в режиме <a href="um_1_3.htm#ref2" title="Режим моделирования">моделирования</a>,
но и в процессе самого расчета. Если расчет настроен так,
чтобы системное время текло примерно с той же скоростью, что и реальное
(см. <a href="um_2_2.htm#pic5" title="Окно настройки блока-планировщика">настройки блока-планировщика</a>),
можно даже создавать простейшие симуляторы управления моделируемыми процессами.</p>

<p>Реакция блока на действия пользователя определяется моделью этого блока и,
таким образом, может быть задана только программистом-разработчиком. Пользователь
не может самостоятельно заставить какой-либо блок реагировать на свои действия,
если программист не заложил в модель этого блока такую возможность. Однако,
пользователь может, при желании, заблокировать некоторые реакции модели блока в
<a href="um_2_9_1.htm#pic10" title="Вкладка DLL окна параметров блока">окне его параметров</a>. Потребность
в этом практически никогда не возникает, однако, о такой возможности следует знать.</p>

<p>Поскольку в режиме <a href="um_1_3.htm#ref1" title="Режим редактирования">редактирования</a>
большинство реакций блоков отключено,  взаимодействие блоков с пользователем обычно
происходит в режимах моделирования и расчета. Чаще всего используется реакция блока
на мышь: блок может выполнять какие-либо действия при нажатии и отпускании кнопок и
при перемещении курсора (например, так устроены блоки-рукоятки). Действия пользователя
обычно немедленно отражаются на внешнем виде блока &ndash; кнопки нажимаются,
рукоятки двигаются &ndash; поэтому изображения большинства интерактивных блоков
рисуются программно их моделями. Стандартная библиотека RDS содержит
множество таких блоков. Некоторые блоки, не предназначенные для ввода данных в
схему, тоже могут реагировать на движения курсора мыши и нажатие ее кнопок:
например, стандартные блоки построения графиков позволяют выделить мышью произвольную
часть графика и увеличить ее.</p>

<div class="picright"><div class="container" id="pic1">
<img src="../img/MouseProblems.png" width="207" height="193" alt="Щелчок в области блока 1 достанется блоку 2, если он на переднем плане" />
<p id="light_pic1">Рис.&nbsp;16. Щелчок в области<br />блока 1 достанется блоку 2,<br />если он на переднем плане</p>
</div></div>



<p>Следует помнить, что на мышь могут реагировать только блоки, находящиеся на активных
<a href="um_1_2.htm#ref23" title="слои в подсистеме">слоях</a> подсистемы. Если слой не активен, блок будет
изображаться, но его реакции на нажатия кнопок мыши и перемещение курсора будут
отключены. Также следует учитывать, что курсор мыши считается находящимся на
изображении блока тогда, когда он попадает в пределы прямоугольной области,
занимаемой блоком, причем если изображения блоков перекрываются, щелчок на области
перекрытия достается блоку, самому близкому к переднему плану
(<a href="#pic1" title="Щелчок в области блока 1 достанется блоку 2, если он на переднем плане">рис.&nbsp;16</a>). Все стандартные интерактивные
блоки имеют прямоугольную форму, поэтому с ними не возникает проблем. Если же
пользователь самостоятельно создает интерактивный блок со сложным изображением
(например, с <a href="um_1_8.htm" title="&sect;1.8. Автоматическая компиляция моделей блоков">автоматически компилируемой</a>
моделью), ему нужно быть готовым к тому, что его блок может перехватывать действия
мышью на других блоках, попавших в его описывающий прямоугольник. Избежать этого можно
располагая блок, реагирующий на мышь, на переднем плане.</p>

<p>Гораздо реже, чем реакция на мышь, в интерактивных блоках используется реакция на
клавиатуру. Чаще всего на клавиши реагируют блоки, включающие и выключающие какие-либо
режимы схемы &ndash; например, стандартному блоку-кнопке можно назначить клавишу,
по которой эта кнопка будет нажиматься. На клавиатуру могут реагировать только блоки
подсистемы, окно которой открыто и находится в RDS на переднем плане, причем
эти блоки могут находиться на неактивных и даже невидимых слоях. Как и реакции на
мышь, в режиме редактирования все реакции блоков на клавиатуру отключаются.</p>

<p>Реакция на клавиатуру определяется моделью блока, и пользователь не может изменить
ее, если программист не предусмотрел этого в настройках (например, в настройках
блока-кнопки можно задать клавишу, по которой кнопка будет нажиматься). Пользователь
может, при желании, запретить реакцию любого блока на клавиатуру в
<a href="um_2_9_1.htm#pic10" title="Вкладка DLL окна параметров блока">окне параметров</a>, но это &ndash;
единственный способ, которым он может вмешаться в обработку клавиатуры блоком.</p>

<p>Следует различать реакцию на клавиатуру самого блока и различных элементов
интерфейса Windows, порожденных этим блоком. Если, например, открыть окно параметров
стандартного поля ввода, позволяющего вводить числа с клавиатуры, и
<a href="um_2_9_1.htm#pic2" title="Вкладка предупреждение окна параметров библиотечного блока">разрешить изменение</a>
этих параметров, то можно будет увидеть, что реакция на клавиатуру для этого блока
отключена. Дело в том, что самому полю ввода не нужно реагировать на клавиатуру &ndash;
при щелчке мышью оно создает поверх себя обычное поле ввода Windows, в которое и
вводится число. Поэтому единственная реакция на действия пользователя, необходимая
полю ввода &ndash; это реакция на мышь (соответствующий флажок в окне параметров
включен). Блок редактирования матриц, тоже позволяющий вводить числа с клавиатуры,
также не нуждается в реакции на клавиатуру &ndash; по двойному щелчку он открывает
отдельное окно, с которым и работает пользователь.</p>

<p>Некоторые блоки добавляют дополнительные пункты в
контекстное <a href="um_2_3.htm" title="&sect;2.3. Элементы и меню окна подсистемы">меню подсистемы</a>
и <a href="um_2_1.htm" title="&sect;2.1. Главное окно и главное меню">главное меню RDS</a>. В отличие от реакций на
мышь и клавиатуру, эти пункты могут быть доступны пользователю и в режиме
редактирования. Такие добавленные пункты меню чаще всего используются блоками для
вызова дополнительных функций редактирования, переключения режимов и т.п.</p>

<p>Если блок привязывает к добавленному в главное меню пункту какое-либо сочетание
клавиш, он будет реагировать на это сочетание даже тогда, когда окно его подсистемы
закрыто. Так разработчики блоков обычно реализуют быстрый вызов каких-либо важных функций,
касающихся всей загруженной схемы. Стандартные блоки RDS редко пользуются
этой возможностью.</p>

<p>Технические подробности реакции блоков на действия пользователя подробно
рассматриваются в
<a href="um_3_7_10.htm" title="&sect;3.7.11. Реакция блока на мышь">&sect;3.7.11</a> и
<a href="um_3_7_11.htm" title="&sect;3.7.12. Добавление пунктов в контекстное и системное меню">&sect;3.7.12 описания пользователя</a>, а также в
<a href="pm_index.htm#light_htm:pm_2_12" title="&sect;2.12. Реакция блоков на действия пользователя">&sect;2.12 руководства программиста</a>.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_1_6.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_1_8.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_1_7">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
