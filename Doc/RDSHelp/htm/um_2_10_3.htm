<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.10.3. Рисование отрезков прямых линий и кривых Безье</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_10">&sect;2.10. Редактирование векторной картинки блока</a></p>
<div class="level"><p>&sect;2.10.3. Рисование отрезков прямых линий и кривых Безье</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_10_2.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_4.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_10_3">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3 class="off">&sect;2.10. Редактирование векторной картинки блока</h3>
<h4>&sect;2.10.3. Рисование отрезков прямых линий и кривых Безье</h4>
<p class="abstract">Рассматривается добавление в векторную картинку блока одиночных отрезков прямых и кривых Безье и окно параметров рисующего их элемента. Цвет отрезка и его проекции на горизонтальную и вертикальную оси могут быть связаны со значениями переменных блока.</p>




<p>Элементом картинки может быть отрезок прямой или кривой Безье, причем на одном или
на обоих концах отрезка может рисоваться стрелка. Отрезок прямой со стрелкой на конце,
горизонтальная и вертикальная проекция которого связаны с переменными блока, часто
используется в качестве анимированного изображения вектора.</p>

<p>Чтобы добавить в картинку отрезок, следует нажать на панели элементов в левой части
<a href="um_2_10_1.htm#pic1" title="Элементы окна редактора картинки блока">окна</a>
кнопку &laquo;<span class="menu">линия</span>&raquo;
(<a href="#pic1_0" title="Рисование отрезка: выбор режима (а), рисование (б), готовый выделенный отрезок (в)">рис.&nbsp;126&nbsp;а</a>,
вместо этого можно выбрать пункт меню &laquo;<span class="menu">элемент | линия</span>&raquo;), переместить курсор
мыши в точку рабочего поля, где будет располагаться начало отрезка, нажать левую кнопку,
а затем, не отпуская кнопки, переместить курсор в точку конца отрезка
(в процессе перемещения за курсором мыши будет тянуться линия). После отпускания кнопки
на рабочем поле появится отрезок прямой без стрелок, цвет и параметры которого будут
взяты из <a href="um_2_10_10.htm" title="&sect;2.10.10. Настройки редактора картинки">параметров по умолчанию</a>
графических элементов, а на панели элементов снова окажется нажатой кнопка
&laquo;<span class="menu">выбор</span>&raquo;. Добавленный отрезок будет выделен, его начало будет помечено
цифрой &laquo;1&raquo;, конец &ndash; цифрой &laquo;2&raquo;
(<a href="#pic1_2" title="Рисование отрезка: выбор режима (а), рисование (б), готовый выделенный отрезок (в)">рис.&nbsp;126&nbsp;в</a>).
После того, как отрезок нарисован, его начальную и конечную точки, обозначенные
круглыми маркерами, можно перетаскивать мышью с место на место. Преобразовать отрезок
в кривую Безье и добавить стрелки в его начале и конце можно либо через
<a href="#pic2" title="Окно параметров отрезка &ndash; вкладка внешний вид">окно его параметров</a>, либо через
<a href="#pic6" title="Контекстное меню отрезка">контекстное меню</a>.</p>

<div class="pic"><div class="container" id="pic1">
<div class="multi" id="pic1_0"><img src="../img/DrawLine0.png" width="153" height="237" alt="Рисование отрезка: выбор режима (а), рисование (б), готовый выделенный отрезок (в) 1" /><p id="light_pic1_0">(а)</p></div><div class="multi" id="pic1_1"><img src="../img/DrawLine1.png" width="200" height="237" alt="Рисование отрезка: выбор режима (а), рисование (б), готовый выделенный отрезок (в) 2" /><p id="light_pic1_1">(б)</p></div><div class="multi" id="pic1_2"><img src="../img/DrawLine2.png" width="79" height="237" alt="Рисование отрезка: выбор режима (а), рисование (б), готовый выделенный отрезок (в) 3" /><p id="light_pic1_2">(в)</p></div><p id="light_pic1">Рис.&nbsp;126. Рисование отрезка: выбор режима (а), рисование (б), готовый выделенный отрезок (в)</p>
</div></div>


<p><span id="ref1">Для</span>
вызова <span id="light_ref1">окна параметров добавленного отрезка</span> следует либо
дважды щелкнуть на нем левой кнопкой мыши, либо выбрать в
<a href="#pic6" title="Контекстное меню отрезка">контекстном меню</a>,
открывающемся при щелчке на отрезке правой кнопкой, пункт &laquo;<span class="menu">параметры</span>&raquo;.
Окно параметров отрезка содержит две вкладки: &laquo;<span class="menu">внешний вид</span>&raquo;
(<a href="#pic2" title="Окно параметров отрезка &ndash; вкладка внешний вид">рис.&nbsp;127</a>) и
&laquo;<span class="menu">связи</span>&raquo; (<a href="#pic5" title="Окно параметров отрезка &ndash; вкладка связи">рис.&nbsp;130</a>).</p>

<div class="pic"><div class="container" id="pic2">
<img src="../img/GraphLineParams1.png" width="478" height="407" alt="Окно параметров отрезка &ndash; вкладка внешний вид" />
<p id="light_pic2">Рис.&nbsp;127. Окно параметров отрезка &ndash; вкладка &laquo;<span class="menu">внешний вид</span>&raquo;</p>
</div></div>


<p>На вкладке &laquo;<span class="menu">внешний вид</span>&raquo; можно задать вид отрезка (отрезок прямой
или кривой Безье) и ввести координаты его точек. Для отрезка прямой вводятся только
координаты начала и конца отрезка, для отрезка кривой Безье &ndash; еще и координаты
управляющих точек касательных
(<a href="#pic3" title="Панель координат для кривой Безье">рис.&nbsp;128</a>,
внешний вид кривой с управляющими точками изображен на
<a href="#pic8" title="Изменение касательной кривой Безье: выбор маркера (а), перемещение маркера (б), измененная кривая (в)">рис.&nbsp;133</a>).
Все координаты вводятся в точках экрана для масштаба 100%. В нижней части вкладки
на панели &laquo;<span class="menu">линия</span>&raquo; задаются тип, толщина и цвет линии (аналогично
<a href="um_2_10_2.htm#ref3" title="Обрамление и заполнение">заданию обрамления прямоугольника</a>), а на панели
&laquo;<span class="menu">стрелки</span>&raquo; можно установкой соответствующих флажков включить и выключить
стрелки в начале и конце отрезка
(<a href="#pic4" title="Панель стрелки">рис.&nbsp;129</a>),
а также задать их размеры (при этом в нижней части панели будет отображаться
примерный вид линии со стрелкой, соответствующий текущим установкам).</p>

<div class="pic"><div class="container" id="pic3">
<img src="../img/GraphLineParams3.png" width="459" height="159" alt="Панель координат для кривой Безье" />
<p id="light_pic3">Рис.&nbsp;128. Панель координат для кривой Безье</p>
</div>
<div class="container" id="pic4">
<img src="../img/GraphLineParams4.png" width="253" height="159" alt="Панель стрелки" />
<p id="light_pic4">Рис.&nbsp;129. Панель &laquo;<span class="menu">стрелки</span>&raquo;</p>
</div>
</div>


<p>Вкладка &laquo;<span class="menu"><a href="#pic5" title="Окно параметров отрезка &ndash; вкладка связи">связи</a></span>&raquo; окна параметров отрезка совпадает с
<a href="um_2_10_2.htm#pic3" title="Окно параметров прямоугольника &ndash; вкладка связи">одноименной вкладкой</a>
окна параметров прямоугольника и параметры на ней задаются
<a href="um_2_10_2.htm#ref5" title="Связи прямоугольника">точно так же</a>.</p>

<div class="pic"><div class="container" id="pic5">
<img src="../img/GraphLineParams2.png" width="478" height="407" alt="Окно параметров отрезка &ndash; вкладка связи" />
<p id="light_pic5">Рис.&nbsp;130. Окно параметров отрезка &ndash; вкладка &laquo;<span class="menu">связи</span>&raquo;</p>
</div></div>


<p><span id="ref2">Как</span> 
и у
<a href="um_2_10_2.htm" title="&sect;2.10.2. Рисование прямоугольников и эллипсов">прямоугольника</a>, у отрезка можно 
<span id="light_ref2">связать с переменными</span> ширину, высоту,
<a href="um_2_10_2.htm#ref6" title="Связи цвета элемента">основной и альтернативный цвета</a>, но нужно принимать
во внимание некоторые особенности линии. Во-первых, если у прямоугольника можно связать
с переменной цвет заполнения, то есть его внутренней области, то у отрезков нет внутренних
областей, поэтому с переменной связывается цвет линии отрезка. Во-вторых, для отрезков
понятия &laquo;высота&raquo; и &laquo;ширина&raquo; относятся к размерам
прямоугольной области, по диагонали которой расположен отрезок. То есть, фактически,
ширина и высота отрезка &ndash; это его проекции на горизонтальную и вертикальную оси
координат. Это удобно при создании анимированных векторов: если, например, включить
в картинку отрезок с началом в точке (0,0) и концом в точке (10,10), включить стрелку
на его конце и связать его ширину и высоту с переменными блока, в которых хранятся
горизонтальная и вертикальная составляющие какого-либо вектора (вертикальную
составляющую придется брать с обратным знаком, поскольку вертикальная ось в экранных
и оконных координатах направлена сверху вниз), то этот отрезок со стрелкой будет
изображением этого вектора в масштабе 10:1 (единица координаты вектора будет
соответствовать десяти точкам экрана).</p>

<p>В контекстном меню отрезка
(<a href="#pic6" title="Контекстное меню отрезка">рис.&nbsp;131</a>),
вызываемом по щелчку правой кнопкой мыши, присутствует два дополнительных пункта:
&laquo;<span class="menu">отразить/повернуть</span>&raquo; и &laquo;<span class="menu">сделать кривой</span>&raquo; (для отрезка прямой)
или &laquo;<span class="menu">сделать прямой</span>&raquo; (для отрезка кривой Безье).
<span id="light_ref3">Пункт &laquo;<span class="menu">отразить/повернуть</span>&raquo;</span>
открывает дополнительное окно
(<a href="#pic7" title="Окно отражения и поворота (одинаковое для отрезка и многоугольника )">рис.&nbsp;132</a>),
в котором можно отразить отрезок по горизонтали или вертикали или повернуть его
на заданный угол: в результате поворота или отражения будут пересчитаны координаты
обеих точек отрезка, а также управляющих точек касательных, если отрезок &ndash;
кривая Безье. Пункт &laquo;<span class="menu">сделать кривой</span>&raquo; или &laquo;<span class="menu">сделать прямой</span>&raquo;
переключает вид отрезка аналогично флажку на вкладке
&laquo;<span class="menu"><a href="#pic2" title="Окно параметров отрезка &ndash; вкладка внешний вид">внешний вид</a></span>&raquo;
окна параметров. Управляющие точки касательных кривой Безье можно перетаскивать мышью
(<a href="#pic8" title="Изменение касательной кривой Безье: выбор маркера (а), перемещение маркера (б), измененная кривая (в)">рис.&nbsp;133</a>),
меняя тем самым форму кривой.</p>

<div class="pic"><div class="container" id="pic6">
<img src="../img/GraphLineContext.png" width="344" height="308" alt="Контекстное меню отрезка" />
<p id="light_pic6">Рис.&nbsp;131. Контекстное меню отрезка</p>
</div>
<div class="container" id="pic7">
<img src="../img/GraphMirrorRotate.png" width="272" height="308" alt="Окно отражения и поворота (одинаковое для отрезка и многоугольника )" />
<p id="light_pic7">Рис.&nbsp;132. Окно отражения и поворота<br />(одинаковое для отрезка и <a href="um_2_10_4.htm" title="&sect;2.10.4. Рисование многоугольников и ломаных линий">многоугольника</a>)</p>
</div>
</div>


<div class="pic"><div class="container" id="pic8">
<div class="multi" id="pic8_0"><img src="../img/GraphLineBezier1.png" width="165" height="237" alt="Изменение касательной кривой Безье: выбор маркера (а), перемещение маркера (б), измененная кривая (в) 1" /><p id="light_pic8_0">(а)</p></div><div class="multi" id="pic8_1"><img src="../img/GraphLineBezier2.png" width="170" height="237" alt="Изменение касательной кривой Безье: выбор маркера (а), перемещение маркера (б), измененная кривая (в) 2" /><p id="light_pic8_1">(б)</p></div><div class="multi" id="pic8_2"><img src="../img/GraphLineBezier3.png" width="133" height="237" alt="Изменение касательной кривой Безье: выбор маркера (а), перемещение маркера (б), измененная кривая (в) 3" /><p id="light_pic8_2">(в)</p></div><p id="light_pic8">Рис.&nbsp;133. Изменение касательной кривой Безье: выбор маркера (а),<br />перемещение маркера (б), измененная кривая (в)</p>
</div></div>


</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_10_2.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_4.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_10_3">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
