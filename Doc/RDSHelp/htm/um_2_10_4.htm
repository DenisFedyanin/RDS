<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.10.4. Рисование многоугольников и ломаных линий</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_10">&sect;2.10. Редактирование векторной картинки блока</a></p>
<div class="level"><p>&sect;2.10.4. Рисование многоугольников и ломаных линий</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_10_3.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_5.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_10_4">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3 class="off">&sect;2.10. Редактирование векторной картинки блока</h3>
<h4>&sect;2.10.4. Рисование многоугольников и ломаных линий</h4>
<p class="abstract">Описывается добавление в векторную картинку блока замкнутых и разомкнутых многоугольников и окно их параметров. Цвет замкнутого многоугольника может быть связан со значением какой-либо переменной блока.</p>



<p>Рисование многоугольников и ломаных линий (последние в картинках блоков
RDS представляют собой просто незамкнутые многоугольники) несколько отличается
от рисования прямоугольников, эллипсов и отрезков, описанного выше. Чтобы начать
рисование многоугольника, следует нажать на панели элементов в левой части
<a href="um_2_10_1.htm#pic1" title="Элементы окна редактора картинки блока">окна</a> кнопку
&laquo;<span class="menu">многоугольник</span>&raquo;
(<a href="#pic1_0" title="Рисование многоугольника: выбор режима (а), добавление начальной, промежуточной и конечной точек (б,в), готовый многоугольник (г)">рис.&nbsp;134&nbsp;а</a>,
вместо этого можно выбрать пункт меню &laquo;<span class="menu">элемент | многоугольник</span>&raquo;),
переместить курсор мыши в точку рабочего поля, где будет располагаться первая точка
многоугольника или ломаной, а затем нажать и отпустить левую кнопку мыши. После
этого следует щелкнуть левой кнопкой мыши там, где будет располагаться вторая точка,
затем &ndash; третья, и т.д. При рисовании простых фигур достаточно было задать всего
две точки (диагональ прямоугольника или концы отрезка), поэтому там пользователь нажимает
кнопку мыши в первой точке и отпускает ее во второй. Число точек в многоугольнике
заранее неизвестно, поэтому при его рисовании каждая очередная точка, кроме последней,
отмечается одиночным щелчком мыши (то есть нажатием и отпусканием кнопки). Последняя
точка многоугольника отмечается двойным щелчком
(<a href="#pic1_2" title="Рисование многоугольника: выбор режима (а), добавление начальной, промежуточной и конечной точек (б,в), готовый многоугольник (г)">рис.&nbsp;134&nbsp;в</a>).</p>

<div class="pic"><div class="container" id="pic1">
<div class="multi" id="pic1_0"><img src="../img/DrawPoly0.png" width="139" height="182" alt="Рисование многоугольника: выбор режима (а), добавление начальной, промежуточной и конечной точек (б,в), готовый многоугольник (г) 1" /><p id="light_pic1_0">(а)</p></div><div class="multi" id="pic1_1"><img src="../img/DrawPoly1.png" width="221" height="182" alt="Рисование многоугольника: выбор режима (а), добавление начальной, промежуточной и конечной точек (б,в), готовый многоугольник (г) 2" /><p id="light_pic1_1">(б)</p></div><div class="multi" id="pic1_2"><img src="../img/DrawPoly2.png" width="135" height="182" alt="Рисование многоугольника: выбор режима (а), добавление начальной, промежуточной и конечной точек (б,в), готовый многоугольник (г) 3" /><p id="light_pic1_2">(в)</p></div><div class="multi" id="pic1_3"><img src="../img/DrawPoly3.png" width="138" height="182" alt="Рисование многоугольника: выбор режима (а), добавление начальной, промежуточной и конечной точек (б,в), готовый многоугольник (г) 4" /><p id="light_pic1_3">(г)</p></div><p id="light_pic1">Рис.&nbsp;134. Рисование многоугольника: выбор режима (а), добавление начальной,<br />промежуточной и конечной точек (б,в), готовый многоугольник (г)</p>
</div></div>


<div class="picright"><div class="container" id="pic2">
<img src="../img/GraphPolyContext.png" width="328" height="305" alt="Контекстное меню многоугольника" />
<p id="light_pic2">Рис.&nbsp;135. Контекстное меню<br />многоугольника</p>
</div></div>


<p>По окончании рисования, после двойного щелчка, отметившего последнюю точку
многоугольника, он становится замкнутым. При выделении многоугольника
(см. <a href="#pic1_3" title="Рисование многоугольника: выбор режима (а), добавление начальной, промежуточной и конечной точек (б,в), готовый многоугольник (г)">рис.&nbsp;134&nbsp;г</a>),
его точки помечаются последовательными номерами в том порядке, в котором они
добавлялись при рисовании. Эти точки можно перемещать с места на место,
перетаскивая мышью их круглые маркеры выделения. Добавлять и удалять точки можно
через контекстное меню, вызываемое по правой кнопке мыши
(<a href="#pic2" title="Контекстное меню многоугольника">рис.&nbsp;135</a>)
или в окне параметров многоугольника
(<a href="#pic3_1" title="Окно параметров многоугольника &ndash; вкладки внешний вид (а) и координаты (б)">рис.&nbsp;136&nbsp;б</a>).
Превратить замкнутый многоугольник в разомкнутую ломаную линию и обратно можно
только через окно параметров.</p>

<p>Состав пунктов контекстного меню многоугольника зависит от того, на какую его точку
пришелся щелчок правой кнопкой мыши. Если под курсором мыши находился один из
круглых маркеров выделения точек, в меню будет пункт &laquo;<span class="menu">удалить точку</span>&raquo;,
выбрасывающий данную точку из многоугольника (все точки при этом перенумеровываются
и бывшие &laquo;соседи&raquo; удаленной точки соединяются прямой линией). Следует
помнить, что в RDS в многоугольнике должно быть не менее трех точек: если
многоугольник содержит три точки, удаление любой из них удалит весь многоугольник.
Пункт &laquo;<span class="menu">добавить точку</span>&raquo; вставляет в многоугольник новую точку с
координатами курсора мыши и делает ее соседями точки на линии, ближайшей к курсору
(фактически, ближайшая к курсору мыши линия многоугольника будет заменена на две: до
новой точки и после нее).
<span id="light_ref1">Пункт &laquo;<span class="menu">отразить/повернуть</span>&raquo;</span> открывает
<a href="um_2_10_3.htm#pic7" title="Окно отражения и поворота (одинаковое для отрезка и многоугольника )">окно, уже описывавшееся ранее</a>
&ndash; с его помощью можно пересчитать точки многоугольника, отразив его
относительно заданной оси или повернув на заданный угол.
<span id="ref2">Пункт</span>
&laquo;<span class="menu">параметры</span>&raquo;, как обычно, открывает
<span id="light_ref2">окно параметров</span>, состоящее из вкладок
&laquo;<span class="menu">внешний вид</span>&raquo;
(<a href="#pic3_0" title="Окно параметров многоугольника &ndash; вкладки внешний вид (а) и координаты (б)">рис.&nbsp;136&nbsp;а</a>),
&laquo;<span class="menu">координаты</span>&raquo;
(<a href="#pic3_1" title="Окно параметров многоугольника &ndash; вкладки внешний вид (а) и координаты (б)">рис.&nbsp;136&nbsp;б</a>) и
&laquo;<span class="menu">связи</span>&raquo;
(<a href="#pic5" title="Окно параметров многоугольника &ndash; вкладка связи">рис.&nbsp;138</a>).</p>

<div class="pic"><div class="container" id="pic3">
<div class="multi" id="pic3_0"><img src="../img/GraphPolyParam1.png" width="342" height="381" alt="Окно параметров многоугольника &ndash; вкладки внешний вид (а) и координаты (б) 1" /><p id="light_pic3_0">(а)</p></div><div class="multi" id="pic3_1"><img src="../img/GraphPolyParam2.png" width="342" height="381" alt="Окно параметров многоугольника &ndash; вкладки внешний вид (а) и координаты (б) 2" /><p id="light_pic3_1">(б)</p></div><p id="light_pic3">Рис.&nbsp;136. Окно параметров многоугольника &ndash; вкладки &laquo;<span class="menu">внешний вид</span>&raquo; (а) и &laquo;<span class="menu">координаты</span>&raquo; (б)</p>
</div></div>


<p>На вкладке &laquo;<span class="menu">внешний вид</span>&raquo; располагаются панели
&laquo;<span class="menu">обрамление</span>&raquo; и &laquo;<span class="menu">заполнение</span>&raquo; на которых задаются
параметры линии контура и цвет внутренней части многоугольника.
Эти панели полностью соответствуют уже описанным ранее
<a href="um_2_10_2.htm#ref3" title="Обрамление и заполнение">одноименным панелям</a>
окна параметров прямоугольника &ndash; практически у всех замкнутых фигур они
одинаковые. Ниже панели &laquo;<span class="menu">заполнение</span>&raquo; находится флажок
&laquo;<span class="menu">замкнутый</span>&raquo;: если он установлен, многоугольник будет замкнутым,
если сброшен, вместо многоугольника будет нарисована ломаная линия с теми же
координатами точек (при этом разрыв производится удалением линии, соединяющей
последнюю по счету точку многоугольника с первой, см.
<a href="#pic4" title="Один и тот же элемент картинки в виде многоугольника (а) и ломаной линии (б)">рис.&nbsp;137</a>).
Если этот флажок сброшен, заполнение установить нельзя: у ломаной линии нет
внутренней части, которую можно было бы закрасить.</p>

<div class="pic"><div class="container" id="pic4">
<div class="multi" id="pic4_0"><img src="../img/GraphPoly_closed.png" width="155" height="183" alt="Один и тот же элемент картинки в виде многоугольника (а) и ломаной линии (б) 1" /><p id="light_pic4_0">(а)</p></div><div class="multi" id="pic4_1"><img src="../img/GraphPoly_open.png" width="155" height="183" alt="Один и тот же элемент картинки в виде многоугольника (а) и ломаной линии (б) 2" /><p id="light_pic4_1">(б)</p></div><p id="light_pic4">Рис.&nbsp;137. Один и тот же элемент картинки в виде<br />многоугольника (а) и ломаной линии (б)</p>
</div></div>


<p>На вкладке &laquo;<span class="menu"><a href="#pic3_1" title="Окно параметров многоугольника &ndash; вкладки внешний вид (а) и координаты (б)">координаты</a></span>&raquo; находится
таблица с номерами и координатами всех точек многоугольника (все координаты
вводятся в точках экрана для масштаба 100%). Точки в многоугольнике соединяются
согласно их номерам: первая со второй, вторая с третьей и т.д., поэтому изменение
порядка точек в таблице меняет внешний вид многоугольника. Таблица завершается пустой
строкой: если ввести в эту строку координаты новой точки, она добавится в конец
списка точек многоугольника и ниже нее автоматически появится новая пустая строка
&ndash; так, строка за строкой, можно ввести координаты всех точек многоугольника.
Справа от таблицы располагаются кнопки, позволяющие переставлять и удалять точки, а
также добавлять точку не в конец, а в произвольное место списка:</p>

<div class="tablecenter"><div class="tcont">
<table>
  <tr>
    <th>Кнопка</th>
    <th>Действие</th>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowUp.png" width="25" height="25" alt="Кнопка: вверх" /></td>
    <td>Переместить выбранную точку на одну позицию вверх по списку.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowDown.png" width="25" height="25" alt="Кнопка: вниз" /></td>
    <td>Переместить выбранную точку на одну позицию вниз по списку.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Plus.png" width="25" height="25" alt="Кнопка: плюс" /></td>
    <td>Добавить новую точку перед выбранной (в списке появляется пустая строка,
    щелкнув на которой можно ввести координаты новой точки).</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Delete.png" width="25" height="25" alt="Кнопка: удалить" /></td>
    <td>Удалить выбранную точку.</td>
  </tr>
</table>
</div></div>

<p><span id="ref3">На</span>
вкладке &laquo;<span class="menu">связи</span>&raquo; окна параметров многоугольника
(<a href="#pic5" title="Окно параметров многоугольника &ndash; вкладка связи">рис.&nbsp;138</a>) можно
<span id="light_ref3">связать с переменными</span> блока цвет его заполнения,
<a href="um_2_10_2.htm#ref6" title="Связи цвета элемента">точно так же</a>, как это делается для
прямоугольника. В отличие от прямоугольника,
эллипса и линии, связать с переменными ширину и высоту многоугольника нельзя.</p>

<div class="pic"><div class="container" id="pic5">
<img src="../img/GraphPolyParam3.png" width="342" height="381" alt="Окно параметров многоугольника &ndash; вкладка связи" />
<p id="light_pic5">Рис.&nbsp;138. Окно параметров многоугольника &ndash; вкладка &laquo;<span class="menu">связи</span>&raquo;</p>
</div></div>


<p>В редакторе картинки RDS нет отдельного элемента для правильного
многоугольника, однако, он позволяет сформировать обычный многоугольник как
правильный выпуклый или как звезду заданного размера с заданным числом вершин.</p>

<p><span id="ref5"><span id="ref4">Для добавления</span></span>
такого <span id="light_ref4">правильного многоугольника</span> на рабочее поле
следует выбрать пункт меню &laquo;<span class="menu">элемент | правильный многоугольник</span>&raquo;, в
результате чего откроется <span id="light_ref5">окно задания параметров</span>,
изображенное на
<a href="#pic6" title="Окно создания правильного многоугольника: создание выпуклого многоугольника (а) и звезды (б)">рис.&nbsp;139</a>.
В его верхней части следует установить флажок
&laquo;<span class="menu">выпуклый</span>&raquo; или &laquo;<span class="menu">звезда</span>&raquo;, в зависимости от того, какой вид
правильного многоугольника создается.</p>

<div class="pic"><div class="container" id="pic6">
<div class="multi" id="pic6_0"><img src="../img/GraphPoly_Tri.png" width="409" height="251" alt="Окно создания правильного многоугольника: создание выпуклого многоугольника (а) и звезды (б) 1" /><p id="light_pic6_0">(а)</p></div><div class="multi" id="pic6_1"><img src="../img/GraphPoly_Star.png" width="409" height="251" alt="Окно создания правильного многоугольника: создание выпуклого многоугольника (а) и звезды (б) 2" /><p id="light_pic6_1">(б)</p></div><p id="light_pic6">Рис.&nbsp;139. Окно создания правильного многоугольника: создание выпуклого многоугольника (а) и звезды (б)</p>
</div></div>


<p>Для выпуклого многоугольника задается внешний диаметр, то есть диаметр
окружности, в которую он вписан, число углов и угол поворота первой вершины
(угол отсчитывается против часовой стрелки от луча, исходящего из центра
многоугольника вправо). Вершины будут добавлены в многоугольник против часовой
стрелки. Для звезды дополнительно указывается внутренний диаметр, то есть
диаметр окружности, на которой будут лежать все внутренние вершины. На панели
в правой части окна изображается примерный внешний вид многоугольника,
соответствующего введенным параметрам. Нажатие кнопки &laquo;<span class="menu">OK</span>&raquo;
добавит новый многоугольник с указанными параметрами в начало координат
рабочего поля, откуда его можно будет переместить в нужное место.</p>

<p>Следует учитывать, что правильный многоугольник, добавленный в схему
описанным выше способом, не будет сохранять правильность при редактировании:
после того, как он добавлен на рабочее поле, он становится обычным
многоугольником, вершины которого могут быть перемещены произвольным
образом.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_10_3.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_5.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_10_4">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
