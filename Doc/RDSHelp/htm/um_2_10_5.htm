<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.10.5. Создание строк и блоков текста</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_10">&sect;2.10. Редактирование векторной картинки блока</a></p>
<div class="level"><p>&sect;2.10.5. Создание строк и блоков текста</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_10_4.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_6.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_10_5">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3 class="off">&sect;2.10. Редактирование векторной картинки блока</h3>
<h4>&sect;2.10.5. Создание строк и блоков текста</h4>
<p class="abstract">Описывается создание текстовых элементов векторной картинки. Текст в них может быть как фиксированным, так и отражать значение какой-либо переменной блока.</p>



<p>В картинках блоков RDS могут находиться два типа текстовых элементов:
строка текста и блок текста. Строка текста, как и следует из ее названия,
может отображать только одну строку текста. Блок текста вписывает текст,
который может содержать произвольное количество строк, в прямоугольную область
экрана, автоматически перенося длинные строки, если они не умещаются
в заданную область по ширине. Тексты, отображаемые этими элементами, могут
быть связаны с переменными блока &ndash; так можно, например, создавать
простые числовые индикаторы. Следует учитывать, что, в отличие от строки
текста, блок текста не может поворачиваться на произвольный угол вместе с
картинкой блока &ndash; если используются повороты, следует использовать
только строки текста.</p>

<div class="picright"><div class="container" id="pic1">
<img src="../img/DrawTextString0.png" width="244" height="187" alt="Добавление в картинку строки текста" />
<p id="light_pic1">Рис.&nbsp;140. Добавление в<br />картинку строки текста</p>
</div></div>


<p>Чтобы добавить на рабочее поле картинки строку текста, следует нажать на
панели элементов в левой части
<a href="um_2_10_1.htm#pic1" title="Элементы окна редактора картинки блока">окна</a> кнопку &laquo;<span class="menu">текст</span>&raquo;
(с изображением буквы &laquo;Т&raquo;), после чего щелкнуть на рабочем поле
в той точке, где будет находиться левый верхний угол текстовой строки
(<a href="#pic1" title="Добавление в картинку строки текста">рис.&nbsp;140</a>). После этого
автоматически откроется окно параметров строки
(<a href="#pic2" title="Окно параметров текстовой строки: вкладки внешний вид (а) и связи (б)">рис.&nbsp;141</a>),
в котором нужно ввести текст для отображения. Если текст не ввести
и закрыть окно, текстовая строка добавлена не будет.</p>

<p><span id="ref1">На вкладке</span>
&laquo;<span class="menu">внешний вид</span>&raquo; <span id="light_ref1">окна параметров</span>
можно задать координаты
левого верхнего угла области, которую будет занимать строка, текст этой строки
и параметры шрифта, которым она будет отображаться. Размеры области, которую
занимает строка, задать нельзя &ndash; эти размеры будут вычисляться
автоматически по размеру шрифта и введенному тексту (если необходимо
жестко задать размеры области отображения, вместо текстовой строки следует
использовать <a href="#ref3" title="Блок текста">текстовый блок</a>. В нижней
части вкладки находится панель &laquo;<span class="menu">образец</span>&raquo;, на которой выбранным
шрифтом отображается введенный текст &ndash; именно так строка будет
выглядеть в картинке блока в масштабе 100%.</p>

<div class="pic"><div class="container" id="pic2">
<div class="multi" id="pic2_0"><img src="../img/GraphStringParams1.png" width="429" height="389" alt="Окно параметров текстовой строки: вкладки внешний вид (а) и связи (б) 1" /><p id="light_pic2_0">(а)</p></div><div class="multi" id="pic2_1"><img src="../img/GraphStringParams2.png" width="429" height="389" alt="Окно параметров текстовой строки: вкладки внешний вид (а) и связи (б) 2" /><p id="light_pic2_1">(б)</p></div><p id="light_pic2">Рис.&nbsp;141. Окно параметров текстовой строки: вкладки &laquo;<span class="menu">внешний вид</span>&raquo; (а) и &laquo;<span class="menu">связи</span>&raquo; (б)</p>
</div></div>


<p>Н вкладке
&laquo;<span class="menu">связи</span>&raquo; можно связать отображаемый текст
со значением какой-либо переменной блока. Связать положение строки или
параметры шрифта с переменными нельзя. Если требуется перемещать строку по
картинке в зависимости от значения переменных, следует поместить ее во
<a href="um_2_10_8.htm" title="&sect;2.10.8. Добавление в картинку вложенных систем координат">вложенную систему координат</a>
и связать с переменными положение этой системы. Если требуется управлять
параметрами шрифта, следует добавить в картинку несколько строк с
разными параметрами, поместить каждую из них в отдельную систему
координат и связать видимость этих систем с разными логическими переменными
&ndash; в результате, меняя значения этих логических переменных, можно
показывать на картинке ту или иную строку с нужными параметрами.</p>

<p><span id="ref2">Для того</span>,
чтобы <span id="light_ref2">связать текст строки с переменной</span>,
нужно на вкладке &laquo;<span class="menu">связи</span>&raquo;
(см. <a href="#pic2_1" title="Окно параметров текстовой строки: вкладки внешний вид (а) и связи (б)">рис.&nbsp;141&nbsp;б</a>)
либо выбрать эту переменную в выпадающем списке, либо ввести ее имя с
клавиатуры (ввод пустой строки отключает связь с переменной, подробнее о
связи элементов картинки с переменными см.
<a href="um_2_10_9.htm" title="&sect;2.10.9. Дополнительная информация о связи картинки с переменными">&sect;2.10.9</a>). В режимах
<a href="um_1_3.htm#ref2" title="Режим моделирования">моделирования</a> и
<a href="um_1_3.htm#ref3" title="Режим расчета">расчета</a> текст, введенный на вкладке
&laquo;<span class="menu"><a href="#pic2_0" title="Окно параметров текстовой строки: вкладки внешний вид (а) и связи (б)">внешний вид</a></span>&raquo;,
будет заменен на значение переменной. Переменная может быть как символьного,
так и числового <a href="um_1_4.htm#ref1" title="Типы переменных блока">типов</a>, в последнем случае можно
указать число знаков после десятичной точки, которое будет использовано при
преобразовании числа в строку для отображения. Кроме того, из выпадающего
списка следует выбрать способ выравнивания текста: влево, по центру или
вправо. Поскольку ширина строки текста всегда вычисляется автоматически,
выравнивание будет выполняться относительно ширины текста, введенного на
вкладке &laquo;<span class="menu">внешний вид</span>&raquo; и изображаемого в режиме редактирования
(<a href="#pic3" title="Одна и та же строка текста, связанная с переменной со значением 1000: в режиме редактирования (строка сверху), в режимах моделирования и расчета (три строки снизу) при выравнивании влево (вторая сверху), по центру (третья сверху) и вправо (снизу)">рис.&nbsp;142</a>).</p>

<div class="pic"><div class="container" id="pic3">
<img src="../img/GraphStringAlign.png" width="328" height="113" alt="Одна и та же строка текста, связанная с переменной со значением 1000: в режиме редактирования (строка сверху), в режимах моделирования и расчета (три строки снизу) при выравнивании влево (вторая сверху), по центру (третья сверху) и вправо (снизу)" />
<p id="light_pic3">Рис.&nbsp;142. Одна и та же строка текста, связанная с переменной со значением &laquo;1000&raquo;: в<br />режиме редактирования (строка сверху), в режимах моделирования и расчета (три строки<br />снизу) при выравнивании влево (вторая сверху), по центру (третья сверху) и вправо (снизу)</p>
</div></div>


<p>Фактически, при связи строки текста с переменной введенный в окне параметров
текст используется только для изображения в режиме редактирования и для
вычисления ширины области экрана, занимаемой строкой. Чаще всего в этом случае
в качестве текста вводят примерный вид отображаемого значения &ndash; так
проще компоновать картинку. Например, если предполагается отображать значение
переменной, находящееся в диапазоне &plusmn;1000 с двумя знаками после десятичной
точки, в поле ввода текста на вкладке &laquo;<span class="menu">внешний вид</span>&raquo; имеет смысл
ввести &minus;9999.99 &ndash; так в режиме редактирования можно будет понять,
как строка будет отображать значение переменной.</p>

<p>Если значение переменной, преобразованное в строку, превысит по длине текст,
заданный на вкладке &laquo;<span class="menu">внешний вид</span>&raquo;, выводимая строка не будет
обрезана: она будет выступать за исходные габариты вправо при выравнивании
влево, влево при выравнивании вправо и в обе стороны при выравнивании по
центру. Если необходимо не допускать выхода текста за заранее установленные пределы
размера, вместо текстовой строки следует использовать
<a href="#ref3" title="Блок текста">текстовый блок</a>.</p>

<p>После того, как окно параметров для добавленной строки текста закрыто,
эта строка появляется на рабочем поле, и ее можно выделять, перемещать и
удалять, как любой другой элемент картинки. Изменять ширину и высоту строки
произвольным образом нельзя: при перетаскивании одного из маркеров выделения
ширина и высота будут изменяться синхронно (на самом деле, при этом будет
изменяться размер шрифта, которым выводится строка, а ширина и высота будут
автоматически вычисляться заново). Открыть окно параметров строки можно,
как обычно, двойным щелчком или пунктом &laquo;<span class="menu">параметры</span>&raquo; контекстного меню.</p>

<p><span id="ref3">Создание</span>
<span id="light_ref3">блока текста</span> во многом похоже на создание
<a href="um_2_10_2.htm" title="&sect;2.10.2. Рисование прямоугольников и эллипсов">прямоугольника</a>: необходимо нажать на
панели элементов в левой части окна кнопку
&laquo;<span class="menu">блок текста</span>&raquo;
(<a href="#pic4_0" title="Создание нового пустого блока текста: выбор режима (а), рисование (б), готовый блок (в)">рис.&nbsp;143&nbsp;а</a>,
вместо этого можно выбрать пункт меню &laquo;<span class="menu">элемент | блок текста</span>&raquo;),
переместить курсор мыши в точку рабочего поля, где будет располагаться
левый верхний угол блока, нажать левую кнопку, а затем, не отпуская кнопки,
переместить курсор в точку, где будет располагаться правый нижний угол
блока (в процессе перемещения будет изображаться пунктирная рамка,
отмечающая границы будущего блока). После отпускания кнопки на рабочем поле
появится новый пустой блок текста. Если в
<a href="um_2_10_10.htm#ref3" title="Настройки редактора картинки">настройках редактора</a>
включено отображение центров эллипсов и прочих вспомогательных меток, блок
будет отмечен рамкой
(<a href="#pic4_2" title="Создание нового пустого блока текста: выбор режима (а), рисование (б), готовый блок (в)">рис.&nbsp;143&nbsp;в</a>),
если нет, он будет невидимым, но при этом его все равно можно,
как обычно, выделить щелчком мыши. Если пользователь по каким-либо причинам
отключил изображение центров и вспомогательных меток и &laquo;потерял&raquo;
созданный пустой блок текста, проще всего найти его, снова включив отображение
меток.</p>

<div class="pic"><div class="container" id="pic4">
<div class="multi" id="pic4_0"><img src="../img/DrawTextBlock0.png" width="125" height="237" alt="Создание нового пустого блока текста: выбор режима (а), рисование (б), готовый блок (в) 1" /><p id="light_pic4_0">(а)</p></div><div class="multi" id="pic4_1"><img src="../img/DrawTextBlock1.png" width="305" height="237" alt="Создание нового пустого блока текста: выбор режима (а), рисование (б), готовый блок (в) 2" /><p id="light_pic4_1">(б)</p></div><div class="multi" id="pic4_2"><img src="../img/DrawTextBlock2.png" width="218" height="237" alt="Создание нового пустого блока текста: выбор режима (а), рисование (б), готовый блок (в) 3" /><p id="light_pic4_2">(в)</p></div><p id="light_pic4">Рис.&nbsp;143. Создание нового пустого блока текста: выбор режима (а),<br />рисование (б), готовый блок (в)</p>
</div></div>


<p><span id="ref4">После</span>
того, как пустой блок создан, можно открыть
<span id="light_ref4">окно его параметров</span> двойным щелчком или пунктом
контекстного меню &laquo;<span class="menu">параметры</span>&raquo;. Окно состоит из двух вкладок:
&laquo;<span class="menu">внешний вид</span>&raquo; и &laquo;<span class="menu">связи</span>&raquo;
(<a href="#pic5" title="Окно параметров текстового блока: вкладки внешний вид (а) и связи (б)">рис.&nbsp;144</a>).</p>

<div class="pic"><div class="container" id="pic5">
<div class="multi" id="pic5_0"><img src="../img/GraphTextBlockParams1.png" width="431" height="463" alt="Окно параметров текстового блока: вкладки внешний вид (а) и связи (б) 1" /><p id="light_pic5_0">(а)</p></div><div class="multi" id="pic5_1"><img src="../img/GraphTextBlockParams2.png" width="431" height="463" alt="Окно параметров текстового блока: вкладки внешний вид (а) и связи (б) 2" /><p id="light_pic5_1">(б)</p></div><p id="light_pic5">Рис.&nbsp;144. Окно параметров текстового блока: вкладки &laquo;<span class="menu">внешний вид</span>&raquo; (а) и &laquo;<span class="menu">связи</span>&raquo; (б)</p>
</div></div>


<p>Вкладка &laquo;<span class="menu">внешний вид</span>&raquo; в целом похожа на
<a href="#pic2_0" title="Окно параметров текстовой строки: вкладки внешний вид (а) и связи (б)">одноименную вкладку</a>
окна параметров текстовой строки, но для текстового блока можно задать размеры
и выравнивание, а в поле ввода для текста можно ввести несколько строк.
В отличие от строки текста, текстовый блок не вычисляет свои размеры
автоматически по размеру шрифта и введенному тексту, ширина и высота
текстового блока явно задаются пользователем в точках экрана для масштаба
100%. Горизонтальное и вертикальное выравнивание текста в блоке задается в
меню, открывающемся при нажатии на кнопку справа сверху от поля ввода текста
(на самой кнопке схематически изображается выбранное в данный момент положение
строчек внутри блока). Для строки текста выравнивание задавалось только при
наличии связи с переменными, поскольку размер строки вычислялся автоматически,
однако в блоке текста выравнивание используется даже в режиме редактирования:
если блок содержит несколько строк разной длины, они могут быть выведены
внутри прямоугольной области самого блока выровненными по левой или правой
границам или по центральной вертикальной линии. Кроме того, сами строки могут
быть размещены у верхней или у нижней границы блока или в его середине.
Может быть выбрано любое сочетание вариантов горизонтального и вертикального
выравнивания.</p>

<div class="picright"><div class="container" id="pic6">
<img src="../img/GraphTextBlockWrap.png" width="219" height="132" alt="Перенос длинной строки" />
<p id="light_pic6">Рис.&nbsp;145. Перенос<br />длинной строки</p>
</div></div>


<p>Следует учитывать, что, если какая-либо строка текста окажется слишком
длинной и не уместится в ширину блока, она не будет обрезана
&ndash; вместо этого ее не уместившаяся часть будет перенесена на
следующую строку
(<a href="#pic6" title="Перенос длинной строки">рис.&nbsp;145</a>). Если возможно,
этот перенос будет осуществлен по границе слов (то есть групп символов,
разделенных пробелами). Если же сами слова слишком длинные, строка будет
перенесена в произвольном месте. Если строк в тексте окажется слишком
много, чтобы уместить их в блок по вертикали, они будут обрезаны сверху
(при выравнивании снизу), снизу (при выравнивании сверху) или с обеих
сторон (при выравнивании по центру).</p>

<p><span id="ref5">На</span> вкладке
&laquo;<span class="menu"><a href="#pic5_1" title="Окно параметров текстового блока: вкладки внешний вид (а) и связи (б)">связи</a></span>&raquo;
окна параметров текстового блока можно задать
<span id="light_ref5">имя переменной</span>, значение которой
будет заменять собой текст блока в режимах моделирования и расчета. Текстовый
блок не предназначен для отображения числовых значений переменных, хотя и может
это делать, поэтому на вкладке &laquo;<span class="menu">связи</span>&raquo; не задается число знаков
после десятичной точки: если переменная, с которой связан текст, будет иметь
один из числовых типов, она будет преобразована в строку с точностью,
выбранной автоматически.</p>

<p>Размер текстового блока, как и любого другого элемента, можно изменять,
перетаскивая мышью маркеры его выделения
(см. <a href="#pic4_2" title="Создание нового пустого блока текста: выбор режима (а), рисование (б), готовый блок (в)">рис.&nbsp;143&nbsp;в</a>). В отличие от
строки текста, изменение размера которой осуществляется за счет изменения
размера шрифта, блок текста сохраняет один и тот же заданный размер шрифта при
любом размере &ndash; меняются только размеры прямоугольной области, которой
ограничен и по которой выравнивается текст.</p>

<p>Следует помнить, что блок текста, наряду с
<a href="um_2_10_2.htm#ref12" title="Рельефный элемент картинки">рельефным прямоугольником</a> и
<a href="um_2_10_6.htm" title="&sect;2.10.6. Добавление в картинку растровых рисунков">растровым рисунком</a>,
относится к элементам картинки, не поворачивающимся при повороте
<a href="um_2_10_8.htm" title="&sect;2.10.8. Добавление в картинку вложенных систем координат">системы координат</a>,
в которой они находятся.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_10_4.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_6.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_10_5">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
