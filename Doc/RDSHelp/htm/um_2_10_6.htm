<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.10.6. Добавление в картинку растровых рисунков</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_10">&sect;2.10. Редактирование векторной картинки блока</a></p>
<div class="level"><p>&sect;2.10.6. Добавление в картинку растровых рисунков</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_10_5.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_7.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_10_6">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3 class="off">&sect;2.10. Редактирование векторной картинки блока</h3>
<h4>&sect;2.10.6. Добавление в картинку растровых рисунков</h4>
<p class="abstract">Описывается добавление в состав векторной картинки блока растровых рисунков в стандартном для Windows формате BMP.</p>



<p>Растровые рисунки используются в картинках блоков достаточно редко &ndash; в основном,
в виде фотографий, служащих неподвижным фоном для других элементов. RDS не может
поворачивать растровые рисунки на произвольный угол, поэтому в подвижные
элементы картинок их обычно не включают. Кроме того, растровые рисунки занимают
достаточно большой объем памяти, поэтому, если есть возможность создать то
же самое изображение из векторных элементов, обычно поступают именно так. Тем не
менее, если нужно добавить в картинку именно фотографию, другого выхода, кроме
использования растрового рисунка, нет.</p>

<div class="picright"><div class="container" id="pic1">
<img src="../img/DrawBmp0.png" width="279" height="186" alt="Добавление в картинку растрового рисунка" />
<p id="light_pic1">Рис.&nbsp;146. Добавление в картинку<br />растрового рисунка</p>
</div></div>


<p>Чтобы добавить в картинку растровый рисунок, следует нажать на панели элементов
в левой части окна кнопку &laquo;<span class="menu">растровый рисунок (BMP)</span>&raquo;, после чего
щелкнуть на рабочем поле в той точке, где будет находиться левый верхний угол
прямоугольного рисунка
(<a href="#pic1" title="Добавление в картинку растрового рисунка">рис.&nbsp;146</a>).
<span id="ref1">После</span> этого
автоматически откроется <span id="light_ref1">окно параметров рисунка</span>
(<a href="#pic2" title="Окно параметров растрового рисунка">рис.&nbsp;147</a>),
в котором нужно загрузить рисунок из файла или вставить его из буфера обмена.
Если не сделать ни того, ни другого, и закрыть окно, рисунок в картинку
добавлен не будет.</p>

<p><span id="light_ref2">Окно параметров рисунка</span> не содержит вкладок.
В его левой части находится панель
&laquo;<span class="menu">рисунок</span>&raquo;, на которой отображается загруженный рисунок, его размеры в
точках экрана и выпадающий список, в котором можно выбрать, будет ли рисунок храниться внутри
схемы (вариант &laquo;хранить в схеме&raquo;), или в схему следует добавить только ссылку на
внешний файл, из которого рисунок будет загружаться по необходимости (вариант
&laquo;связать с файлом&raquo;).</p>

<p>При выборе хранения рисунка в схеме ниже выпадающего списка будут находиться две кнопки:
&laquo;<span class="menu">загрузить</span>&raquo;, открывающая стандартный диалог
выбора файла Windows и загружающая из этого файла выбранный рисунок, и
&laquo;<span class="menu">вставить</span>&raquo;, вставляющая рисунок из буфера обмена
(см. <a href="#pic2" title="Окно параметров растрового рисунка">рис.&nbsp;147</a>). Хранение в схеме рекомендуется только для
небольших рисунков, поскольку данные растрового рисунка сильно увеличивают размер файла схемы, и даже
могут вызвать сбои в работе RDS из-за нехватки памяти.</p>

<p>При выборе связывания рисунка с файлом ниже выпадающего списка будет находиться кнопка с многоточием,
позволяющая выбрать файл, из которого будет считываться рисунок, и, слева от нее, имя выбранного в данный
момент файла. Если файл рисунка находится в одной папке с файлом схемы, это имя не будет содержать пути.
При этом папку со схемой и рисунком можно свободно перемещать с места на место &ndash; пока схема и файл
рисунка находятся в одной папке, связь не разорвется. Связывание с файлом рекомендуется для рисунков
большого размера. Разумеется, при этом нужно следить за тем, чтобы файл с рисунком не был
стерт или переименован.</p>

<p>Рисунок на панели
всегда отображается в масштабе 100%, поэтому, если он не уместится в область
просмотра, справа и снизу в этой области появятся полосы прокрутки.</p>

<div class="pic"><div class="container" id="pic2">
<img src="../img/GraphBmpParams1.png" width="518" height="380" alt="Окно параметров растрового рисунка" />
<p id="light_pic2">Рис.&nbsp;147. Окно параметров растрового рисунка</p>
</div></div>


<p>Справа на панелях &laquo;<span class="menu">левый верхний угол</span>&raquo; и
&laquo;<span class="menu">размеры</span>&raquo; задаются координаты рисунка на рабочем поле картинки
и его размеры в точках экрана соответственно. Если установлен флажок
&laquo;<span class="menu">исходный размер</span>&raquo;, рисунок на картинке будет изображаться в
масштабе 100%, то есть &laquo;точка в точку&raquo;. Если же флажок сброшен,
в поля ввода &laquo;<span class="menu">ширина</span>&raquo; и &laquo;<span class="menu">высота</span>&raquo; можно ввести
произвольные значения, и рисунок на картинке будет сжат или растянут согласно
введенным размерам (его пропорции при этом могут исказиться).</p>

<div class="picright"><div class="container" id="pic3">
<img src="../img/GraphBmpTransp.png" width="315" height="320" alt="Растровый рисунок с непрозрачным (сверху) и прозрачным (снизу) цветом Г-образной фигуры" />
<p id="light_pic3">Рис.&nbsp;148. Растровый рисунок с<br />непрозрачным (сверху) и прозрачным<br />(снизу) цветом Г-образной фигуры</p>
</div></div>


<p>На панели &laquo;<span class="menu">прозрачность</span>&raquo; (доступна только при хранении рисунка в схеме)
можно указать, следует ли считать
какой-либо цвет растрового рисунка прозрачным &ndash; все точки указанного цвета
рисоваться не будут, и сквозь них будут видны элементы картинки и другие блоки,
находящиеся дальше от переднего плана
(<a href="#pic3" title="Растровый рисунок с непрозрачным (сверху) и прозрачным (снизу) цветом Г-образной фигуры">рис.&nbsp;148</a>).
Можно указать один из трех вариантов:</p>

<ul>
  <li>&laquo;<span class="menu">непрозрачный фон</span>&raquo; &ndash; ни один из цветов рисунка не будет считаться
  прозрачным, все точки будут рисоваться;</li>

  <li>&laquo;<span class="menu">по левому нижнему углу</span>&raquo; &ndash; прозрачным будет считаться цвет
  левой нижней точки рисунка, все точки этого же цвета рисоваться не будут (обычно
  этот вариант выбирается для рисунков с однотонными полями, чтобы сделать эти
  поля прозрачными);</li>

  <li>&laquo;<span class="menu">задать цвет</span>&raquo; &ndash; прозрачный цвет задается вручную: либо
  нажатием на кнопку с цветным прямоугольником, открывающую стандартный диалог выбора
  цвета, либо нажатием на кнопку с изображением пипетки, позволяющей выбрать цвет
  щелчком на нужной точке рисунка на левой панели.</li>
</ul>

<p>Задание прозрачности не изменяет действительный размер рисунка и, таким образом,
размеры блока, в картинке которого он присутствует. Если, например, рисунок имеет
размер 100&times;200 точек, и при этом он представляет собой изображение
80&times;180, окруженное однотонными полями шириной в 10 точек, цвет которых
сделан прозрачным, для определения границ изображения блока (при проверке попадания
в него курсора мыши или при подведении к нему связей) прямоугольник все равно будет
считаться имеющим ширину 100 и высоту 200 точек экрана, хотя полоса в десять точек
вокруг него не выглядит принадлежащей блоку. Тем не менее, эта область относится к
его изображению, хотя она и прозрачна.</p>

<p><span id="ref3">Связать растровый рисунок с какими-либо переменными блока нельзя</span>. Если требуется
перемещать его в зависимости от значений переменных, следует поместить его во вложенную
систему координат, и перемещать ее. При этом следует помнить, что поворачиваться
растровый рисунок не может, его стороны всегда будут параллельны сторонам экрана. Для
программного определения попадания курсора мыши в растровый рисунок для него можно, как
и для любого другого векторного элемента, задать целый
идентификатор на панели в правой нижней части
<a href="#pic2" title="Окно параметров растрового рисунка">окна параметров</a>. Использование
идентификаторов в моделях описывается в
<a href="um_3_7_10.htm" title="&sect;3.7.11. Реакция блока на мышь">&sect;3.7.11 описания пользователя</a>
и
<a href="pm_2_12_1.htm" title="&sect;2.12.1. Реакция на мышь">&sect;2.12.1 руководства программиста</a>.</p>

<p>После добавления рисунка в картинку окно его параметров можно, как обычно, снова
вызвать двойным щелчком или пунктом &laquo;<span class="menu">параметры</span>&raquo; контекстного меню.
В этом окне можно в любой момент заменить рисунок, загрузив его из другого файла
или вставив из буфера обмена. RDS не сохраняет связь рисунка с файлом
&ndash; после загрузки или вставки в окне параметров весь рисунок добавляется к
данным схемы и сохраняется вместе с ней, поэтому файлы схем с блоками, содержащими
в своих картинках растровые рисунки, обычно получаются довольно объемными.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_10_5.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_7.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_10_6">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
