<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.10.9. Дополнительная информация о связи картинки с переменными</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_10">&sect;2.10. Редактирование векторной картинки блока</a></p>
<div class="level"><p>&sect;2.10.9. Дополнительная информация о связи картинки с переменными</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_10_8.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_10.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_10_9">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3 class="off">&sect;2.10. Редактирование векторной картинки блока</h3>
<h4>&sect;2.10.9. Дополнительная информация о связи картинки с переменными</h4>
<p class="abstract">Описываются особенности связи элементов векторной картинки с элементами массивов и полями структур, а также с динамическими переменными.</p>



<p>Как уже упоминалось выше, различные параметры элементов
<a href="um_1_2.htm#light_ref22">векторной картинки блока</a>
(размер, цвет, угол поворота и видимость элементов вложенных систем координат, и т.п.)
могут быть связаны с переменными этого блока. При этом в режимах
<a href="um_1_3.htm#ref2" title="Режим моделирования">моделирования</a> и
<a href="um_1_3.htm#ref3" title="Режим расчета">расчета</a>
внешний вид картинки будет отражать значения этих переменных. Имена переменных,
связываемых с элементом картинки, выбираются из выпадающих списков или вводятся
вручную с клавиатуры в окне параметров этого элемента.</p>

<p>В выпадающем списке можно выбрать только простые переменные, тип которых совместим
с данным параметром данного элемента: например, в выпадающем списке видимости
<a href="um_2_10_8.htm#pic6_1" title="Окно параметров системы координат: вкладки параметры (а) и связи (б)">системы координат</a>
можно выбрать только логические, сигнальные и целые переменные, в выпадающем списке
положения &ndash; целые и вещественные, и т.п. С клавиатуры можно ввести любое
имя, в том числе, и имя переменной, не существующей в блоке. Это не приведет к
ошибке: если графический элемент ссылается на несуществующую переменную, связь
просто не будет установлена, и элемент будет вести себя точно так же, как если
бы никакого имени переменной указано не было. Позже можно будет добавить
переменную с нужным именем в блок, и элемент картинки автоматически
подключится к ней.</p>

<p>Вручную можно указывать не только имена пока не существующих переменных, но и
поля <a href="um_1_4.htm#light_ref14" title="тип переменной: структура">структур</a>, элементы
<a href="um_1_4.htm#light_ref12" title="тип переменной: массив">массивов</a> и т.п. Для этого используется обычный
<a href="um_1_4.htm#ref21" title="Синтаксис имен переменных">синтаксис RDS</a>: имя поля структуры отделяется от
имени структуры точкой, элементы массива указываются в квадратных скобках, индексы ячейки
<a href="um_1_4.htm#light_ref11" title="тип переменной: матрица">матрицы</a> указываются в квадратных скобках через запятую.
Например, указание в каком-либо поле ввода связи графического элемента с переменной
текста &laquo;X[3]&raquo; подключает его к элементу массива &laquo;<span class="rdsvar">X</span>&raquo; с
индексом 3, &laquo;y.Re&raquo; &ndash; к полю &laquo;<span class="rdsvar">Re</span>&raquo; структуры
&laquo;<span class="rdsvar">y</span>&raquo;, и т.п. При этом, как и в случае простых переменных, не важно,
существует ли в данный момент такая переменная или элемент массива с таким номером:
как только он появится, элемент картинки установит с ним связь.</p>

<p>При необходимости можно связывать элементы картинки не только со
<a href="um_1_4.htm" title="&sect;1.4. Статические переменные блоков">статическими</a>
переменными блока, но и с
<a href="um_1_5.htm" title="&sect;1.5. Динамические переменные">динамическими</a>, причем это могут быть
динамические переменные не только самого блока, но и его
<a href="um_1_2.htm#ref13" title="Родительская подсистема">родительской подсистемы</a> или
<a href="um_1_2.htm#ref11" title="Корневая подсистема">корневой подсистемы</a> схемы. Для связи с ними
используются специальные префиксы, начинающиеся со знака доллара и отделяемые от имени
самой переменной точкой &ndash; точно так же, как поля структур отделяются от
их имен. Всего существует четыре префикса:
&laquo;$DYN&raquo;, &laquo;$PARENT&raquo;, &laquo;$SEARCH&raquo; и
&laquo;$ROOT&raquo;.</p>

<p><span id="ref1">Префикс</span>
&laquo;<span id="light_ref1">$DYN</span>&raquo; указывает на связь с
динамической переменной того блока, которому принадлежит векторная картинка. Например,
текст &laquo;$DYN.var1&raquo;, введенный в поле ввода в окне параметров графического
элемента, связывает этот элемент с динамической переменной &laquo;<span class="rdsvar">var1</span>&raquo;
этого самого блока. Этот префикс используется достаточно редко, поскольку обычно в
нем нет необходимости: гораздо проще связать элемент со статической переменной
этого блока, чем с динамической, для работы с которой требуется программная
поддержка его модели. Пожалуй, единственный случай, когда картинке блока может
потребоваться связь с динамической переменной этого же блока &ndash; это
<a href="um_2_11_1.htm" title="&sect;2.11.1. Общие сведения о подсистемах">подсистема</a>, у которой есть модель.
Статические переменные подсистемы не имеют постоянной структуры и работать с ними
из ее модели нельзя, поэтому, если модели требуется изменять внешний вид
подсистемы, одна должна создать динамическую переменную и записывать в нее
значения, которые будут влиять на внешний вид связанного с этой переменной элемента
картинки.</p>

<p><span id="ref2">Префикс</span>
&laquo;<span id="light_ref2">$PARENT</span>&raquo; указывает на связь с
динамической переменной родительской подсистемы, то есть подсистемы,
непосредственно внутри которой находится блок с данной картинкой. Например, запись
&laquo;$PARENT.DynTime&raquo; связывает элемент картинки с динамической переменной
&laquo;<span class="rdsvar">DynTime</span>&raquo; родительской подсистемы блока. Если в родительской
подсистеме не окажется такой переменной, элемент будет вести себя как при
отсутствии связи.</p>

<p><span id="ref3">Префикс</span>
&laquo;<span id="light_ref3">$SEARCH</span>&raquo; тоже связывает элемент
с динамической переменной родительской подсистемы данного блока, однако, в отличие
от &laquo;$PARENT&raquo;, если в этой подсистеме не окажется нужной переменной,
элемент попытается связаться с родительской подсистемой этой подсистемы. Если переменной
не окажется и там, она будет искаться в следующей по иерархии подсистеме, и так
вплоть до корневой подсистемы схемы.</p>

<p><span id="ref4">Префикс</span>
&laquo;<span id="light_ref4">$ROOT</span>&raquo; связывает элемент с
указанной динамической переменной корневой подсистемы, если, конечно, там есть переменная с
таким именем.</p>

<p>В качестве примера создадим блок, в картинку которого будет входить текстовая строка,
связанная с переменной &laquo;<span class="rdsvar">$SEARCH.DynTime</span>&raquo;
(<a href="#pic1_0" title="Связь текстовой строки с динамической переменной (а) и внешний вид блока в режиме расчета (б)">рис.&nbsp;159&nbsp;а</a>).
&laquo;<span class="rdsvar"><span id="light_ref5">DynTime</span></span>&raquo; &ndash; это стандартная
динамическая переменная,
создаваемая блоком-планировщиком динамического расчета и содержащая текущее
значение системного времени.</p>

<div class="pic"><div class="container" id="pic1">
<div class="multi" id="pic1_0"><img src="../img/GraphDynConnection1.png" width="441" height="366" alt="Связь текстовой строки с динамической переменной (а) и внешний вид блока в режиме расчета (б) 1" /><p id="light_pic1_0">(а)</p></div><div class="multi" id="pic1_1"><img src="../img/GraphDynConnection2.png" width="175" height="125" alt="Связь текстовой строки с динамической переменной (а) и внешний вид блока в режиме расчета (б) 2" /><p id="light_pic1_1">(б)</p></div><p id="light_pic1">Рис.&nbsp;159. Связь текстовой строки с динамической переменной (а) и внешний вид блока в режиме расчета (б)</p>
</div></div>


<p>Поместим в одну подсистему с этим блоком стандартный блок-планировщик и подключим
числовой индикатор (см. пример в
<a href="um_2_4.htm" title="&sect;2.4. Создание и сохранение новой схемы">&sect;2.4</a>) к его выходу &laquo;<span class="rdsvar">Time</span>&raquo;, на
котором он дублирует значение времени
(<a href="#pic1_1" title="Связь текстовой строки с динамической переменной (а) и внешний вид блока в режиме расчета (б)">рис.&nbsp;159&nbsp;б</a>).
&laquo;<span class="menu">Time</span>&raquo; &ndash; скрытый выход, поэтому при создании связи для
его выбора придется воспользоваться пунктом меню
&laquo;<span class="menu"><a href="um_2_7_1.htm#pic3" title="Полный список переменных блока">список</a></span>&raquo;). Если запустить расчет,
можно будет увидеть, как строка на изображении блока отображает текущее значение
времени &ndash; оно будет совпадать со значением на числовом индикаторе.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_10_8.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_10.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_10_9">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
