<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.11.1. Общие сведения о подсистемах</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_11">&sect;2.11. Использование подсистем</a></p>
<div class="level"><p>&sect;2.11.1. Общие сведения о подсистемах</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_10_12.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_11_2.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_11_1">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3>&sect;2.11. Использование подсистем</h3>
<p class="abstract">Описывается создание схем с использованием подсистем &ndash; специальных блоков, которые могут содержать внутри себя другие блоки.</p>
<h4>&sect;2.11.1. Общие сведения о подсистемах</h4>
<p class="abstract">Рассматриваются основные принципы работы с подсистемами в RDS.</p>


<p>Подсистема &ndash; это блок, внутри которого могут размещаться другие блоки и связи.
В схеме подсистема выглядит как обычный блок. Чтобы увидеть или изменить ее содержимое,
подсистему нужно открыть в отдельном окне (по умолчанию для этого следует дважды щелкнуть на
ней левой кнопкой мыши). Размещение отдельных частей схемы в подсистемах улучшает ее
читаемость. Если какая-либо группа соединенных между собой блоков объединена общей
функцией (например, все они &ndash; части модели какого-либо объекта), их можно
поместить внутрь подсистемы, и общая схема станет значительно проще. Вместо
нескольких соединенных между собой блоков пользователь увидит один, выполняющий эту
общую функцию. Если пользователя заинтересует, как именно реализована функция,
он откроет подсистему в отдельном окне и сможет изучить ее содержимое или отредактировать
его. Если нет, он сможет работать со схемой, не заботясь о том, что у этого сложного
блока внутри.</p>

<p>На <a href="#pic1" title="Схема с подсистемой">рис.&nbsp;190</a>
изображена схема, полностью аналогичная схеме на
<a href="um_2_2.htm#pic1" title="Окна RDS сразу после загрузки схемы">рис.&nbsp;19</a>,
но в этой схеме часть блоков, а именно блоки, составляющие ПИ-регулятор
(один из стандартных регуляторов, использующихся в теории управления), помещена
в отдельную подсистему.</p>

<div class="pic"><div class="container" id="pic1">
<img src="../img/SubSys_Reg.png" width="663" height="486" alt="Схема с подсистемой" />
<p id="light_pic1">Рис.&nbsp;190. Схема с подсистемой</p>
</div></div>


<p>Размещение части блоков в подсистеме позволило сделать схему более компактной:
в самой схеме вместо трех соединенных между собой блоков теперь изображается
единственный блок &ndash; подсистема &laquo;<span class="rdsvar">Reg</span>&raquo;. В данном случае для нее
не задан внешний вид, поэтому блок подсистемы изображается стандартной иконкой,
но, как и для любого другого блока RDS, для подсистемы можно задать
<a href="um_index.htm#light_htm:um_2_10" title="&sect;2.10. Редактирование векторной картинки блока">векторную картинку</a>,
<a href="um_1_2.htm#light_ref21" title="Варианты внешнего вида блока">изображение</a> в виде
прямоугольника с текстом или даже программное рисование, если у подсистемы будет
своя собственная модель.</p>

<p>Содержимое подсистемы отображается в отдельном
<a href="um_2_3.htm" title="&sect;2.3. Элементы и меню окна подсистемы">окне</a>, которое открывается пунктом
&laquo;<span class="menu">открыть</span>&raquo; контекстного меню блока этой подсистемы или, если это не изменено в
параметрах подсистемы, по двойному щелчку на ее блоке. На рисунке заголовок
окна совпадает с именем подсистемы, но, при желании, этот заголовок
<a href="um_2_11_4.htm" title="&sect;2.11.4. Настройка параметров подсистемы и ее окна">можно изменить</a>. Окно подсистемы не
находится внутри окна схемы или главного окна RDS, оно совершенно независимо
и может быть перемещено в любое место экрана (или, при наличии нескольких
мониторов, на другой монитор). Можно закрыть окно самой схемы, окно подсистемы при
этом останется открытым и с ним можно будет продолжать работать. Разумеется, если
удалить подсистему из схемы, ее окно исчезнет вместе с ней.</p>

<p>На экране может быть одновременно открыто любое число окон подсистем, каждому из
них будет соответствовать пункт в
<a href="um_2_1.htm" title="&sect;2.1. Главное окно и главное меню">меню</a>
&laquo;<span class="menu">окна</span>&raquo;. Если в RDS разрешено отображение списка открытых окон,
окну подсистемы будет соответствовать еще и кнопка на панели этого списка, как на
<a href="#pic1" title="Схема с подсистемой">рис.&nbsp;190</a> &ndash; нажатие этой кнопки
вызывает окно на передний план.</p>

<p>Для соединения блоков внутри подсистемы с остальной частью схемы используются
специальные типы блоков:
<a href="um_1_2.htm#light_ref12" title="Внешний вход подсистемы">внешние входы</a> и
<a href="um_1_2.htm#light_ref14" title="Внешний выход подсистемы">внешние выходы</a>. У подсистемы на
<a href="#pic1" title="Схема с подсистемой">рис.&nbsp;190</a> есть один внешний вход с именем
&laquo;<span class="rdsvar">e</span>&raquo; и один внешний выход с именем &laquo;<span class="rdsvar">u</span>&raquo;. Для этих
блоков не задан специальный внешний вид, поэтому они изображаются стандартными для
RDS иконками. Можно заметить, что в блоке подсистемы внешнему входу и выходу
соответствуют одноименные переменные &laquo;<span class="rdsvar">e</span>&raquo; и &laquo;<span class="rdsvar">u</span>&raquo;,
к которым подключены связи. Связь, подключенная к входу подсистемы, внутри нее
продолжается от соответствующего ей внешнего входа, а связь, подсоединенная
внутри подсистемы к внешнему выходу, продолжается снаружи от соответствующей ему
переменной &ndash; именно так связи вводятся внутрь подсистемы и выводятся наружу.
В подсистеме может быть любое количество внешних входов и внешних выходов любых
поддерживаемых RDS
<a href="um_1_4.htm#ref1" title="Типы переменных блока">типов</a>, и для каждого из них в блок подсистемы будет
автоматически добавлена переменная того же типа &ndash; как правило, с тем же именем
(имя переменной, создаваемой в подсистеме, можно, при желании, изменить в настройках
блоков-входов и выходов).
<a href="um_2_8.htm" title="&sect;2.8. Использование шин">Шины</a> тоже можно вводить в подсистему, для
этого используется специальный тип блоков, который рассматривается в
<a href="um_2_11_3.htm" title="&sect;2.11.3. Ввод шин в подсистему">&sect;2.11.3</a>. Хотя внешние входы и выходы,
как и другие типы блоков, могут иметь собственную модель, эта модель не может
вмешиваться в передачу данных по связи, которую блок вводит в подсистему или
выводит из нее. По этой причине модели к внешним входам и выходам подключаются
крайне редко. Например, такие модели могут быть использованы в схеме, которая
служит не для расчета, а для визуализации графа соединений каких-либо объектов:
в этом случае модели входов и выходов могут участвовать в подсветке путей в
таком графе.</p>

<p>Подсистемы могут иметь любой уровень вложенности. Внутри подсистемы может
находиться другая подсистема, в ней &ndash; еще одна, и т.д.
<span id="ref1">Подсистема</span>,
непосредственно внутри которой находится какой-либо блок (простой блок,
вложенная подсистема или блок любого другого типа), называется
<span class="term"><span id="light_ref1">родительской</span></span> по отношению
к нему.</p>

<p>С открытым окном вложенной подсистемы можно работать точно так же, как и с
окном схемы. <span id="ref2">Фактически</span>,
окно схемы &ndash; это просто окно
<span class="term">корневой</span> подсистемы, то есть подсистемы, внутри
которой находятся все остальные блоки и подсистемы схемы. В окно подсистемы
можно точно так же
<a href="um_2_5.htm" title="&sect;2.5. Добавление в схему стандартных блоков">добавлять</a> стандартные блоки,
<a href="um_2_6.htm" title="&sect;2.6. Действия с блоками в окне подсистемы">выделять, перемещать и удалять</a>
их, и т.п. Панели и меню окон подсистем подробно описываются в
<a href="um_2_3.htm" title="&sect;2.3. Элементы и меню окна подсистемы">&sect;2.3</a>.</p>

<p><span id="ref3">С</span>
иерархией подсистем связана доступность блокам
<a href="um_1_5.htm" title="&sect;1.5. Динамические переменные">динамических переменных</a>.
<span id="light_ref3">Динамические переменные</span> &ndash; это скрытые от
пользователя переменные, создаваемые моделями блоков для обмена данными между
собой. Как правило, блок может обращаться к динамическим переменным, находящимся в
его родительской подсистеме, или в родительской подсистеме родительской подсистемы,
и т.д. вплоть до корневой подсистемы схемы. Например, в схеме на
<a href="#pic1" title="Схема с подсистемой">рис.&nbsp;190</a>
интегратору &laquo;<span class="rdsvar">Int1</span>&raquo; в подсистеме &laquo;<span class="rdsvar">Reg</span>&raquo; доступна
динамическая переменная времени, создаваемая и обслуживаемая в корневой подсистеме
блоком-планировщиком динамического расчета &laquo;<span class="rdsvar">RTP1</span>&raquo;. Внешне в схеме
наличие и доступность этой переменной никак не проявляется, однако без доступа к
ней интегратор на смог бы работать &ndash; его модели необходимо знать текущее
значение времени для расчетов. Когда блок &laquo;<span class="rdsvar">Int1</span>&raquo; запрашивает доступ
к переменной времени, RDS ищет ее в подсистеме
&laquo;<span class="rdsvar">Reg1</span>&raquo;. Ее там нет, RDS ищет ее в следующей по иерархии подсистеме
&ndash; корневой. Там искомая переменная присутствует, и интегратор получает к ней
доступ. Таким образом, блоки, обращающиеся к динамическим переменным в какой-либо
подсистеме, можно, как правило, перемещать в ее вложенные подсистемы без потери
работоспособности схемы.</p>

<p>Любую подсистему схемы, как и любой блок, можно сохранить в отдельный файл
&ndash; для этого следует в
<a href="um_1_3.htm#ref1" title="Режим редактирования">режиме редактирования</a>
выбрать в контекстном меню блока этой подсистемы пункт
&laquo;<span class="menu">сохранить подсистему</span>&raquo;
(<a href="#pic2" title="Сохранение подсистемы в файл">рис.&nbsp;191</a>)
и указать имя файла.
<span id="ref4">Подсистема</span> сохраняется в файл в
том же формате, что и вся
схема (и расширение у файла будет таким же &ndash;
&laquo;<span class="file"><span id="light_ref4">.rds</span></span>&raquo;), поэтому эту подсистему
всегда можно загрузить как полноценную схему и работать с ней. По этой же причине
любую сохраненную в файл схему можно загрузить как подсистему внутрь другой схемы
&ndash; для этого следует нажать на свободном месте рабочего поля той подсистемы,
куда будет вставлена схема, правую кнопку мыши, выбрать в контекстном меню пункт
&laquo;<span class="menu">создать | загрузить...</span>&raquo; и указать путь к файлу схемы. В указанной
точке рабочего поля появится блок подсистемы, содержащий внутри себя
загруженную схему.</p>

<div class="pic"><div class="container" id="pic2">
<img src="../img/SaveSubSystem.png" width="408" height="243" alt="Сохранение подсистемы в файл" />
<p id="light_pic2">Рис.&nbsp;191. Сохранение подсистемы в файл</p>
</div></div>



</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_10_12.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_11_2.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_11_1">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
