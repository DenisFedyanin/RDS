<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.11.2. Создание подсистемы и размещение в ней блоков</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_11">&sect;2.11. Использование подсистем</a></p>
<div class="level"><p>&sect;2.11.2. Создание подсистемы и размещение в ней блоков</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_11_1.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_11_3.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_11_2">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3 class="off">&sect;2.11. Использование подсистем</h3>
<h4>&sect;2.11.2. Создание подсистемы и размещение в ней блоков</h4>
<p class="abstract">Рассматривается пример создания в схеме вложенной подсистемы и перемещения в нее части блоков.</p>


<p>Чтобы создать подсистему внутри какой-либо другой подсистемы
(<a href="um_1_2.htm#ref11" title="Корневая подсистема">корневой</a> или вложенной),
нужно, чтобы окно будущей
<a href="um_1_2.htm#ref13" title="Родительская подсистема">родительской</a>
подсистемы было открыто. На свободном месте рабочего поля этого окна следует
вызвать контекстное меню нажатием правой кнопки мыши и выбрать в нем пункт
&laquo;<span class="menu">создать | новая подсистема</span>&raquo;
(см. <a href="#pic2_0" title="Создание новой пустой подсистемы: выбор пункта контекстного меню (а) и созданная подсистема (б)">рис.&nbsp;193&nbsp;а</a>), после чего в точке
нажатия правой кнопки появится блок новой пустой подсистемы. Теперь можно открыть
ее окно и добавлять в нее блоки и связи обычным образом. В интерфейсе
RDS не предусмотрена функция, позволяющая автоматически переместить
выделенные в какой-либо подсистеме блоки внутрь вложенной подсистемы
&ndash; чтобы сделать это, необходимо вырезать выделенные блоки в буфер обмена нажатием
<span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">X</span>, затем создать новую пустую подсистему, открыть ее окно и
вставить туда блоки из буфера обмена нажатием
<span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">V</span> или через контекстное меню. Добавлять внешние
<a href="um_1_2.htm#light_ref12" title="Внешний вход подсистемы">входы</a> и
<a href="um_1_2.htm#light_ref14" title="Внешний выход подсистемы">выходы</a>,
необходимые для связи подсистемы с внешним миром, тоже необходимо вручную.</p>

<p>Чтобы добавить в подсистему внешний вход или
выход, необходимо выполнить следующие действия:</p>

<ul>
  <li>вызвать в выбранной точке рабочего поля подсистемы контекстное меню;</li>
  <li>выбрать в меню пункт &laquo;<span class="menu">создать | внешний вход</span>&raquo; или
  &laquo;<span class="menu">создать | внешний выход</span>&raquo; (см.
  <a href="#pic7_0" title="Создание внешнего входа: выбор пункта контекстного меню (а) и созданный вход (б)">рис.&nbsp;198&nbsp;а</a>);</li>
  <li>открыть окно параметров появившегося блока и указать в нем имя и тип входа
  или выхода, который будет создан в подсистеме.</li>
</ul>

<p>После этого можно будет внутри подсистемы присоединять связи к внешнему входу
или выходу (они будут иметь единственную переменную с указанными именем и типом),
а снаружи &ndash; к соответствующим этим блокам переменным блока подсистемы.</p>

<p><span id="ref1">Рассмотрим</span> создание подсистемы на примере преобразования схемы
&laquo;<span class="file"><span id="light_ref1">Dynamic.rds</span></span>&raquo;, входящей в
набор стандартных примеров RDS
(см. <a href="um_2_2.htm" title="&sect;2.2. Пример загрузки готовой схемы и ее расчета">&sect;2.2</a>), в схему, подобную изображенной
на <a href="um_2_11_1.htm#pic1" title="Схема с подсистемой">рис.&nbsp;190</a>.
Нам необходимо будет переместить несколько блоков, находящихся в корневой подсистеме
схемы, внутрь вложенной подсистемы.</p>

<p>Сначала необходимо загрузить схему &laquo;<span class="file">Dynamic.rds</span>&raquo;, которую мы
будем редактировать &ndash; все необходимые для этого действия описаны в
<a href="um_2_2.htm" title="&sect;2.2. Пример загрузки готовой схемы и ее расчета">&sect;2.2</a>. После загрузки схемы на экране откроется
окно ее корневой (и единственной) подсистемы, изображенное
на <a href="#pic1" title="Окно корневой подсистемы схемы">рис.&nbsp;192</a>.
Рамкой на рисунке выделены три блока, которые мы будем перемещать внутрь новой
подсистемы.</p>

<div class="pic"><div class="container" id="pic1">
<img src="../img/CreateSubSys1.png" width="777" height="419" alt="Окно корневой подсистемы схемы" />
<p id="light_pic1">Рис.&nbsp;192. Окно корневой подсистемы схемы</p>
</div></div>


<p>Сначала создадим в корневой подсистеме новую пустую подсистему. Для этого где-нибудь
на свободном месте рабочего поля окна (не важно, где &ndash; потом мы сможем переместить
созданную подсистему) нажмем правую кнопку мыши и выберем в контекстном меню пункт
&laquo;<span class="menu">создать | новая подсистема</span>&raquo;
(<a href="#pic2_0" title="Создание новой пустой подсистемы: выбор пункта контекстного меню (а) и созданная подсистема (б)">рис.&nbsp;193&nbsp;а</a>).
На рабочем поле появится выделенный блок созданной пустой подсистемы. Он автоматически
получит имя &laquo;<span class="rdsvar">Sys1</span>&raquo;, поскольку в корневой подсистеме схемы еще не
было подсистемы с таким именем (если бы она была, число после
&laquo;<span class="rdsvar">Sys</span>&raquo; в названии блока было бы выбрано так, чтобы имя созданной подсистемы
было уникальным). Пока мы видим только блок подсистемы на рабочем поле, ее окно еще
не открыто.</p>

<div class="pic"><div class="container" id="pic2">
<div class="multi" id="pic2_0"><img src="../img/CreateSubSys2.png" width="548" height="269" alt="Создание новой пустой подсистемы: выбор пункта контекстного меню (а) и созданная подсистема (б) 1" /><p id="light_pic2_0">(а)</p></div><div class="multi" id="pic2_1"><img src="../img/CreateSubSys2a.png" width="223" height="269" alt="Создание новой пустой подсистемы: выбор пункта контекстного меню (а) и созданная подсистема (б) 2" /><p id="light_pic2_1">(б)</p></div><p id="light_pic2">Рис.&nbsp;193. Создание новой пустой подсистемы: выбор пункта контекстного меню (а)<br />и созданная подсистема (б)</p>
</div></div>


<p>Выделим в корневой подсистеме три блока, которые мы будем перемещать во вложенную.
Проще всего
<a href="um_2_6.htm#ref2" title="Выделение прямоугольной области">выделить их рамкой</a>
вместе с частью связей, которые тоже понадобятся нам внутри вложенной подсистемы
&ndash; для этого нажмем левую кнопку мыши в левом верхнем углу выделяемой прямоугольной
области, не отпуская кнопку, переместим курсор в правый нижний угол области и отпустим
кнопку
(<a href="#pic3_0" title="Выделение блоков и связей рамкой (а), выделенные объекты (б)">рис.&nbsp;194&nbsp;а</a>).
Постараемся, чтобы в выделяемую область кроме блоков попали также связи, подключенные к
входам &laquo;<span class="rdsvar">x</span>&raquo; и &laquo;<span class="rdsvar">K</span>&raquo; интегратора
&laquo;<span class="rdsvar">Int1</span>&raquo; и блока умножения &laquo;<span class="rdsvar">K</span>&raquo; &ndash; так нам не
нужно будет рисовать их заново внутри вложенной подсистемы. После отпускания кнопки
мыши на рабочем поле должны оказаться выделенными блоки и связи, которые мы переместим в
подсистему
(<a href="#pic3_1" title="Выделение блоков и связей рамкой (а), выделенные объекты (б)">рис.&nbsp;194&nbsp;б</a>).
Поля ввода сверху и снизу и блок вычитания слева не должны быть выделены &ndash;
они остаются в корневой подсистеме.</p>

<div class="pic"><div class="container" id="pic3">
<div class="multi" id="pic3_0"><img src="../img/CreateSubSys3_1.png" width="406" height="297" alt="Выделение блоков и связей рамкой (а), выделенные объекты (б) 1" /><p id="light_pic3_0">(а)</p></div><div class="multi" id="pic3_1"><img src="../img/CreateSubSys3_2.png" width="313" height="297" alt="Выделение блоков и связей рамкой (а), выделенные объекты (б) 2" /><p id="light_pic3_1">(б)</p></div><p id="light_pic3">Рис.&nbsp;194. Выделение блоков и связей рамкой (а), выделенные объекты (б)</p>
</div></div>


<p>Вырежем выделенные объекты в буфер обмена, нажав
<span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">X</span> &ndash; они исчезнут из схемы
(<a href="#pic4" title="Схема с вырезанными блоками">рис.&nbsp;195</a>).
Если блоки и связи были выделены так, как изображено на
<a href="#pic3" title="Выделение блоков и связей рамкой (а), выделенные объекты (б)">рис.&nbsp;194</a>, то поля ввода над и под ними
окажутся ни с чем не соединенными, а связь, ведущая ко входу
&laquo;<span class="rdsvar">x</span>&raquo; колебательного звена &laquo;<span class="rdsvar">w13dyn1</span>&raquo;, повиснет в воздухе.
Позже мы восстановим соединения, подключив поля ввода, блок вычитания и колебательное
звено к созданной подсистеме, но пока это невозможно &ndash; у подсистемы еще нет
внешних входов и выходов.</p>

<div class="pic"><div class="container" id="pic4">
<img src="../img/CreateSubSys4.png" width="740" height="294" alt="Схема с вырезанными блоками" />
<p id="light_pic4">Рис.&nbsp;195. Схема с вырезанными блоками</p>
</div></div>


<p>Для того, чтобы вставить вырезанные блоки в новую подсистему, нужно сначала
открыть ее окно. Для этого дважды щелкнем левой кнопкой мыши на блоке
&laquo;<span class="rdsvar">Sys1</span>&raquo;, и окно созданной ранее подсистемы откроется поверх окна
корневой
(<a href="#pic5" title="Открытое окно созданной подсистемы Sys1">рис.&nbsp;196</a>).
Для наших целей это окно слишком большое, и его размер можно, при желании, уменьшить.</p>

<div class="pic"><div class="container" id="pic5">
<img src="../img/CreateSubSys5.png" width="776" height="431" alt="Открытое окно созданной подсистемы Sys1" />
<p id="light_pic5">Рис.&nbsp;196. Открытое окно созданной подсистемы &laquo;<span class="rdsvar">Sys1</span>&raquo;</p>
</div></div>


<p>Вырезанные нам из корневой подсистемы блоки все еще находятся в буфере обмена
&ndash; вставим их в окно новой подсистемы. Для этого сначала необходимо сделать
так, чтобы окно подсистемы, в которое мы будем вставлять блоки, оказалось на
переднем плане. Если мы только что его открыли, оно и так уже на переднем плане,
то есть перекрывает все остальные окна RDS. Если же после открытия на передний
план вызывалось другое окно, вызвать нужное можно выбрав в пункте
&laquo;<span class="menu">окна</span>&raquo;
<a href="um_2_1.htm" title="&sect;2.1. Главное окно и главное меню">главного меню RDS</a>
пункт &laquo;<span class="menu">Sys1</span>&raquo;, нажав одноименную кнопку на панели списка открытых окон,
или просто щелкнув левой кнопкой мыши по любой видимой части нужного нам окна. Теперь,
чтобы вставить блоки из буфера обмена, можно просто нажать
<span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">V</span> &ndash; в этом случае блоки появятся на рабочем поле новой
подсистемы по тем же координатам, по которым они находились в момент копирования в
буфер обмена. Если же мы хотим точно указать место вставки, можно щелкнуть правой
кнопкой мыши в точке, в которой должен размещаться левый верхний угол вставляемого
набора блоков, а затем выбрать в контекстном меню пункт
&laquo;<span class="menu">вставить</span>&raquo;
(<a href="#pic6_0" title="Вставка блоков из буфера обмена в выбранной точке (а), выделенные вставленные блоки (б)">рис.&nbsp;197&nbsp;а</a>).</p>

<div class="pic"><div class="container" id="pic6">
<div class="multi" id="pic6_0"><img src="../img/CreateSubSys6_1.png" width="511" height="424" alt="Вставка блоков из буфера обмена в выбранной точке (а), выделенные вставленные блоки (б) 1" /><p id="light_pic6_0">(а)</p></div><div class="multi" id="pic6_1"><img src="../img/CreateSubSys6_2.png" width="221" height="424" alt="Вставка блоков из буфера обмена в выбранной точке (а), выделенные вставленные блоки (б) 2" /><p id="light_pic6_1">(б)</p></div><p id="light_pic6">Рис.&nbsp;197. Вставка блоков из буфера обмена в выбранной точке (а),<br />выделенные вставленные блоки (б)</p>
</div></div>


<p>Независимо от того, каким именно способом блоки и связи из буфера обмена были
вставлены в окно новой подсистемы, они появятся на ее рабочем поле и
станут выделенными
(<a href="#pic6_1" title="Вставка блоков из буфера обмена в выбранной точке (а), выделенные вставленные блоки (б)">рис.&nbsp;197&nbsp;б</a>).
Концы связей, соединявших блоки, помещенные нами в буфер, с блоками, оставшимися в
корневой подсистеме, повисли в воздухе &ndash; нам нужно будет соединить их с
внешними входами, которые мы сейчас добавим в подсистему.</p>


<p><span id="ref2">Создадим</span> сначала
<span id="light_ref2">внешний вход</span> для разветвленной связи, подключенной к
входам &laquo;<span class="rdsvar">x</span>&raquo; блоков
&laquo;<span class="rdsvar">Int1</span>&raquo; и &laquo;<span class="rdsvar">K</span>&raquo;. Для этого щелкнем правой кнопкой мыши
где-нибудь недалеко от висящего в воздухе конца этой связи и выберем в контекстном
меню пункт &laquo;<span class="menu">создать | внешний вход</span>&raquo;
(<a href="#pic7_0" title="Создание внешнего входа: выбор пункта контекстного меню (а) и созданный вход (б)">рис.&nbsp;198&nbsp;а</a>).
На рабочем поле появится созданный блок-вход с именем &laquo;<span class="rdsvar">Input1</span>&raquo;
(<a href="#pic7_1" title="Создание внешнего входа: выбор пункта контекстного меню (а) и созданный вход (б)">рис.&nbsp;198&nbsp;б</a>).
Имя его переменной и ее тип будут установлены по умолчанию: переменная, как и
блок, называется &laquo;<span class="rdsvar">Input1</span>&raquo;, а ее тип &ndash; вещественный с
двойной точностью (&laquo;double&raquo;). Тип переменной нам подходит &ndash;
по связи, к которой мы будем подключать вход, передается вещественное значение
(по смыслу данной схемы &ndash; сигнал ошибки следящей системы). Нам нужно только
дать переменной внешнего входа имя, более соответствующее назначению связи,
чем абстрактное &laquo;<span class="rdsvar">Input1</span>&raquo;:  например, &laquo;<span class="rdsvar">e</span>&raquo; &ndash;
принятое в теории управления обозначение сигнала ошибки.</p>

<div class="pic"><div class="container" id="pic7">
<div class="multi" id="pic7_0"><img src="../img/CreateSubSys7_1.png" width="464" height="325" alt="Создание внешнего входа: выбор пункта контекстного меню (а) и созданный вход (б) 1" /><p id="light_pic7_0">(а)</p></div><div class="multi" id="pic7_1"><img src="../img/CreateSubSys7_2.png" width="192" height="194" alt="Создание внешнего входа: выбор пункта контекстного меню (а) и созданный вход (б) 2" /><p id="light_pic7_1">(б)</p></div><p id="light_pic7">Рис.&nbsp;198. Создание внешнего входа: выбор пункта контекстного меню (а) и созданный вход (б)</p>
</div></div>


<p><span id="ref3">Откроем</span>
<span id="light_ref3">окно параметров созданного внешнего входа</span>, дважды щелкнув
на нем левой кнопкой мыши. Это окно
(<a href="#pic8" title="Окно параметров внешнего входа (окно параметров внешнего выхода выглядит точно так же)">рис.&nbsp;199</a>)
напоминает <a href="um_2_9_1.htm#ref2" title="окно параметров простого блока">окно параметров простого блока</a>
&ndash; вкладки
&laquo;<span class="menu"><a href="um_2_9_1.htm#pic5" title="Вкладка внешний вид окна параметров простого блока при выбранном изображении картинкой (картинка отсутствует)">внешний вид</a></span>&raquo;,
&laquo;<span class="menu"><a href="um_2_9_1.htm#pic10" title="Вкладка DLL окна параметров блока">DLL</a></span>&raquo; и
&laquo;<span class="menu"><a href="um_2_9_1.htm#pic12" title="Вкладка компиляция окна параметров блока (модель не подключена)">компиляция</a></span>&raquo;
у него такие же, но вкладки
&laquo;<span class="menu">переменные</span>&raquo; и &laquo;<span class="menu">соединения</span>&raquo; отсутствуют, а вкладка
&laquo;<span class="menu">общие</span>&raquo; существенно отличается.</p>

<div class="pic"><div class="container" id="pic8">
<img src="../img/ExternalInputParams.png" width="534" height="462" alt="Окно параметров внешнего входа (окно параметров внешнего выхода выглядит точно так же)" />
<p id="light_pic8">Рис.&nbsp;199. Окно параметров внешнего входа<br />(окно параметров <a href="um_1_2.htm#light_ref14" title="Внешний выход подсистемы">внешнего выхода</a> выглядит точно так же)</p>
</div></div>


<div class="picright"><div class="container" id="pic9">
<img src="../img/CreateSubSys8.png" width="198" height="140" alt="Переименование переменной" />
<p id="light_pic9">Рис.&nbsp;200. Переименование<br />переменной</p>
</div></div>


<p>Как и для простого блока, для внешнего входа в окне параметров можно задать имя,
<a href="um_1_2.htm#ref20" title="Комментарий блока">комментарий</a> и действия, выполняемые по
<a href="um_2_9_1.htm#ref9" title="Реакция на двойной щелчок">двойному щелчку</a>
в режиме редактирования
(при отсутствии у блока
<a href="um_1_2.htm#ref3" title="Модель блока">модели</a>, а у внешних входов модели встречаются редко, по
двойному щелчку можно только открывать окно параметров). Список переменных для внешнего
входа задать нельзя &ndash; у него всегда есть только одна переменная, тип которой
задается на вкладке &laquo;<span class="menu">общие</span>&raquo; (именно поэтому вкладка
&laquo;<span class="menu">переменные</span>&raquo; у него отсутствует). Для переменной на панели
&laquo;<span class="menu">переменная</span>&raquo; вводится имя и из выпадающего списка выбирается
<a href="um_1_4.htm#ref1" title="Типы переменных блока">тип</a>
&ndash; нам необходимо ввести имя &laquo;<span class="rdsvar">e</span>&raquo;, а нужный нам тип
&laquo;double&raquo; уже установлен
(<a href="#pic9" title="Переименование переменной">рис.&nbsp;200</a>).
После ввода имени переменной имя блока тоже автоматически заменится на
&laquo;<span class="rdsvar">e</span>&raquo; &ndash; нас это устраивает, поскольку в схеме сразу будет
видно, какой переменной подсистемы соответствует этот блок. При желании, имя блока
можно изменить на другое, это не приведет к автоматическому переименованию
переменной. Можно также ввести
<a href="um_2_9_2.htm#ref1" title="Комментарий переменной">произвольный комментарий</a>, поясняющий назначение
этого внешнего входа, отделив его от имени переменной пробелом &ndash; этот комментарий
будет показан в меню подключения связи вместе с именем переменной.</p>

<p>Можно заметить, что под выпадающим списком типа на панели &laquo;<span class="menu">переменная</span>&raquo;
много свободного места. Дело в том, что при выборе в списке типов пункта
&laquo;массив&raquo; или &laquo;матрица&raquo;, под ним появится еще один
выпадающий список, в котором нужно выбрать тип элемента массива или матрицы. Если в
этом списке тоже выбрать пункт &laquo;матрица&raquo;, под ним появится еще один
список (получится матрица матриц заданных типов) и т.д. &ndash; точно так же
<a href="um_2_8.htm#pic6_1" title="Окно добавления канала при задании простого типа переменной (а) и матрицы (б)">задается тип канала</a>
в шине.</p>

<p>Прежде чем закрывать окно параметров внешнего входа, скажем несколько слов про
его вкладки &laquo;<span class="menu">внешний вид</span>&raquo;, &laquo;<span class="menu">DLL</span>&raquo; и
&laquo;<span class="menu">компиляция</span>&raquo;, которые у внешних входов, выходов и
<a href="um_1_2.htm#light_ref15" title="Ввод шины">вводов шин</a>
(о них идет речь в <a href="um_2_11_3.htm" title="&sect;2.11.3. Ввод шин в подсистему">&sect;2.11.3</a>) используются достаточно
редко. Эти вкладки полностью аналогичны одноименным вкладкам окна параметров простого
блока (см. <a href="um_2_9_1.htm" title="&sect;2.9.1. Создание простого блока и окно его параметров">&sect;2.9.1</a>). На вкладке
&laquo;<span class="menu">внешний вид</span>&raquo; можно задать
<a href="um_1_2.htm#light_ref21" title="Варианты внешнего вида блока">способ отображения</a> блока-входа в подсистеме
при помощи векторной картинки, прямоугольника с текстом или программного рисования,
если у блока есть модель. Чаще всего вид внешних входов и выходов не меняют, оставляя
включенное по умолчанию задание векторной картинкой без задания самой картинки
&ndash; блок при этом изображается стандартной иконкой RDS, которая сама по
себе достаточно информативна. Функцию модели (не важно &ndash;
<a href="um_1_8.htm" title="&sect;1.8. Автоматическая компиляция моделей блоков">автокомпилируемую</a>
или нет) с внешними входами и выходами тоже чаще всего не связывают:
&ndash; эта модель не сможет вмешаться в передачу данных через блок, поэтому
она может применяться только для каких-либо редко используемых действий, например,
при анализе графа схемы программными средствами. Нам ничего этого не нужно,
поэтому мы не будем ничего менять на вкладках
&laquo;<span class="menu">внешний вид</span>&raquo;, &laquo;<span class="menu">DLL</span>&raquo; и &laquo;<span class="menu">компиляция</span>&raquo;, и
просто закроем окно параметров кнопкой &laquo;<span class="menu">OK</span>&raquo;.</p>

<p>Теперь с внешним входом связана переменная правильного типа с правильными
именем. В самом блоке-входе эта переменная будет выходом &ndash; вход вводит данные
в подсистему, и для всех внутренних блоков переменная будет источником данных, то
есть выходом. В блоке подсистемы при этом автоматически создан вход с тем же
именем &ndash; для всех внешних блоков эта переменная будет получателем данных.
Внутри подсистемы мы должны присоединить к созданному входу уже имеющуюся там
разветвленную связь, соединив входы блоков &laquo;<span class="rdsvar">Int1</span>&raquo; и
&laquo;<span class="rdsvar">K</span>&raquo; с этим входом. Проще всего это сделать, перетащив висящий в
воздухе конечный узел связи на изображение блока-входа
(<a href="#pic10_0" title="Присоединение связи к внешнему входу: перетаскивание конечного узла связи на блок (а), указание переменной (б), готовая связь (в)">рис.&nbsp;201&nbsp;а</a>).</p>

<div class="pic"><div class="container" id="pic10">
<div class="multi" id="pic10_0"><img src="../img/CreateSubSys9_1.png" width="168" height="188" alt="Присоединение связи к внешнему входу: перетаскивание конечного узла связи на блок (а), указание переменной (б), готовая связь (в) 1" /><p id="light_pic10_0">(а)</p></div><div class="multi" id="pic10_1"><img src="../img/CreateSubSys9_2.png" width="168" height="188" alt="Присоединение связи к внешнему входу: перетаскивание конечного узла связи на блок (а), указание переменной (б), готовая связь (в) 2" /><p id="light_pic10_1">(б)</p></div><div class="multi" id="pic10_2"><img src="../img/CreateSubSys9_3.png" width="168" height="188" alt="Присоединение связи к внешнему входу: перетаскивание конечного узла связи на блок (а), указание переменной (б), готовая связь (в) 3" /><p id="light_pic10_2">(в)</p></div><p id="light_pic10">Рис.&nbsp;201. Присоединение связи к внешнему входу: перетаскивание конечного узла связи<br />на блок (а), указание переменной (б), готовая связь (в)</p>
</div></div>


<p>Для перетаскивания узла нужно нажать на нем левую кнопку мыши и, не отпуская ее,
переместить этот узел внутрь внешнего входа
(см. <a href="um_2_7_1.htm" title="&sect;2.7.1. Общие принципы создания связей">&sect;2.7.1</a>). После отпускания кнопки мыши
появится меню (<a href="#pic10_1" title="Присоединение связи к внешнему входу: перетаскивание конечного узла связи на блок (а), указание переменной (б), готовая связь (в)">рис.&nbsp;201&nbsp;б</a>), в котором
для обычного блока можно было бы выбрать соединяемую переменную. У внешнего входа
переменная всегда единственная, поэтому в этом меню будет единственный пункт:
&laquo;<span class="rdsvar">e</span>&raquo;. Фактически, у внешнего входа в этом меню нечего выбирать,
оно служит только для подтверждения соединения (если закрыть меню, щелкнув мимо него,
соединение выполнено не будет) и для показа имени переменной (оно может не
соответствовать имени блока). После выбора имени переменной в меню связь подключится
к внешнему входу
(<a href="#pic10_2" title="Присоединение связи к внешнему входу: перетаскивание конечного узла связи на блок (а), указание переменной (б), готовая связь (в)">рис.&nbsp;201&nbsp;в</a>).</p>

<p>Теперь нужно создать еще два внешних входа для ввода в подсистему значений с полей
ввода, которые были подключены к входам с одинаковыми именами &laquo;<span class="rdsvar">K</span>&raquo; блоков
&laquo;<span class="rdsvar">Int1</span>&raquo; и &laquo;<span class="rdsvar">K</span>&raquo;
(см. <a href="#pic1" title="Окно корневой подсистемы схемы">рис.&nbsp;192</a>). Назовем эти входы
&laquo;<span class="rdsvar">Ki</span>&raquo; для блока &laquo;<span class="rdsvar">Int1</span>&raquo; и &laquo;<span class="rdsvar">Kp</span>&raquo; для блока
&laquo;<span class="rdsvar">K</span>&raquo;. Можно повторить все описанные выше действия (создать внешний
вход, открыть окно его параметров, задать нужное имя переменной и оставить
установленный по умолчанию тип &laquo;double&raquo;), а можно просто размножить уже
созданный внешний вход, скопировав его в буфер обмена нажатием
<span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">C</span> и два раза вставив нажатием
<span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">V</span>, и изменить в окнах параметров блоков-копий имена переменных.
Затем необходимо подключить к созданным внешним входам связи, присоединенные ко входам
&laquo;<span class="rdsvar">K</span>&raquo; блоков &laquo;<span class="rdsvar">Int1</span>&raquo; и &laquo;<span class="rdsvar">K</span>&raquo;: можно, как
и в первом случае, перетащить их конечные узлы на изображения внешних входов, а
можно дорисовать их от точки обрыва, нажав на висящем в воздухе узле левую кнопку мыши при
нажатой клавише <span class="keys">Ctrl</span>, а затем продолжив рисование связи до
внешнего входа обычным образом
(<a href="#pic11" title="Продолжение связи до соединения с внешним входом: Ctrl +щелчок на конечном узле (а), щелчок на внешнем входе (б), указание переменной (в), готовая связь (г)">рис.&nbsp;202</a>).</p>

<div class="pic"><div class="container" id="pic11">
<div class="multi" id="pic11_0"><img src="../img/CreateSubSys10_1.png" width="175" height="247" alt="Продолжение связи до соединения с внешним входом: Ctrl +щелчок на конечном узле (а), щелчок на внешнем входе (б), указание переменной (в), готовая связь (г) 1" /><p id="light_pic11_0">(а)</p></div><div class="multi" id="pic11_1"><img src="../img/CreateSubSys10_2.png" width="172" height="247" alt="Продолжение связи до соединения с внешним входом: Ctrl +щелчок на конечном узле (а), щелчок на внешнем входе (б), указание переменной (в), готовая связь (г) 2" /><p id="light_pic11_1">(б)</p></div><div class="multi" id="pic11_2"><img src="../img/CreateSubSys10_3.png" width="173" height="247" alt="Продолжение связи до соединения с внешним входом: Ctrl +щелчок на конечном узле (а), щелчок на внешнем входе (б), указание переменной (в), готовая связь (г) 3" /><p id="light_pic11_2">(в)</p></div><div class="multi" id="pic11_3"><img src="../img/CreateSubSys10_4.png" width="173" height="247" alt="Продолжение связи до соединения с внешним входом: Ctrl +щелчок на конечном узле (а), щелчок на внешнем входе (б), указание переменной (в), готовая связь (г) 4" /><p id="light_pic11_3">(г)</p></div><p id="light_pic11">Рис.&nbsp;202. Продолжение связи до соединения с внешним входом: <span class="keys">Ctrl</span>+щелчок на конечном узле (а), щелчок на внешнем входе (б), указание переменной (в), готовая связь (г)</p>
</div></div>


<div class="picright"><div class="container" id="pic12">
<img src="../img/CreateSubSys10_5.png" width="173" height="247" alt="Все входы соединены" />
<p id="light_pic12">Рис.&nbsp;203. Все входы<br />соединены</p>
</div></div>


<p>Теперь все три внешних входа присоединены к блокам внутри подсистемы
(<a href="#pic12" title="Все входы соединены">рис.&nbsp;203</a>).
<span id="ref4">Нужно</span> создать
<a href="um_1_2.htm#light_ref14" title="Внешний выход подсистемы">внешний выход</a>
и соединить его связью с выходом &laquo;<span class="rdsvar">y</span>&raquo; сумматора (круглого
перечеркнутого блока в правой части схемы). Внешний выход создается практически так
же, как и внешний вход. Следует щелкнуть правой кнопкой мыши где-нибудь правее
сумматора
(<a href="#pic13_0" title="Создание внешнего выхода: выбор пункта меню (а) и созданный блок-выход (б)">рис.&nbsp;204&nbsp;а</a>)
и выбрать в контекстном меню пункт
&laquo;<span class="menu">создать | внешний выход</span>&raquo; &ndash; на рабочем поле появится новый
блок-выход с именем &laquo;<span class="rdsvar">Output1</span>&raquo;
(<a href="#pic13_1" title="Создание внешнего выхода: выбор пункта меню (а) и созданный блок-выход (б)">рис.&nbsp;204&nbsp;б</a>).
Как и у создаваемых внешних входов, переменная у созданного выхода по умолчанию имеет тип
&laquo;double&raquo; &ndash; нам это подходит. Нам необходимо дать переменной более
подходящее имя: назовем ее &laquo;<span class="rdsvar">u</span>&raquo; (стандартное обозначение сигнала
управления). Для этого следует двойным щелчком левой кнопки мыши на изображении
созданного внешнего выхода открыть его окно параметров (оно
<a href="#pic8" title="Окно параметров внешнего входа (окно параметров внешнего выхода выглядит точно так же)">точно такое же</a>,
как и у внешнего входа) и ввести на вкладке
&laquo;<span class="menu">общие</span>&raquo; имя переменной &laquo;<span class="rdsvar">u</span>&raquo; (имя блока при этом тоже
автоматически изменится на &laquo;<span class="rdsvar">u</span>&raquo;), после чего закрыть окно кнопкой
&laquo;<span class="menu">OK</span>&raquo;.</p>

<p>Созданный таким образом блок-выход будет иметь единственную переменную
&laquo;<span class="rdsvar">u</span>&raquo;, и она будет являться его входом &ndash; блок предназначен для
передачи данных из подсистемы наружу, поэтому внутри подсистемы его переменная будет
получателем данных. В блоке самой подсистемы переменная &laquo;<span class="rdsvar">u</span>&raquo; будет,
наоборот, выходом &ndash; к ней будут подключаться внешние блоки, получающие данные из
подсистемы. Мы создали внешний выход, чтобы вывести наружу данные с сумматора, поэтому
выход сумматора &laquo;<span class="rdsvar">y</span>&raquo; необходимо соединить связью с переменной внешнего
выхода &laquo;<span class="rdsvar">u</span>&raquo;.</p>

<div class="pic"><div class="container" id="pic13">
<div class="multi" id="pic13_0"><img src="../img/CreateSubSys11_1.png" width="513" height="299" alt="Создание внешнего выхода: выбор пункта меню (а) и созданный блок-выход (б) 1" /><p id="light_pic13_0">(а)</p></div><div class="multi" id="pic13_1"><img src="../img/CreateSubSys11_2.png" width="140" height="158" alt="Создание внешнего выхода: выбор пункта меню (а) и созданный блок-выход (б) 2" /><p id="light_pic13_1">(б)</p></div><p id="light_pic13">Рис.&nbsp;204. Создание внешнего выхода: выбор пункта меню (а)<br />и созданный блок-выход (б)</p>
</div></div>


<div class="picright"><div class="container" id="pic14">
<img src="../img/CreateSubSys12.png" width="348" height="360" alt="Создание подсистемы завершено" />
<p id="light_pic14">Рис.&nbsp;205. Создание подсистемы завершено</p>
</div></div>


<p>На этом редактирование вложенной подсистемы завершено &ndash; если все было сделано
правильно, ее окно должно быть похожим на
<a href="#pic14" title="Создание подсистемы завершено">рис.&nbsp;205</a>.
Теперь можно вернуться к редактированию корневой подсистемы, в которой необходимо
присоединить созданную подсистему к остальным блокам. Окно вложенной подсистемы при
этом можно закрыть, а можно не закрывать, а просто вызвать на передний план окно
корневой подсистемы щелчком по любой его точке.</p>

<p>Чтобы восстановить соединения, которые были в схеме до того, как мы выделили три ее
блока в отдельную подсистему
(см. <a href="#pic1" title="Окно корневой подсистемы схемы">рис.&nbsp;192</a>), необходимо присоединить выход
&laquo;<span class="rdsvar">y</span>&raquo; блока вычитания (круглый блок с закрашенным нижним сектором) ко
входу &laquo;<span class="rdsvar">e</span>&raquo; созданной подсистемы, выходы верхнего и нижнего полей ввода
&ndash; к ее входам &laquo;<span class="rdsvar">Ki</span>&raquo; и &laquo;<span class="rdsvar">Kp</span>&raquo; соответственно, а выход
подсистемы &laquo;<span class="rdsvar">u</span>&raquo; соединить с входом &laquo;<span class="rdsvar">x</span>&raquo; колебательного звена
&laquo;<span class="rdsvar">w13dyn1</span>&raquo;. Но сначала, чтобы было удобнее проводить соединения, следует
перетащить блок созданной нами подсистемы &laquo;<span class="rdsvar">Sys1</span>&raquo; в центр пустого места,
оставшегося от вырезанных блоков. Подключение подсистемы к блокам схемы производится точно
так же, как и подключение любого другого блока: все процедуры создания связей подробно
описываются в <a href="um_2_7_1.htm" title="&sect;2.7.1. Общие принципы создания связей">&sect;2.7.1</a>. После проведения всех необходимых
связей окно корневой подсистемы будет выглядеть так, как
на <a href="#pic15" title="Корневая подсистема после проведения всех связей">рис.&nbsp;206</a>.
Можно заметить, что имя подсистемы &laquo;<span class="rdsvar">Sys1</span>&raquo;, отображаемое под ее квадратной
иконкой, перекрывает имя переменной &laquo;<span class="rdsvar">Kp</span>&raquo; рядом со стрелкой подходящей
снизу связи. При желании, это можно исправить, либо отключив отображение имени подсистемы
(для этого нужно вызвать ее контекстное меню и убрать флажок рядом с пунктом
&laquo;<span class="menu">показывать имя блока</span>&raquo;), либо
<a href="um_2_7_2.htm#pic14" title="Последовательность перемещения имени переменной">перетащив имя переменной</a>
&laquo;<span class="rdsvar">Kp</span>&raquo; чуть дальше от стрелки.</p>

<div class="pic"><div class="container" id="pic15">
<img src="../img/CreateSubSys13.png" width="776" height="406" alt="Корневая подсистема после проведения всех связей" />
<p id="light_pic15">Рис.&nbsp;206. Корневая подсистема после проведения всех связей</p>
</div></div>


<p>Если теперь <a href="um_2_2.htm#light_ref8" title="Пример запуска расчета">запустить расчет</a>
в этой схеме, то можно будет увидеть, что график выхода следящей системы в точности
совпадает с графиком на
<a href="um_2_2.htm#pic3" title="Окно подсистемы после завершения расчета">рис.&nbsp;21</a>:
помещение части блоков в подсистему никак не повлияло на работу схемы.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_11_1.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_11_3.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_11_2">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
