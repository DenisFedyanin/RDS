<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.11.3. Ввод шин в подсистему</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_11">&sect;2.11. Использование подсистем</a></p>
<div class="level"><p>&sect;2.11.3. Ввод шин в подсистему</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_11_2.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_11_4.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_11_3">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3 class="off">&sect;2.11. Использование подсистем</h3>
<h4>&sect;2.11.3. Ввод шин в подсистему</h4>
<p class="abstract">Описывается ввод шин внутрь подсистем и вывод их наружу при помощи специальных блоков &ndash; вводов шин.</p>


<p>Работа с шинами подробно рассматривается в
<a href="um_2_8.htm" title="&sect;2.8. Использование шин">&sect;2.8</a>. Коротко напомним, что шины позволяют сделать
схему, содержащую большое количество длинных разветвленных связей, более удобной для
работы. Каждая шина изображается одной линией, заключающей внутри себя произвольное
количество независимых каналов передачи данных. Вместо того, чтобы тянуть многочисленные
связи между блоками через всю подсистему, можно, например, создать единственную шину,
проходящую рядом со всеми блоками, и соединить блоки с ее каналами короткими связями
&ndash; такую схему будет гораздо проще читать.</p>

<div class="picright"><div class="container">
<img src="../img/BusPort.png" width="297" height="334" alt="Ввод шины в подсистему" />
<p>Рис.&nbsp;4 (<a href="um_1_2.htm#pic3">повтор</a>). Ввод шины в подсистему</p>
</div></div>


<p>При наличии в схеме вложенных подсистем, шины, как и связи, можно вводить внутрь
них и выводить наружу.
<span id="ref1">Точнее</span>, можно соединять между собой шины внутри подсистемы с
шинами снаружи нее через специальные блоки &ndash;
<span id="light_ref1"><a href="um_1_2.htm#light_ref15" title="Ввод шины">вводы шин</a></span>. Это может быть
удобно, если внутрь подсистемы идет множество связей: вместо того, чтобы создавать
многочисленные внешние входы и выходы для соединения этой подсистемы с остальной схемой,
можно ввести внутрь подсистемы единственную шину и подключать блоки внутри и снаружи
подсистемы к каналам этой шины.</p>

<p>Пример ввода шины в подсистему уже приводился ранее на
<a href="um_1_2.htm#pic3" title="Ввод шины в подсистему">рис.&nbsp;4</a> (здесь он повторен). На рисунке изображена
подсистема &laquo;<span class="rdsvar">Sys2</span>&raquo;, внутри которой находится шина, соединенная с вводом
&laquo;<span class="rdsvar">Port1</span>&raquo;. К входу канала &laquo;<span class="rdsvar">Gamma</span>&raquo; этой шины подключено поле
ввода, а к выходам каналов &laquo;<span class="rdsvar">Alpha</span>&raquo; и &laquo;<span class="rdsvar">Beta</span>&raquo; &ndash;
индикаторы. Снаружи (в верхней части рисунка) к подсистеме через этот же ввод шины
подключена другая шина, к входам каналов &laquo;<span class="rdsvar">Alpha</span>&raquo; и
&laquo;<span class="rdsvar">Beta</span>&raquo; которой подключены поля ввода, а к выходу канала
&laquo;<span class="rdsvar">Gamma</span>&raquo; &ndash; индикатор. В результате такого соединения обе шины будут
иметь один и тот же набор каналов: &laquo;<span class="rdsvar">Alpha</span>&raquo;, &laquo;<span class="rdsvar">Beta</span>&raquo; и
&laquo;<span class="rdsvar">Gamma</span>&raquo;, и при изменении значений в полях ввода снаружи подсистемы эти
значения будут передаваться на индикаторы внутри нее, а при изменении значения в поле
ввода внутри &ndash; на индикатор снаружи.</p>

<p>Шины, соединенные через вводы, всегда имеют одинаковый набор каналов: при добавлении,
удалении или редактировании канала в одной из них эти изменения автоматически
распространяются на все соединенные шины. Шины не обязательно соединяются парами:
одна шина может соединяться сразу с несколькими вводами, и, таким образом, сеть
соединенных шин может покрывать множество подсистем. Например, все шины, изображенные
на <a href="#pic2" title="Множество соединенных шин">рис.&nbsp;207</a>,
соединены между собой.</p>

<div class="pic"><div class="container" id="pic2">
<img src="../img/ConnectedBuses.png" width="507" height="313" alt="Множество соединенных шин" />
<p id="light_pic2">Рис.&nbsp;207. Множество соединенных шин</p>
</div></div>


<p>Если шина соединена с другими шинами, на вкладке
&laquo;<span class="menu"><a href="um_2_8.htm#pic5_0" title="Вкладки имя и каналы (а) и соединения (б) окна параметров типичной шины">имя и каналы</a></span>&raquo;
окна ее параметров в колонках &laquo;<span class="menu">входы</span>&raquo; и &laquo;<span class="menu">выходы</span>&raquo; будет
отображаться не только число связей, присоединенных к каждому каналу этой конкретной
шины в ее
<a href="um_1_2.htm#ref13" title="Родительская подсистема">родительской подсистеме</a>, но и, через дробь, число
связей, присоединенных к одноименному каналу соединенных шин в других подсистемах
(<a href="#pic3" title="Окно параметров одной из соединенных шин">рис.&nbsp;208</a>).
По наличию числа после дроби можно узнать, что этот канал используется в других
подсистемах и, даже если в этой шине к нему ничего не подключено, удалять
его нельзя.</p>

<div class="pic"><div class="container" id="pic3">
<img src="../img/BusParams_connected.png" width="439" height="308" alt="Окно параметров одной из соединенных шин" />
<p id="light_pic3">Рис.&nbsp;208. Окно параметров одной из соединенных шин</p>
</div></div>


<p>Ввести шину в подсистему можно двумя способами: можно сначала создать внутри
подсистемы ввод шины, а затем соединить с ним шины внутри и снаружи подсистемы,
или можно в процессе рисования шины дотянуть ее до подсистемы и скомандовать
RDS создать внутри подсистемы ввод, соединенный с этой шиной. Сначала рассмотрим
первый способ.</p>

<p>Чтобы создать ввод шины, нужно нажать правую кнопку мыши в том месте рабочего поля
окна подсистемы, где он должен появиться, и выбрать в контекстном меню пункт
&laquo;<span class="menu">создать | ввод шины</span>&raquo;
(<a href="#pic4" title="Создание ввода шины: вызов контекстного меню (а) и созданный ввод (б)">рис.&nbsp;209</a>).</p>

<div class="pic"><div class="container" id="pic4">
<div class="multi" id="pic4_0"><img src="../img/CreatePort1.png" width="454" height="303" alt="Создание ввода шины: вызов контекстного меню (а) и созданный ввод (б) 1" /><p id="light_pic4_0">(а)</p></div><div class="multi" id="pic4_1"><img src="../img/CreatePort2.png" width="57" height="87" alt="Создание ввода шины: вызов контекстного меню (а) и созданный ввод (б) 2" /><p id="light_pic4_1">(б)</p></div><p id="light_pic4">Рис.&nbsp;209. Создание ввода шины: вызов контекстного меню (а)<br />и созданный ввод (б)</p>
</div></div>


<p>Созданному вводу будет присвоено имя вида &laquo;<span class="rdsvar">Port<i>N</i></span>&raquo;, где
<i>N</i> &ndash; число, автоматически выбранное так, чтобы это имя было уникальным в
подсистеме. Ввод шины &ndash; это тоже блок, поэтому его имя не может совпадать с
именем какого-либо другого блока в этой подсистеме.
<span id="ref2">Имя</span>
ввода можно изменить в
<span id="light_ref2">окне его параметров</span>, открывающемся по двойному щелчку.
Это окно очень похоже на
<a href="um_2_11_2.htm#pic8" title="Окно параметров внешнего входа (окно параметров внешнего выхода выглядит точно так же)">окна параметров внешних входов и выходов</a>,
за исключением того, что, в отличие от входов и выходов, в параметрах ввода шины не
задается переменная: он служит для подключения к подсистеме всей шины целиком, а не
какой-либо отдельной переменной с заданными именем и типом. К вводу можно
подключать шины внутри подсистемы точно так же, как связи подключаются к блокам:
при перетаскивании конечного узла уже нарисованной шины на изображение ввода или
при щелчке на вводе в процессе рисования шины эта шина будет подключена к этому вводу
(<a href="#pic5" title="Присоединение шины к вводу внутри подсистемы: последовательность действий (а&ndash;г)">рис.&nbsp;210</a>).</p>

<div class="pic"><div class="container" id="pic5">
<div class="multi" id="pic5_0"><img src="../img/ConnBusToPort1.png" width="121" height="163" alt="Присоединение шины к вводу внутри подсистемы: последовательность действий (а&ndash;г) 1" /><p id="light_pic5_0">(а)</p></div><div class="multi" id="pic5_1"><img src="../img/ConnBusToPort2.png" width="337" height="379" alt="Присоединение шины к вводу внутри подсистемы: последовательность действий (а&ndash;г) 2" /><p id="light_pic5_1">(б)</p></div><div class="multi" id="pic5_2"><img src="../img/ConnBusToPort3.png" width="116" height="163" alt="Присоединение шины к вводу внутри подсистемы: последовательность действий (а&ndash;г) 3" /><p id="light_pic5_2">(в)</p></div><div class="multi" id="pic5_3"><img src="../img/ConnBusToPort4.png" width="103" height="163" alt="Присоединение шины к вводу внутри подсистемы: последовательность действий (а&ndash;г) 4" /><p id="light_pic5_3">(г)</p></div><p id="light_pic5">Рис.&nbsp;210. Присоединение шины к вводу внутри подсистемы: последовательность действий (а&ndash;г)</p>
</div></div>


<p>Если внутри подсистемы еще нет шины, можно сразу начать ее от ввода, щелкнув на нем
правой кнопкой мыши и выбрав в контекстном меню пункт &laquo;<span class="menu">начать шину</span>&raquo;.</p>

<p>Присоединение наружной шины к подсистеме с этим вводом производится похожим образом:
нужно либо перетащить конечный узел шины на изображение подсистемы, либо, при рисовании
шины, дотянуть линию до изображения подсистемы и нажать левую кнопку мыши. При этом
откроется меню, в котором нужно выбрать, к какому именно вводу внутри подсистемы будет
подключена эта внешняя шина
(<a href="#pic6" title="Присоединение шины к подсистеме снаружи: последовательность действий (а&ndash;г)">рис.&nbsp;211</a>).
При желании, можно сразу начать новую шину от подсистемы, соединив ее с заданным вводом,
выбрав в ее контекстном меню пункт &laquo;<span class="menu">начать шину</span>&raquo; и указав имя этого ввода.</p>

<div class="pic"><div class="container" id="pic6">
<div class="multi" id="pic6_0"><img src="../img/ConnectBusToSys1.png" width="113" height="197" alt="Присоединение шины к подсистеме снаружи: последовательность действий (а&ndash;г) 1" /><p id="light_pic6_0">(а)</p></div><div class="multi" id="pic6_1"><img src="../img/ConnectBusToSys2.png" width="255" height="425" alt="Присоединение шины к подсистеме снаружи: последовательность действий (а&ndash;г) 2" /><p id="light_pic6_1">(б)</p></div><div class="multi" id="pic6_2"><img src="../img/ConnectBusToSys3.png" width="217" height="197" alt="Присоединение шины к подсистеме снаружи: последовательность действий (а&ndash;г) 3" /><p id="light_pic6_2">(в)</p></div><div class="multi" id="pic6_3"><img src="../img/ConnectBusToSys4.png" width="96" height="197" alt="Присоединение шины к подсистеме снаружи: последовательность действий (а&ndash;г) 4" /><p id="light_pic6_3">(г)</p></div><p id="light_pic6">Рис.&nbsp;211. Присоединение шины к подсистеме снаружи: последовательность действий (а&ndash;г)</p>
</div></div>


<p>Если необходимо ввести шину в подсистему, в которой еще не создан ввод, можно создать
его автоматически: дотянув шину до подсистемы и щелкнув на ее изображении, в появившемся
меню следует выбрать пункт &laquo;<span class="menu">новый ввод</span>&raquo;. При этом внутри подсистемы
будет создан новый ввод шины, шина будет соединена с ним, окно подсистемы
автоматически откроется, и созданный ввод шины будет в нем выделен. После этого
можно подключать к этому вводу внутренние шины или начинать шину от
него обычным образом.</p>

<p>Если в момент соединения шин в них уже были какие-либо каналы, списки их каналов
объединяются, и каждая шина получает полный объединенный список каналов. Если какие-либо
два канала в соединяемых шинах имели одинаковые имена, но разные типы, они не
объединятся: после соединения один из каналов будет переименован, и все связи,
подключенные к нему, буду автоматически перенастроены на его новое имя.</p>

<p>Соединенные шины можно в любой момент разъединить, переместив узел, которым шина
соединяется с вводом или подсистемой, за пределы их изображений, или просто удалив
этот узел. Отсоединенная шина становится полностью независимой и изменение ее
каналов уже никак не будет влиять на шины, оставшиеся соединенными. Если в момент
соединения в шину были автоматически добавлены каналы, при разъединении они не
удалятся &ndash; лишние каналы, при желании, можно удалить вручную в
<a href="um_2_8.htm#light_ref5" title="Каналы в окне параметров шины">окне параметров шины</a>.</p>

<p>На <a href="#pic7" title="Замена в подсистеме с рис.&nbsp; &lt;рисунок: img/CreateSubSys13.png&gt; связей на шины">рис.&nbsp;212</a>
изображен еще один пример соединения подсистемы с остальной схемой при помощи шины:
это схема, аналогичная схеме
на <a href="um_2_11_2.htm#pic15" title="Корневая подсистема после проведения всех связей">рис.&nbsp;206</a>,
в которой  внешние входы и выходы заменены на шину, входящую в подсистему через ввод
&laquo;<span class="rdsvar">Port1</span>&raquo;. Эта схема будет работать точно так же, как и схемы
на <a href="um_2_11_2.htm#pic15" title="Корневая подсистема после проведения всех связей">рис.&nbsp;206</a>
и <a href="um_2_2.htm#pic1" title="Окна RDS сразу после загрузки схемы">рис.&nbsp;19</a>
&ndash; для расчета не важно, каким именно образом соединяются входы и выходы блоков:
непосредственно, через внешние входы и выходы или через каналы шин.</p>

<div class="pic"><div class="container" id="pic7">
<img src="../img/DynamicBus.png" width="774" height="406" alt="Замена в подсистеме с рис.&nbsp;206 связей на шины" />
<p id="light_pic7">Рис.&nbsp;212. Замена в подсистеме с <a href="um_2_11_2.htm#pic15" title="Корневая подсистема после проведения всех связей">рис.&nbsp;206</a> связей на шины</p>
</div></div>


</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_11_2.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_11_4.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_11_3">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
