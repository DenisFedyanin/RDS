<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.12.1. Использование слоев</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_12gen">&sect;2.12. Выборочное отображение блоков и связей</a></p>
<div class="level"><p>&sect;2.12.1. Использование слоев</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_11_4.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_12a.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_12">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3>&sect;2.12. Выборочное отображение блоков и связей</h3>
<p class="abstract">Рассматривается использование слоев с их конфигурациями и классов объектов для управления отображением блоков, связей и шин в окнах подсистем.</p>
<h4>&sect;2.12.1. Использование слоев</h4>
<p class="abstract">Описывается назначение и параметры слоев в окне подсистемы и окно редактора этих слоев.</p>



<p><span class="term">Слои</span> используются во многих приложениях, позволяющих пользователю создавать какие-либо
сложные изображения. Поддерживаются они и в RDS. Для тех, кто не знаком с
идеологией слоев, ее можно коротко объяснить следующим образом: слои &ndash; это что-то
вроде листов прозрачного пластика, на которых можно рисовать разные изображения
(в случае RDS &ndash; изображения блоков и связей в подсистеме). Складывая эти
листы в стопку в разном порядке, можно добиться того, что изображения на верхних листах
будут перекрывать изображения на нижних, при этом изображения на нижних листах будут
все равно частично видны через прозрачные участки верхних листов. Порядок листов в
стопке всегда можно изменить произвольным образом, поместив на передний план самые важные
в данный момент изображения. Кроме того, некоторые листы можно вообще убрать из стопки,
чтобы их изображения стали не видны, а потом, при необходимости, вернуть их обратно в
стопку.</p>

<p>В RDS каждая подсистема имеет свой, независимый от других, набор слоев.
Каждый блок и каждая связь в этой подсистеме жестко привязаны к ее конкретному
слою. Пользователь может в любой момент добавлять и удалять слои и переносить блоки
и связи со слой на слой. Задать слой для блока или связи можно в их окнах параметров на
вкладке &laquo;<span class="menu">внешний вид</span>&raquo; (см.
<a href="um_2_9_1.htm#pic5" title="Вкладка внешний вид окна параметров простого блока при выбранном изображении картинкой (картинка отсутствует)">рис.&nbsp;99</a>
и <a href="um_2_7_2.htm#pic1_0" title="Вкладки окна параметров связи внешний вид (а) и соединения (б)">рис.&nbsp;48&nbsp;а</a> соответственно)
или пунктом &laquo;<span class="menu">слой</span>&raquo;
контекстного меню выделенных блоков и связей
(см. <a href="um_2_3.htm" title="&sect;2.3. Элементы и меню окна подсистемы">&sect;2.3</a>). При удалении слоя все находившиеся
на нем блоки и связи будут автоматически перенесены на другой. Последний оставшийся
слой удалить нельзя &ndash; в подсистеме всегда должен быть хотя бы один слой,
иначе блокам и связям негде будет размещаться.</p>

<p>Видимость слоя (наличие или отсутствие &laquo;листа&raquo; в стопке) и его
близость к переднему плану (место в стопке) в RDS не являются параметрами
самого слоя.
<span id="ref1">Вместе</span>
с самими слоями в подсистеме может быть произвольное число их
<span class="term"><span id="light_ref1">конфигураций</span></span>, между которыми
пользователь может быстро переключаться. Каждая конфигурация имеет собственный
порядок слоев и собственные установки видимости для каждого слоя. Кроме того, каждый
слой в конфигурации может быть активным и неактивным. На активных слоях можно добавлять
и редактировать блоки и связи, а в режимах
<a href="um_1_3.htm#ref2" title="Режим моделирования">моделирования</a> и
<a href="um_1_3.htm#ref3" title="Режим расчета">расчета</a> блоки на них могут реагировать на нажатие и
отпускание кнопок мыши и перемещение ее курсора. Блоки на неактивных слоях видны
пользователю, но на мышь они не реагируют и их нельзя удалить, переместить или вызвать
для них окно настроек. Число конфигураций слоев в подсистеме не ограничено, пользователь
может создавать и удалять их. В подсистеме всегда должна быть хотя бы одна конфигурация
слоев, поэтому последнюю оставшуюся конфигурацию удалить нельзя. При желании, в
<a href="um_2_11_4.htm#pic2" title="Вкладка общие окна параметров подсистемы">параметрах подсистемы</a>
может быть включена синхронизация конфигурации ее слоев с конфигурацией слоев
родительской подсистемы. В этом случае при включении какой-либо конфигурации в
родительской подсистеме в синхронизированной с ней дочерней автоматически включится
конфигурация с тем же именем, если, конечно, она существует (состав и параметры слоев при
этом у подсистем могут отличаться, должны совпадать только имена конфигураций).</p>

<p>Сразу после создания в подсистеме есть единственный слой с именем
&laquo;Слой 1&raquo; и конфигурация с именем &laquo;Основная&raquo;, в которой
этот слой видим и активен. Для добавления в подсистему слоев и их конфигураций необходимо
открыть окно редактора слоев, вызвав пункт
&laquo;<span class="menu">окна | редактор слоев</span>&raquo;
<a href="um_2_1.htm" title="&sect;2.1. Главное окно и главное меню">главного меню RDS</a>
или нажав клавишу <span class="keys">F11</span>. Можно также открыть окно редактора
кнопкой на панели общего назначения главного окна RDS или на
<a href="um_2_3.htm#light_ref2" title="Панель слоев">панели слоев</a>
окна подсистемы, в которую предполагается добавлять слои
(<a href="#pic1" title="Различные способы вызова редактора слоев">рис.&nbsp;219</a>).
Последнее обычно удобнее всего, поскольку при этом в редакторе слоев сразу будет
выбрана нужная подсистема.</p>

<div class="pic"><div class="container" id="pic1">
<img src="../img/LayerEditorCall.png" width="776" height="427" alt="Различные способы вызова редактора слоев" />
<p id="light_pic1">Рис.&nbsp;219. Различные способы вызова редактора слоев</p>
</div></div>


<p><span id="light_ref2">Окно редактора слоев</span>
(<a href="#pic2" title="Окно редактора слоев: вкладки конфигурации (а) и слои (б)">рис.&nbsp;220</a>)
содержит две вкладки,
&laquo;<span class="menu">конфигурации</span>&raquo; и
&laquo;<span class="menu">слои</span>&raquo;,
над которыми располагается выпадающий список, в котором можно выбрать подсистему,
слои и конфигурации которой будут редактироваться. В этот список попадают только
подсистемы, окна которых открыты, причем при выборе подсистемы в списке ее окно
автоматически перемещается на передний план, а при открытии окна подсистемы или вызове
ее окна на передний план вручную, эта подсистема автоматически выбирается в списке.
Таким образом, выбранная подсистема в окне редактора слоев всегда совпадает с текущей
активной подсистемой.</p>

<div class="pic"><div class="container" id="pic2">
<div class="multi" id="pic2_0"><img src="../img/LayerEditor_Conf.png" width="270" height="330" alt="Окно редактора слоев: вкладки конфигурации (а) и слои (б) 1" /><p id="light_pic2_0">(а)</p></div><div class="multi" id="pic2_1"><img src="../img/LayerEditor_Layers.png" width="270" height="330" alt="Окно редактора слоев: вкладки конфигурации (а) и слои (б) 2" /><p id="light_pic2_1">(б)</p></div><p id="light_pic2">Рис.&nbsp;220. Окно редактора слоев: вкладки &laquo;<span class="menu">конфигурации</span>&raquo; (а) и &laquo;<span class="menu">слои</span>&raquo; (б)</p>
</div></div>


<p>На вкладке &laquo;<span class="menu">слои</span>&raquo; окна редактора располагается выпадающий список, в
котором можно выбрать конфигурацию слоев (в нем исходно выбрана текущая конфигурация,
на <a href="#pic2_1" title="Окно редактора слоев: вкладки конфигурации (а) и слои (б)">рис.&nbsp;220&nbsp;б</a> &ndash; конфигурация с
именем &laquo;Основная&raquo;). Ниже него находится список слоев
в том порядке и в тех состояниях, которые заданы для выбранной конфигурации. Слои в списке
перечисляются от переднего плана к заднему: чем выше слой в списке, тем ближе он к
переднему плану.</p>

<p>Список слоев состоит из четырех колонок. В левой, самой широкой из них, отображается
название слоя. Название слоя может быть произвольным, но оно должно быть уникальным в
подсистеме: в одной подсистеме не может быть двух слоев с одинаковыми названиями. Для
переименования слоя следует дважды щелкнуть на его названии в списке или нажать кнопку
&laquo;<span class="menu">ab|</span>&raquo; в правой части вкладки. В отличие от близости к переднему плану,
видимости и активности, название слоя не связано с конкретной конфигурацией &ndash;
переименование слоя изменит его название сразу во всех конфигурациях.</p>

<p>Остальные три колонки служат для отображения видимости (колонка с изображением глаза)
и активности (колонка с изображением карандаша) слоя, а также для указания слоя,
выбранного текущим в данной конфигурации (колонка с галочкой). Щелчок мышью в  колонках
видимости и активности в строке конкретного слоя включает и выключает соответствующие
параметры этого слоя. Изображение глаза во второй колонке указывает на видимость данного
слоя
(на <a href="#pic2_1" title="Окно редактора слоев: вкладки конфигурации (а) и слои (б)">рис.&nbsp;220&nbsp;б</a> видимы все слои кроме
слоя 3), изображение карандаша в третьей колонке &ndash; на активность слоя, то есть
на то, что блоки и связи на нем могут быть изменены или удалены и реагируют на действия
пользователя. На <a href="#pic2_1" title="Окно редактора слоев: вкладки конфигурации (а) и слои (б)">рис.&nbsp;220&nbsp;б</a> активны
только слои 1 и 2. Следует учитывать, что при отключении видимости слоя его
активность тоже выключается &ndash; содержимое невидимого слоя не отображается и,
поэтому, не может быть изменено.</p>

<p><span id="ref3">В</span>
четвертой колонке отображается галочка напротив имени
<span id="light_ref3">текущего слоя</span>, то есть
того слоя, на который помещаются все создаваемые блоки и связи. Очевидно, что
текущий слой в конфигурации может быть только один, поэтому, при щелчке в этой
колонке напротив имени какого-либо слоя, галочка, ранее стоявшая у другого слоя,
исчезает, и новый слой становится текущим. При выборе нового текущего слоя он
автоматически становится видимым и активным.</p>

<p>Справа от списка слоев находятся кнопки, позволяющие менять положение выбранного в
списке слоя (слой выбирается одиночным щелчком левой кнопки мыши на его названии),
удалять его, переименовывать и т.п.</p>

<div class="tablecenter"><div class="tcont">
<table>
  <tr>
    <th>Кнопка</th>
    <th>Действие</th>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowUp.png" width="25" height="25" alt="Кнопка: вверх" /></td>
    <td>Переместить выбранный слой на одну позицию вверх (ближе к переднему плану) в
    выбранной конфигурации.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowDown.png" width="25" height="25" alt="Кнопка: вниз" /></td>
    <td>Переместить выбранный слой на одну позицию вниз (дальше от переднего плана) в
    выбранной конфигурации.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ab_.png" width="25" height="25" alt="Кнопка: ab" /></td>
    <td>Изменить имя выбранного слоя во всех конфигурациях.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Plus.png" width="25" height="25" alt="Кнопка: плюс" /></td>
    <td>Добавить новый слой во все конфигурации.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_MergeLayers.png" width="25" height="25" alt="Кнопка: объединить" /></td>
    <td>Объединить выбранные слои в один (в списке должно быть выбрано несколько слоев,
    см. ниже) во всех конфигурациях.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Delete.png" width="25" height="25" alt="Кнопка: удалить" /></td>
    <td>Удалить выбранный слой (его блоки и связи перемещаются на другой слой) во
    всех конфигурациях.</td>
  </tr>
</table>
</div></div>

<p>Для объединения нескольких слоев в один в списке должна быть выбрана группа из
нескольких соседних слоев. Чтобы выбрать такую группу, следует щелкнуть левой кнопкой
мыши на названии первого из выбираемых слоев, а затем, удерживая клавишу
<span class="keys">Shift</span>, щелкнуть на последнем из слоев группы
(<a href="#pic3" title="Выбор нескольких слоев в редакторе: выделение первого (а) и последнего (б) слоя в группе">рис.&nbsp;221</a>).
Выделенными окажутся все слои между отмеченными, и кнопка объединения слоев станет
активной.</p>

<div class="pic"><div class="container" id="pic3">
<div class="multi" id="pic3_0"><img src="../img/LayerEditor_groupselect1.png" width="247" height="330" alt="Выбор нескольких слоев в редакторе: выделение первого (а) и последнего (б) слоя в группе 1" /><p id="light_pic3_0">(а)</p></div><div class="multi" id="pic3_1"><img src="../img/LayerEditor_groupselect2.png" width="247" height="330" alt="Выбор нескольких слоев в редакторе: выделение первого (а) и последнего (б) слоя в группе 2" /><p id="light_pic3_1">(б)</p></div><p id="light_pic3">Рис.&nbsp;221. Выбор нескольких слоев в редакторе: выделение первого (а) и<br />последнего (б) слоя в группе</p>
</div></div>


<p>В нижней части вкладки &laquo;<span class="menu">слои</span>&raquo; находится флажок
&laquo;<span class="menu">запоминать состояние</span>&raquo;, управляющий сохранением изменений, сделанных в
данной конфигурации слоев. Если он включен, все изменения в видимости, активности и
взаимном расположении слоев будут считаться постоянными и сохранятся
при переключении конфигураций. Если флажок выключен, все изменения будут считаться
временными и не будут запоминаться: они будут действовать только до тех пор,
пока данная конфигурация включена. Если переключиться в другую конфигурацию, а потом
снова вернуться к данной, она восстановит свое исходное состояние, то есть состояние, в
котором ее отредактировали при включенном флажке. Так можно защитить конфигурацию от
случайного изменения.</p>

<p>Следует учитывать, что удаление и объединение слоев затрагивает все
конфигурации в подсистеме, поэтому эти действия запоминаются независимо от
состояния флажка &laquo;<span class="menu">запоминать состояние</span>&raquo;. Можно, при желании, сделать так,
чтобы изменения в конфигурациях запоминались всегда, и этот флажок не отображался: для этого нужно
на вкладке &laquo;<span class="menu">общие</span>&raquo; в <a href="um_2_18.htm#pic1" title="Окно настроек: вкладка общие">настройках RDS</a>
включить флажок &laquo;<span class="menu">всегда запоминать изменения в конфигурации слоев</span>&raquo;.</p>

<p>Конфигурации слоев можно добавлять, удалять и переименовывать на вкладке
&laquo;<span class="menu">конфигурации</span>&raquo;
(см. <a href="#pic2_0" title="Окно редактора слоев: вкладки конфигурации (а) и слои (б)">рис.&nbsp;220&nbsp;а</a>).
На ней расположен список имеющихся в подсистеме конфигураций и кнопки для управления
ими:</p>

<div class="tablecenter"><div class="tcont">
<table>
  <tr>
    <th>Кнопка</th>
    <th>Действие</th>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowUp.png" width="25" height="25" alt="Кнопка: вверх" /></td>
    <td>Переместить выбранную конфигурацию на одну позицию вверх в списке.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowDown.png" width="25" height="25" alt="Кнопка: вниз" /></td>
    <td>Переместить выбранную конфигурацию на одну позицию вниз в списке.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ab_.png" width="25" height="25" alt="Кнопка: ab" /></td>
    <td>Изменить имя выбранной конфигурации.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Plus.png" width="25" height="25" alt="Кнопка: плюс" /></td>
    <td>Добавить новую конфигурацию.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Delete.png" width="25" height="25" alt="Кнопка: удалить" /></td>
    <td>Удалить выбранную конфигурацию.</td>
  </tr>
</table>
</div></div>

<p>Положение конфигурации в списке на вкладке совпадает с ее положением в
выпадающем списке на
<a href="um_2_3.htm#light_ref2" title="Панель слоев">панели слоев</a>
окна подсистемы
(см. <a href="um_2_3.htm" title="&sect;2.3. Элементы и меню окна подсистемы">&sect;2.3</a>
и <a href="#pic4" title="Выбор конфигурации на панели слоев">рис.&nbsp;222</a>).
Обычно часто используемые конфигурации размещают в начале этого списка, чтобы их
удобнее было выбирать. Имя конфигурации должно быть уникальным в подсистеме,
RDS не даст создать в одной подсистеме две конфигурации с одинаковыми именами.
При выборе конфигурации в списке она автоматически становится текущей в окне подсистемы.</p>

<div class="picright"><div class="container" id="pic4">
<img src="../img/LayersPanel_ConfSelect.png" width="349" height="161" alt="Выбор конфигурации на панели слоев" />
<p id="light_pic4">Рис.&nbsp;222. Выбор конфигурации на панели слоев</p>
</div></div>


<p><span id="light_ref4">Панель слоев</span>
в окне подсистемы всегда синхронизирована с окном редактора слоев &ndash; если не нужно
изменять параметры или имена слоев и конфигураций, со слоями можно работать
непосредственно из окна подсистемы, не вызывая редактор слоев в отдельном окне.
Конфигурацию можно выбрать в левом выпадающем списке панели
(<a href="#pic4" title="Выбор конфигурации на панели слоев">рис.&nbsp;222</a>). При выборе
конфигурации внешний вид рабочего поля подсистемы меняется согласно параметрам и
порядку слоев в этой конфигурации. В окне редактора слоев, если оно открыто,
эта конфигурация тоже становится выбранной, а вкладка
&laquo;<span class="menu"><a href="#pic2_1" title="Окно редактора слоев: вкладки конфигурации (а) и слои (б)">слои</a></span>&raquo; заполняется
параметрами ее слоев.</p>

<div class="picright"><div class="container" id="pic5">
<img src="../img/LayersPanel_LayerSelect.png" width="349" height="161" alt="Выбор текущего слоя на панели слоев" />
<p id="light_pic5">Рис.&nbsp;223. Выбор текущего слоя на панели слоев</p>
</div></div>


<p>Во втором выпадающем списке панели слоев можно выбрать текущий слой
(<a href="#pic5" title="Выбор текущего слоя на панели слоев">рис.&nbsp;223</a>)
&ndash; это равносильно щелчку по колонке с галочкой в редакторе слоев.
В список попадут только слои, отмеченные в текущей конфигурации как активные, то есть
те, содержимое которых можно редактировать. После выбора текущего слоя все добавляемые
в подсистему блоки и связи будут помещаться именно на этот слой. В окне редактора
слоев, если оно открыто, этот слой будет помечен галочкой.</p>

<p>Использование слоев и их конфигураций позволяет облегчить редактирование сложных
схем и работу с ними: разместив, например, логические блоки на одном слое, а
алгебраические &ndash; на другом, можно временно убирать с экрана часть схемы, с
которой в данный момент не ведется работа. Чтобы сделать это переключение видов
схемы более удобным, можно, например, создать в подсистеме три конфигурации, в
одной из которых все слои будут видимыми, в другой будет видим только слой
алгебраических блоков, в третьей &ndash; только слой логических. При этом для
переключения вида схемы не нужно будет вызывать редактор слоев, достаточно будет
просто выбрать нужное название конфигурации в выпадающем списке панели
окна подсистемы.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_11_4.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_12a.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_12">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
