<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.15.4. Пакетная обработка</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_15">&sect;2.15. Операции с несколькими блоками и связями одновременно</a></p>
<div class="level"><p>&sect;2.15.4. Пакетная обработка</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_15_3.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_15_5.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_15_4">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3 class="off">&sect;2.15. Операции с несколькими блоками и связями одновременно</h3>
<h4>&sect;2.15.4. Пакетная обработка</h4>
<p class="abstract">Описывается способ автоматизации обработки схемы &ndash; задание последовательности операций по выделению блоков и связей и изменению их параметров.</p>


<p>Пакетная обработка позволяет задать последовательность действий, которую 
необходимо выполнить над блоками и связями загруженной схемы. Она тесно связана с 
функциями <a href="um_2_15_1.htm" title="&sect;2.15.1. Выделение блоков и связей по заданному критерию">выделения по критерию</a>
и <a href="um_2_15_3.htm" title="&sect;2.15.3. Групповая установка параметров">групповой установки</a> &ndash; в качестве 
действий, входящих в последовательность, указываются файлы параметров, сохраненные 
этими функциями. Пакетная обработка полезна в тех случаях, когда необходимо 
выполнить одни и те же действия над несколькими схемами. Допустим, например, что 
множество блоков в нескольких уже созданных схемах использует 
<a href="um_1_2.htm#ref3" title="Модель блока">модели</a> из 
динамической библиотеки &laquo;<span class="file">oldlib.dll</span>&raquo;. Со временем появилась 
новая библиотека &laquo;<span class="file">newlib.dll</span>&raquo; с усовершенствованными версиями 
тех же самых моделей, и теперь нужно заменить во всех блоках всех схем старую библиотеку 
на новую. Выполнение такой замены вручную потребовало бы много сил и времени, а 
пакетная обработка позволяет автоматизировать этот процесс. Сначала нужно подготовить 
данные для обработки:</p>

<ul>
  <li>загрузив какую-либо схему, открыть окно выделения по критерию, задать в нем 
  выделение всех блоков с моделями из библиотеки &laquo;<span class="file">oldlib.dll</span>&raquo; и 
  сохранить критерий выделения в файл;</li>
  
  <li>открыть окно групповой установки, задать в нем установку для всех выделенных 
  блоков файла библиотеки &laquo;<span class="file">newlib.dll</span>&raquo;, сохранить параметры 
  установки в файл и закрыть окно, не выполняя установку.</li>
  
  <li>открыть окно пакетной обработки (как это сделать, будет описано ниже), добавить в 
  него два действия &ndash; выделение по критерию из первого сохраненного файла и 
  установка параметров по второму сохраненному файлу &ndash; и сохранить параметры 
  пакетной обработки в файл.</li>
</ul>

<p class="noindent">Теперь, чтобы заменить в какой-либо схеме со всех блоках 
&laquo;<span class="file">oldlib.dll</span>&raquo; на &laquo;<span class="file">newlib.dll</span>&raquo;, нужно загрузить 
эту схему и выполнить в ней пакетную обработку по сохраненному файлу параметров 
&ndash; это значительно проще, чем искать нужные блоки во всех подсистемах схемы 
и менять параметры найденных.</p>

<p>Пакетная обработка вызывается пунктом 
<a href="um_2_1.htm" title="&sect;2.1. Главное окно и главное меню">главного меню RDS</a> 
&laquo;<span class="menu">система | пакетная обработка</span>&raquo;. При его выборе открывается окно, в 
котором задается последовательность выполняемых действий и список обрабатываемых 
подсистем схемы 
(<a href="#pic1" title="Окно пакетной обработки">рис.&nbsp;249</a>).</p>

<div class="pic"><div class="container" id="pic1">
<img src="../img/BatchProcess.png" width="638" height="356" alt="Окно пакетной обработки" />
<p id="light_pic1">Рис.&nbsp;249. Окно пакетной обработки</p>
</div></div>


<p>В левой части окна располагается панель &laquo;<span class="menu">выполнить</span>&raquo;, на которой 
задается набор подсистем схемы, в которых следует выполнить указанные действия. 
Подсистемы выбираются установкой одного из следующих флажков:</p>

<ul>
  <li>&laquo;<span class="menu">во всех подсистемах</span>&raquo; &ndash; действия будут выполнены во 
  всех подсистемах данной схемы (это самый часто используемый вариант);</li>
  
  <li>&laquo;<span class="menu">во всех открытых подсистемах</span>&raquo; &ndash; действия будут выполнены 
  во всех подсистемах, окна которых в данный момент открыты (пользователь может 
  специально открыть только те подсистемы, которые нужно обработать);</li>
  
  <li>&laquo;<span class="menu">во всех закрытых подсистемах</span>&raquo; &ndash; действия будут выполнены 
  только в подсистемах, окна которых не открыты (вариант, противоположный 
  предыдущему);</li>
  
  <li>&laquo;<span class="menu">в подсистемах по списку</span>&raquo; &ndash;  действия будут выполнены только 
  в подсистемах, отмеченных флажком в списке на панели.</li>
</ul>

<p>В нижней части панели находится флажок &laquo;<span class="menu">обработать блок главной системы</span>&raquo;, 
позволяющий выполнить указанные действия в том числе и над блоком 
<a href="um_1_2.htm#ref11" title="Корневая подсистема">корневой подсистемы</a>. Дело в том, что и выделение по 
критерию, и групповая установка, используемые при пакетной обработке в качестве 
выполняемых над блоками действий, работают только с блоками внутри какой-либо 
подсистемы. Корневая подсистема схемы сама по себе тоже является блоком, но у этого 
блока нет <a href="um_1_2.htm#ref13" title="Родительская подсистема">родительской подсистемы</a>, и поэтому он 
невидим для выделения по критерию и групповой установки. Чтобы над ним тоже можно было 
выполнить действия (например, изменить параметры рабочего поля корневой подсистемы), 
нужно установить указанный флажок.</p>

<p>На панели &laquo;<span class="menu">действия</span>&raquo; в правой части окна располагается таблица 
с последовательностью выполняемых операций. Таблица состоит из двух колонок: 
&laquo;<span class="menu">действие</span>&raquo;, в которой отображается название выполняемой операции, и 
&laquo;<span class="menu">файл</span>&raquo; с именем файла параметров операции. Справа от таблицы находятся 
кнопки, позволяющие добавлять, удалять и изменять действия, а также менять порядок 
их выполнения:</p>

<div class="tablecenter"><div class="tcont">
<table>
  <tr>
    <th>Кнопка</th>
    <th>Действие</th>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Plus.png" width="25" height="25" alt="Кнопка: плюс" /></td>
    <td>Добавить новую операцию (открывает отдельное окно).</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_properties.png" width="25" height="25" alt="Кнопка: свойства" /></td>
    <td>Изменить выбранную операцию (открывает отдельное окно).</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowUp.png" width="25" height="25" alt="Кнопка: вверх" /></td>
    <td>Переместить выбранную операцию на одну позицию вверх по списку.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowDown.png" width="25" height="25" alt="Кнопка: вниз" /></td>
    <td>Переместить выбранную операцию на одну позицию вниз по списку.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Delete.png" width="25" height="25" alt="Кнопка: удалить" /></td>
    <td>Удалить выбранную операцию.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_new1.png" width="25" height="25" alt="Кнопка: очистить" /></td>
    <td>Очистить весь список операций.</td>
  </tr>
</table>
</div></div>

<p><span id="light_ref1">При добавлении или изменении операции открывается отдельное окно</span> 
(<a href="#pic2" title="Окно операции пакетной обработки">рис.&nbsp;250</a>), 
в котором указывается тип операции и файл ее параметров, если они 
у этой операции есть.</p>

<div class="pic"><div class="container" id="pic2">
<img src="../img/BatchProcess_Action.png" width="638" height="153" alt="Окно операции пакетной обработки" />
<p id="light_pic2">Рис.&nbsp;250. Окно операции пакетной обработки</p>
</div></div>


<p>Поддерживается только три типа операций: 
<a href="um_2_15_1.htm" title="&sect;2.15.1. Выделение блоков и связей по заданному критерию">выделение по критерию</a> (указывается файл 
параметров, сохраненный из окна выделения), 
<a href="um_2_15_3.htm" title="&sect;2.15.3. Групповая установка параметров">установка параметров</a> (указывается файл 
параметров, сохраненный из окна групповой установки) и удаление выделенных блоков 
(файл параметров не указывается). Нажатие кнопки 
&laquo;<span class="menu">OK</span>&raquo; записывает операцию в список.</p>

<p>В левой нижней части окна пакетной обработки 
(см. <a href="#pic1" title="Окно пакетной обработки">рис.&nbsp;249</a>) находятся кнопки 
&laquo;<span class="menu">сохранить</span>&raquo; и &laquo;<span class="menu">загрузить</span>&raquo;, сохраняющие набор действий в 
файл и загружающие его оттуда. При нажатии этих кнопок открываются 
диалоги сохранения и загрузки файла соответственно &ndash; они стандартные, поэтому 
рисунок для них не приводится. В файл сохраняется только сам список действий и 
список подсистем, над содержимым которых эти действия выполняются, поэтому для 
выполнения пакетной обработки будет необходим не только этот сохраненный файл, но и 
все файлы критериев выделения и параметров групповой установки, с которыми он связан. 
<span id="ref2">Файл</span> пакетной обработки по умолчанию получает расширение 
&laquo;<span class="file"><span id="light_ref2">.set</span></span>&raquo;, но его можно, при 
желании, изменить. Не следует путать его с файлами критериев, имеющими по умолчанию 
очень похожее расширение &laquo;<span class="file">.sel</span>&raquo;.</p>

<p>Чтобы начать пакетную обработку, следует нажать кнопку 
&laquo;<span class="menu">старт</span>&raquo; в правой нижней части окна. В левой нижней части окна появится 
полоса прогресса, которая будет расти по мере выполнения действий. При большом количестве 
блоков в подсистеме процесс может затянуться, поэтому, при желании, его можно прервать 
нажатием кнопки &laquo;<span class="menu">отмена</span>&raquo;. 
Если в
<a href="um_2_18.htm" title="&sect;2.18. Настройки RDS">настройках RDS</a> разрешена отмена
действий пользователя, пакетную обработку можно отменить всю целиком либо нажатием 
<span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">Z</span>, 
либо выбором в
<a href="um_2_1.htm" title="&sect;2.1. Главное окно и главное меню">главном меню RDS</a>
пункта &laquo;<span class="menu">система | отмена</span>&raquo;, при этом схема вернется к состоянию до 
начала пакетной обработки.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_15_3.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_15_5.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_15_4">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
