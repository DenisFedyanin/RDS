<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.16.4. Редактирование библиотек без использования RDS</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_16">&sect;2.16. Создание и редактирование библиотек и вкладок панели блоков</a></p>
<div class="level"><p>&sect;2.16.4. Редактирование библиотек без использования RDS</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_16_3.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_17.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_16_4">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3 class="off">&sect;2.16. Создание и редактирование библиотек и вкладок панели блоков</h3>
<h4>&sect;2.16.4. Редактирование библиотек без использования RDS</h4>
<p class="abstract">Описывается редактирование библиотек и панели блоков RDS средствами Windows.</p>


<div class="picright"><div class="container" id="pic1">
<img src="../img/LibEdit_LibAndExplorer.png" width="442" height="562" alt="Одна и та же папка-вкладка панели блоков в окне библиотеки RDS (вверху) и в проводнике Windows (внизу)" />
<p id="light_pic1">Рис.&nbsp;268. Одна и та же папка-вкладка панели блоков<br />в окне библиотеки RDS (вверху)<br />и в &laquo;проводнике&raquo; Windows (внизу)</p>
</div></div>


<p><span id="ref1">Как</span>
<span id="ref2">уже</span>
было указано выше, и библиотеки, и вкладки панели блоков &ndash; это
просто папки с файлами в специальных папках RDS:
<span id="light_ref1">папке библиотеки</span> и
<span id="light_ref2">папке панели блоков</span>. Размещение этих папок можно узнать или
изменить в
<a href="um_2_18.htm#pic4" title="Окно настроек: вкладка папки">настройках RDS</a>.
<span id="ref3">По</span>
<span id="ref4">умолчанию</span> папка
библиотеки называется
&laquo;<span class="file"><span id="light_ref3">Library</span></span>&raquo;, папка панели
блоков &ndash; &laquo;<span class="file"><span id="light_ref4">Panel</span></span>&raquo;.
При желании, удалять блоки из библиотеки или с панели и перемещать их из одной
библиотеки в другую можно и без участия RDS средствами любого файлового менеджера
&ndash; например, &laquo;проводника&raquo; Windows
(<a href="#pic1" title="Одна и та же папка-вкладка панели блоков в окне библиотеки RDS (вверху) и в проводнике Windows (внизу)">рис.&nbsp;268</a>).
Добавлять новые блоки в библиотеку тоже можно через файловый менеджер, но при этом
все равно придется сначала сохранить блок из схемы в файл на диске (для этого
нужно <a href="um_2_6.htm#ref1" title="Выделение объектов в подсистеме">выделить его в схеме</a>, выбрать пункт главного меню
&laquo;<span class="menu">редактирование | сохранить блок</span>&raquo; и указать имя файла), а затем
переместить этот файл в нужную папку библиотеки и создать для него файлы со
значком и всплывающей подсказкой.</p>

<p>Имя вложенной папки внутри папки библиотеки или панели блоков
в большинстве случаев будет являться
именем этой библиотеки или вкладки соответственно &ndash; если, например, создать
внутри папки панели блоков папку с названием &laquo;<span class="file">Анимация</span>&raquo;, пустая
вкладка с названием &laquo;Анимация&raquo; появится на панели блоков при
следующем запуске RDS.
Единственное исключение из этого правила &ndash; задание
<a href="um_2_16_3.htm#ref1" title="Имя папки и название вкладки панели блоков">независимого</a> от папки имени вкладки панели блоков.
Внутри папки каждому библиотечному блоку соответствует
один или несколько файлов: у всех этих файлов одно и то же имя (точнее, часть имени
до точки, отделяющей в имени файла собственно имя от расширения), но разные
расширения.</p>

<p><span id="ref5">Сам</span>
<span id="ref6">файл</span> описания блока имеет либо расширение
&laquo;<span class="file"><span id="light_ref5">.blk</span></span>&raquo;, если это
<a href="um_1_2.htm#light_ref9" title="Простой блок">простой блок</a>,
<a href="um_1_2.htm#light_ref12" title="Внешний вход подсистемы">внешний вход</a>,
<a href="um_1_2.htm#light_ref14" title="Внешний выход подсистемы">внешний выход</a> или
<a href="um_1_2.htm#light_ref15" title="Ввод шины">ввод шины</a>, либо расширение
&laquo;<span class="file"><span id="light_ref6">.rds</span></span>&raquo;, если это
<a href="um_1_2.htm#light_ref10" title="Подсистема">подсистема</a>,
сохраненная как единый блок, или полная схема. Именно из этого файла будут
загружаться параметры блока при его вставке из библиотеки в схему.
На <a href="#pic1" title="Одна и та же папка-вкладка панели блоков в окне библиотеки RDS (вверху) и в проводнике Windows (внизу)">рис.&nbsp;268</a> внизу
файл, из которого будет загружаться блок с анимированным изображением манипулятора
(см. пример в <a href="um_2_16_2.htm#light_ref1" title="Добавление блока в библиотеку">&sect;2.16.2</a>),
называется &laquo;<span class="file">Hand.blk</span>&raquo; &ndash; это простой блок. Чаще всего в
библиотеки добавляют именно простые блоки, поскольку многие из них
достаточно универсальны, чтобы использоваться в разных схемах. Внешние входы, выходы
и вводы шин обычно не имеют ни моделей, ни каких-либо специальных параметров,
поэтому редко помещаются в библиотеку &ndash; их проще создать в схеме в нужном
месте, чем искать на панели блоков. Тем не менее, если пользователя не устраивает
стандартный внешний вид этих блоков в RDS, он может, например, создать для
них
<a href="um_1_2.htm#light_ref22">векторные картинки</a>
и поместить эти блоки в библиотеку, чтобы не пришлось задавать одни и те же картинки
для всех создаваемых входов, выходов или вводов шин. Подсистемы и сами схемы в
RDS являются блоками сложной структуры, и их тоже можно поместить в библиотеку,
если такую подсистему предполагается использовать в качестве сложного блока в
других схемах.</p>

<p>Имя, которое получает библиотечный блок при вставке в схему, определяется именно
именем файла, в котором он находится в папке библиотеки, а не именем, которое он
имел в момент сохранения &ndash; этим вставка блока из библиотеки отличается от
вставки блока при помощи пункта меню
&laquo;<span class="menu">редактирование | создать | загрузить блок</span>&raquo;. Если вставить в схему
блок манипулятора из библиотеки или с панели блоков, он получит имя
&laquo;<span class="rdsvar">Hand1</span>&raquo;: к имени файла (&laquo;<span class="file">Hand</span>&raquo;) будет прибавлена
цифра, обеспечивающая уникальность имени блока в подсистеме. Если вставить в ту
же подсистему второй такой блок, он получит имя &laquo;<span class="rdsvar">Hand2</span>&raquo;, и т.д.
Если же вставить в подсистему этот же самый блок, вызвав пункт меню
&laquo;<span class="menu">редактирование | создать | загрузить блок</span>&raquo; и выбрав в диалоге открытия файл
&laquo;<span class="file">Hand.blk</span>&raquo; из библиотеки, блок получит имя
&laquo;<span class="rdsvar">Block1</span>&raquo;, поскольку именно так он назывался в подсистеме в тот
момент, когда его оттуда <a href="um_2_16_2.htm#light_ref1" title="Добавление блока в библиотеку">записали в библиотеку</a>.
Разумеется, если на момент загрузки блока в подсистеме уже есть блок с именем
&laquo;<span class="rdsvar">Block1</span>&raquo;, цифра в конце имени нового блока будет автоматически
увеличена, но началом имени все равно останется слово &laquo;Block&raquo;, а не имя
файла &laquo;Hand&raquo;. Таким образом, чтобы изменить имя, которое библиотечный
блок получает при вставке в схему, достаточно просто переименовать его файл. При
этом необходимо также переименовать все связанные с ним вспомогательные файлы,
описанные ниже.</p>

<p>Кроме самого файла с описанием блока, в папке библиотеки могут находиться
файлы с описанием значков этого блока и его всплывающей подсказки. Имена этих
вспомогательных файлов отличаются от имени основного только расширением:
на <a href="#pic1" title="Одна и та же папка-вкладка панели блоков в окне библиотеки RDS (вверху) и в проводнике Windows (внизу)">рис.&nbsp;268</a> внизу
вместе с файлом &laquo;<span class="file">Hand.blk</span>&raquo; блок описывают файлы
&laquo;<span class="file">Hand.b16</span>&raquo; (мелкий значок) и
&laquo;<span class="file">Hand.txt</span>&raquo; (текст всплывающей подсказки).</p>

<p><span id="ref12"><span id="ref11"><span id="ref10"><span id="ref9"><span id="ref8"><span id="ref7">Растровые изображения</span></span></span></span></span></span>,
используемые в качестве значка блока на вкладке панели или в библиотеке,
хранятся в файлах с расширениями
&laquo;<span class="file"><span id="light_ref7">.bmp</span></span>&raquo;,
&laquo;<span class="file"><span id="light_ref8">.ico</span></span>&raquo;,
&laquo;<span class="file"><span id="light_ref9">.i16</span></span>&raquo;,
&laquo;<span class="file"><span id="light_ref10">.i32</span></span>&raquo;,
&laquo;<span class="file"><span id="light_ref11">.b16</span></span>&raquo;,
&laquo;<span class="file"><span id="light_ref12">.b32</span></span>&raquo;.
В файлах &laquo;<span class="file">.bmp</span>&raquo;,
&laquo;<span class="file">.b16</span>&raquo; и
&laquo;<span class="file">.b32</span>&raquo; находятся изображения в стандартном растровом формате Windows
(bitmap): в
&laquo;<span class="file">.b16</span>&raquo; &ndash; 16&times;16 точек (мелкие значки), в
&laquo;<span class="file">.b32</span>&raquo; &ndash; 32&times;32 (крупные), в
&laquo;<span class="file">.bmp</span>&raquo; &ndash; любого размера. Левая нижняя точка такого изображения в
RDS считается прозрачной, поэтому при его выводе все точки того же цвета
будут заменены на цвет фона. В файлах
&laquo;<span class="file">.ico</span>&raquo;,
&laquo;<span class="file">.i16</span>&raquo; и
&laquo;<span class="file">.i32</span>&raquo; содержатся иконки в стандартном формате Windows &ndash;
произвольного размера, 16&times;16 и 32&times;32 точки соответственно. Формат
иконки включает в себя маску прозрачности, поэтому цвет левой нижней точки
в ней не анализируется и остается таким, каким он был задан при создании изображения.
В RDS нет встроенного редактора растровых изображений, поэтому все значки
необходимо создавать во внешних редакторах. Растровые изображения в формате
&laquo;<span class="file">.bmp</span>&raquo; можно создавать и редактировать во встроенном в Windows
редакторе &laquo;Paint&raquo;, а файлы с расширениями
&laquo;<span class="file">.b16</span>&raquo; и &laquo;<span class="file">.b32</span>&raquo; можно получить из
&laquo;<span class="file">.bmp</span>&raquo; простым переименованием (формат у них одинаковый): например,
чтобы создать мелкий значок &laquo;<span class="file">Hand.b16</span>&raquo;, можно создать в редакторе
&laquo;Paint&raquo; растровое изображение размером 16&times;16 точек, сохранить
его в файл &laquo;<span class="file">Hand.bmp</span>&raquo;, а затем переименовать этот файл, заменив
расширение на &laquo;<span class="file">.b16</span>&raquo;. Если у блока не будет крупного значка,
можно и не переименовывать файл &ndash; файлы с расширением
&laquo;<span class="file">.bmp</span>&raquo;, которое растровые рисунки получают по умолчанию, тоже
опознаются RDS как файлы значков. Редактор иконок
(формат &laquo;<span class="file">.ico</span>&raquo;) в состав стандартных программ Windows не
входит, но такие редакторы используются во многих средах разработки и найти их не
так уж сложно. Файлы с расширениями
&laquo;<span class="file">.i16</span>&raquo; и &laquo;<span class="file">.i32</span>&raquo; можно получить из
&laquo;<span class="file">.ico</span>&raquo; простым переименованием &ndash; формат у них одинаковый.</p>

<p>Значки размером 16&times;16 используются на панели блоков и в библиотеке в
<a href="um_2_16_1.htm#ref2" title="Стиль списка блоков">стилях</a>
&laquo;мелкие значки&raquo; и &laquo;список&raquo;, 32&times;32 &ndash; только
в библиотеке и только в режиме &laquo;крупные значки&raquo;. Если RDS не может
найти среди этих файлов значок нужного размера, значок будет автоматически сформирован
путем сжатия или растягивания найденного изображения, однако, качество изображения при
этом, как правило, ухудшается. Для блока в библиотеке или на панели может быть задан
любой набор из указанных файлов, и RDS будет искать среди них подходящий. При
поиске мелкого значка файлы просматриваются в следующем порядке:
&laquo;<span class="file">.i16</span>&raquo; &rarr;
&laquo;<span class="file">.b16</span>&raquo; &rarr;
&laquo;<span class="file">.ico</span>&raquo; &rarr;
&laquo;<span class="file">.bmp</span>&raquo;, при поиске крупного &ndash;
&laquo;<span class="file">.i32</span>&raquo; &rarr;
&laquo;<span class="file">.b32</span>&raquo; &rarr;
&laquo;<span class="file">.ico</span>&raquo; &rarr;
&laquo;<span class="file">.bmp</span>&raquo;. Таким образом, если, например, в папке есть файл с расширением
&laquo;<span class="file">.i16</span>&raquo;, RDS не будет обращаться к файлам
&laquo;<span class="file">.b16</span>&raquo;,
&laquo;<span class="file">.ico</span>&raquo; и
&laquo;<span class="file">.bmp</span>&raquo; при поиске мелкого значка. Папки библиотеки блоков тоже
могут иметь такие файлы со значками &ndash; в этом случае имя файла должно
совпадать с именем папки библиотеки (например, значок для библиотеки
&laquo;<span class="file">Library1</span>&raquo; должен называться
&laquo;<span class="file">Library1.bmp</span>&raquo;,
&laquo;<span class="file">Library1.ico</span>&raquo; и т.п.). Вкладки панели блоков значков иметь не
могут (точнее, файлы значков для вкладок игнорируются RDS).</p>

<p><span id="ref13">Текст</span>
всплывающей подсказки к блоку хранится в файле с расширением
&laquo;<span class="file"><span id="light_ref13">.txt</span></span>&raquo;, он может быть создан
при помощи любого текстового редактора &ndash; например, входящим в состав Windows
редактором &laquo;Блокнот&raquo;.
<span id="ref14">Подсказка</span>
может содержать несколько строчек,
текст должен иметь кодировку <span id="light_ref14">CP1251</span> и не должен иметь
какого-либо форматирования. Этот текст будет появляться во всплывающем окне при
наведении курсора мыши на значок блока в библиотеке или на его кнопку на панели блоков.</p>

<p>В этом же тексте на отдельной строке указывается файл и тема (при наличии)
<a href="um_2_16_2.htm#ref9" title="Справка к блоку в библиотеке">справки к блоку</a>, если она есть. Такая строка не включается
во всплывающую подсказку и имеет следующий вид:</p>

<pre class="cpp">  $HELP=<i>относительный_путь_к_файлу_справки</i>|<i>тема</i></pre>

<p class="noindent"><span id="ref15">Она</span>
<span id="ref16">начинается</span>
с символов &laquo;<span class="cpp">$HELP=</span>&raquo; (начальные пробелы недопустимы),
за которыми следует либо имя файла справки для этого блока (путь указывается относительно
<a href="um_2_18.htm#light_ref13" title="Папка документации">стандартной папки документации</a> RDS), либо имя файла справки,
знак вертикальной черты (&laquo;|&raquo;), и имя темы. Пробелы до и после вертикальной черты
недопустимы. Имя темы &ndash; это либо имя &laquo;якоря&raquo; в файле справки, если этот файл имеет
формат <span id="light_ref15">html</span>, либо имя темы в специальном файле справки
RDS (&laquo;<span class="file"><span id="light_ref16">.ui</span></span>&raquo;), формат котрого описан
в <a href="um_2_16_2.htm#ref16" title="Формат файла ui">&sect;2.16.2</a>.</p>

<p>Папки библиотеки тоже могут иметь всплывающие подсказки &ndash; например, для
библиотеки &laquo;<span class="file">Library1</span>&raquo; файл с текстом подсказки должен называться
&laquo;<span class="file">Library1.txt</span>&raquo;. Подсказки к вкладкам панели блоков не выводятся,
даже если в папке панели будут присутствовать соответствующие им файлы
&laquo;<span class="file">.txt</span>&raquo;. Указание на файл справки в файлах
&laquo;<span class="file">.txt</span>&raquo; для библиотек не допускается.</p>

<p>В библиотеке блоки и вложенные папки библиотек всегда сортируются по имени в
алфавитном порядке, сначала &ndash; папки, потом &ndash; блоки.
<span id="ref17">Порядок</span> вкладок на
панели блоков и блоков на каждой вкладке задается специальными текстовыми файлами
&laquo;<span class="file"><span id="light_ref17">order.lst</span></span>&raquo;, в которых
указываются имена вкладок или файлов блоков слева направо в том порядке, в котором
они изображаются на панели: по одному имени на строке. Файл
&laquo;<span class="file">order.lst</span>&raquo;, задающий порядок вкладок, размещается в самой папке
панели блоков, а файл, задающий порядок блоков на вкладке &ndash; внутри папки этой
вкладки (такой файл можно видеть в содержимом папки-вкладки на
<a href="#pic1" title="Одна и та же папка-вкладка панели блоков в окне библиотеки RDS (вверху) и в проводнике Windows (внизу)">рис.&nbsp;268</a> внизу.
<span id="ref18">Все</span>
эти файлы должны иметь кодировку <span id="light_ref18">CP1251</span>. Если в файле
&laquo;<span class="file">order.lst</span>&raquo; будет отсутствовать имя какой-либо существующей папки
или файла блока, эта вкладка или этот блок все равно отобразятся на панели в самом
конце списка.</p>

<p><span id="ref19">Если</span> для папки панели блоков задано
<a href="um_2_16_3.htm#ref1" title="Имя папки и название вкладки панели блоков">независимое название</a>, это название будет храниться в
кодировке CP1251 в текстовом файле
&laquo;<span class="file"><span id="light_ref19">libname.lst</span></span>&raquo; внутри этой папки.
При переименовании папки содержимое этого файла, очевидно, изменяться не будет, а, значит, не
будет изменяться и название вкладки на панели.</p>

<p>Знание структуры файлов и папок, описывающих библиотеку и панель блоков, может
пригодиться пользователю не только для редактирования библиотек без использования
RDS, но и для размещения в удобном для него месте библиотечных блоков,
полученных от их разработчиков уже после установки RDS.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_16_3.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_17.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_16_4">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
