<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.18. Настройки RDS</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p>&sect;2.18. Настройки RDS</p>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_17.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_19_1.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_18">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3>&sect;2.18. Настройки RDS</h3>
<p class="abstract">Описываются общие настройки RDS и окно для их задания.</p>


<p><span id="ref1">Настройки</span>
<span id="ref2">RDS</span>

управляют поведением всей программы в целом и не зависят от
загруженной схемы. RDS ничего не записывает в реестр Windows, настройки хранятся в
файле &laquo;<span class="file"><span id="light_ref1">rds.ini</span></span>&raquo; в
папке настроек. Чаще всего
<span id="light_ref2">папка настроек</span> совпадает с папкой установки
RDS (то есть &laquo;<span class="file">rds.exe</span>&raquo; и файл настроек
&laquo;<span class="file">rds.ini</span>&raquo; обычно находятся в одной папке), а все остальные важные для
RDS папки с изменяемым содержимым (папку библиотек и панели блоков, папку шаблонов
и т.п.) размещают внутри нее. В этом случае RDS становится переносимым приложением
&ndash; всю папку установки можно свободно перемещать с места на место или даже с
машины на машину без потери работоспособности, поскольку местоположение всех важных папок
будет определяться относительно &laquo;<span class="file">rds.exe</span>&raquo;. Тем не менее, возможны и
<a href="#pic4" title="Окно настроек: вкладка папки">другие варианты установки</a>.</p>

<p>Для настройки RDS необходимо вызвать пункт
<a href="um_2_1.htm" title="&sect;2.1. Главное окно и главное меню">главного меню</a>
&laquo;<span class="menu">сервис | настройки RDS</span>&raquo;, при этом откроется окно настроек с
несколькими вкладками
(<a href="#pic1" title="Окно настроек: вкладка общие">рис.&nbsp;277</a>).</p>

<div class="pic"><div class="container" id="pic1">
<img src="../img/Setup_General.png" width="578" height="422" alt="Окно настроек: вкладка общие" />
<p id="light_pic1">Рис.&nbsp;277. Окно настроек: вкладка &laquo;<span class="menu">общие</span>&raquo;</p>
</div></div>


<p>На вкладке &laquo;<span class="menu">общие</span>&raquo; задаются общие параметры интерфейса
пользователя RDS:</p>

<ul>
  <li>Флажок &laquo;<span class="menu">разрешить отмену последних действий</span>&raquo; &ndash; включает запись
  всех действий пользователя при редактировании схемы. Число запоминаемых действий
  задается в отдельном поле ввода. Если отмена действий разрешена, пользователь может
  последовательно отменить указанное число выполненных операций при помощи пункта
  главного меню &laquo;<span class="menu">система | отмена</span>&raquo; или сочетания клавиш
  <span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">Z</span>. По умолчанию этот флажок включен, и выключать его
  не рекомендуется: возможность отмены неправильного действия существенно облегчает
  редактирование.</li>

  <li>Поле ввода &laquo;<span class="menu">размер предыстории</span>&raquo; позволяет задать количество
  последних загружавшихся файлов схем, имена которых RDS будет запоминать и
  показывать в меню &laquo;<span class="menu">файл</span>&raquo; или в дополнительном меню, появляющемся при
  нажатии на правую часть кнопки загрузки на панели общего назначения в главном окне
  (<a href="#pic2" title="Список последних загружавшихся файлов в меню файл (а) и в дополнительном меню кнопки загрузки (б)">рис.&nbsp;278</a>). В этих меню последняя
  загруженная схема будет находиться на первом месте, предпоследняя &ndash; на
  втором, и т.д. Если какая-либо схема загружалась недавно, найти ее в меню
  предыстории обычно проще, чем в обычном диалоге загрузки среди всех файлов на
  диске. <span id="ref3">Сам</span> список загружавшихся файлов хранится
  в файле &laquo;<span class="file"><span id="light_ref3">history.dat</span></span>&raquo; в
  папке настроек RDS.</li>
</ul>

<div class="pic"><div class="container" id="pic2">
<div class="multi" id="pic2_0"><img src="../img/History1.png" width="310" height="345" alt="Список последних загружавшихся файлов в меню файл (а) и в дополнительном меню кнопки загрузки (б) 1" /><p id="light_pic2_0">(а)</p></div><div class="multi" id="pic2_1"><img src="../img/History2.png" width="310" height="158" alt="Список последних загружавшихся файлов в меню файл (а) и в дополнительном меню кнопки загрузки (б) 2" /><p id="light_pic2_1">(б)</p></div><p id="light_pic2">Рис.&nbsp;278. Список последних загружавшихся файлов в меню &laquo;<span class="menu">файл</span>&raquo; (а)<br />и в дополнительном меню кнопки загрузки (б)</p>
</div></div>


<ul>
  <li>Флажок &laquo;<span class="menu">не показывать заставку</span>&raquo; позволяет отключить окно заставки
  RDS, появляющееся на экране при запуске программы. Окно заставки не блокирует
  действия пользователя и само пропадает с экрана через несколько секунд, его
  отключение никак не влияет на работу RDS.</li>

   <li>Флажок &laquo;<span class="menu">предупреждать об изменении параметров библиотечных блоков</span>&raquo;,
   включенный по умолчанию, разрешает предупреждение пользователя
   (см.
   рис.
   <a href="um_2_9_1.htm#pic2" title="Вкладка предупреждение окна параметров библиотечного блока">96</a> и
   <a href="um_2_15_3.htm#pic1" title="Окно групповой установки: вкладка предупреждение">236</a>) о том, что
   неправильное изменение параметров библиотечных блоков может привести к их
   неработоспособности.
   Библиотечным в RDS считается блок, к которому подключена работающая
   <a href="um_1_2.htm#ref3" title="Модель блока">функция модели</a>, не
   <a href="um_1_8.htm" title="&sect;1.8. Автоматическая компиляция моделей блоков">компилируемая автоматически</a>.</li>

   <li>Флажок &laquo;<span class="menu">перемещать конечные точки связей вместе с блоками и шинами</span>&raquo;, включенный по умолчанию,
   управляет тем, как будут перемещаться точки соединения связей с блоками и шинами при перемещении этих блоков и
   шин пользователем. При включенном флажке перемещение блока или шины будет приводить к тому, что все конечные
   точки присоединенных к перемещаемому объекту связей будут перемещаться вместе с ним, а при перемещении связи ее
   конечные точки будут оставаться на месте (см. <a href="um_2_7_2.htm#pic10" title="Перемещение связи: узлы соединения с блоками остаются на месте">рис.&nbsp;57</a>). Таким образом,
   внешний вид связи при перемещении будет искажаться, но все точки подключения будут сохранять свое положение
   относительно изображений блоков и шин. При выключенном флажке RDS будет стараться сохранить внешний вид
   связи, оставляя точки в покое при перемещении блоков или перемещая их вместе со связями, до тех пор, пока
   это возможно (если дальнейшее перемещение приведет к тому, что точка &laquo;оторвется&raquo; от
   изображения блока или связи, эта точка начнет перемещаться). Установка этого флажка не влияет на
   связность схемы, соединения связей с блоками и шинами при их перемещении никогда не разрываются. Пользователю
   имеет смысл подобрать такую установку этого флажка, при которой редактирование схемы будет для него
   более удобным.</li>

   <li>Флажок &laquo;<span class="menu">разрешить перемещение отдельных отрезков связей</span>&raquo;, включенный по умолчанию, позволяет
   пользователю в режиме редактирования перемещать отдельные отрезки выделенной связи: для этого используются специальные
   маркеры в форме ромбов (см. <a href="um_2_7_2.htm#pic12" title="Последовательность перемещения отрезка связи">рис.&nbsp;59</a>). В ранних версиях
   RDS перемещение отрезков не было предусмотрено, и маркеры на отрезках не изображались, поэтому этот режим
   сделан отключаемым, чтобы пользователи могли вернуть привычный им внешний вид выделенных связей.</li>
   
   <li>Флажок &laquo;<span class="menu">всегда запоминать изменения в конфигурации слоев</span>&raquo;, сброшенный по умолчанию, 
   отключает возможность внесения в <a href="um_2_12.htm#ref1" title="Конфигурации слоев">конфигурации слоев</a>
   (см.&nbsp;<a href="um_2_12.htm" title="&sect;2.12.1. Использование слоев">&sect;2.12.1</a> временных изменений. При этом в 
   <a href="um_2_12.htm#pic2_1" title="Окно редактора слоев: вкладки конфигурации (а) и слои (б)">окне</a>
   редактора слоев не будет флажка &laquo;<span class="menu">запоминать состояние</span>&raquo;, и все изменения 
   в параметрах слоев будут всегда запоминаться (так вели себя старые версии RDS).</li>
</ul>

<p class="noindent"><span id="light_ref4">На вкладке &laquo;<span class="menu">сохранение</span>&raquo; окна настроек</span>
(<a href="#pic3" title="Окно настроек: вкладка сохранение">рис.&nbsp;279</a>) задаются параметры сохранения схем в файлы.</p>

<div class="pic"><div class="container" id="pic3">
<img src="../img/Setup_Save.png" width="578" height="422" alt="Окно настроек: вкладка сохранение" />
<p id="light_pic3">Рис.&nbsp;279. Окно настроек: вкладка &laquo;<span class="menu">сохранение</span>&raquo;</p>
</div></div>


<ul>
  <li>Флажок &laquo;<span class="menu">использовать отступы в текстовом формате схем</span>&raquo; &ndash; разрешает выделять 
  в файлах схем группы данных при помощи начальных пробелов. RDS сохраняет схемы 
  (файлы с расширением &laquo;<span class="file">rds</span>&raquo;) в собственном текстовом формате с иерархическими 
  блоками данных, ограниченными словами &laquo;begin&raquo;&hellip;&laquo;end&raquo;. 
  Такой файл может быть открыт разработчиком моделей блоков в любом текстовом редакторе для 
  анализа и поиска возможных ошибок: например, если схема с созданной разработчиком моделью 
  загружается неправильно, можно открыть ее файл в текстовом редакторе и разобраться, как 
  модель сохранила данные блока внутри этого файла. По умолчанию блоки данных в файле 
  записываются с иерархическими отступами от левого края для облегчения чтения человеком 
  (на загрузку данных эти отступы не влияют): содержимое каждого блока 
  &laquo;begin&raquo;&hellip;&laquo;end&raquo; сдвинуто на один пробел вправо относительно 
  содержащего его блока. Для уменьшения объема файлов схем можно отключить использование этих 
  отступов.</li>
  
  <li><span id="ref5">Флажок</span>
  &laquo;<span class="menu">создавать резервные копии схем при сохранении</span>&raquo; позволяет при сохранении
  схемы не стирать ее старый файл, а переименовывать его, присваивая ему другое
  расширение. Число таких хранимых <span id="light_ref5">резервных копий</span>
  и их расширение задается в
  отдельных полях ввода. Самая последняя резервная копия получает указанное в
  настройках расширение, более старые &ndash; это же расширение с добавлением числа
  тем большего, чем старше копия. <span id="ref6">Допустим</span>
   например, что в настройках задано хранение трех резервных копий с расширением
   &laquo;<span class="file"><span id="light_ref6">~rds</span></span>&raquo;. Загрузим файл
   &laquo;<span class="file">Dynamic.rds</span>&raquo;, внесем в него первое изменение и сохраним
   схему. Теперь у нас в одной и той же папке есть файлы:
   <ul>
     <li>&laquo;<span class="file">Dynamic.rds</span>&raquo; (измененная схема) и</li>
     <li>&laquo;<span class="file">Dynamic.~rds</span>&raquo; (резервная копия исходной схемы).</li>
   </ul>
   Внесем в схему
   второе изменение и снова сохраним ее &ndash; теперь в папке находится три файла:
   <ul>
     <li>&laquo;<span class="file">Dynamic.rds</span>&raquo; (схема после второго изменения),</li>
     <li>&laquo;<span class="file">Dynamic.~rds</span>&raquo; (схема после первого изменения) и</li>
     <li>&laquo;<span class="file">Dynamic.~rds01</span>&raquo; (схема до редактирования).</li>
   </ul>
   После внесения
   третьего изменения и сохранения схемы появится четыре файла:
   <ul>
     <li>&laquo;<span class="file">Dynamic.rds</span>&raquo; (схема после третьего изменения),</li>
     <li>&laquo;<span class="file">Dynamic.~rds</span>&raquo; (схема после второго изменения),</li>
     <li>&laquo;<span class="file">Dynamic.~rds01</span>&raquo; (схема после первого изменения),</li>
     <li>&laquo;<span class="file">Dynamic.~rds02</span>&raquo; (схема до редактирования).</li>
   </ul>
   При следующих сохранениях схема до редактирования будет потеряна, поскольку уже есть
   три резервных копии, а в трех файлах с расширениями
   &laquo;<span class="file">~rds</span>&raquo;, &laquo;<span class="file">~rds01</span>&raquo; и &laquo;<span class="file">~rds02</span>&raquo;
   будут находиться три последние по времени резервные копии схемы.</li>
   
   <li>Флажок &laquo;<span class="menu">автоматически сохранять схему с заданным интервалом</span>&raquo; включает 
   автосохранение схемы через заданное время после внесения в нее последнего изменения. 
   Использовать этот флажок следует с осторожностью: при его включении пользователь может лишиться 
   возможности выхода из RDS без сохранения изменений в схеме, изменения могут 
   автоматически сохраниться в любой момент. Кроме того, сохранение очень больших схем занимает 
   заметное время, в течение которого действия пользователя блокируются. Следует учитывать, что 
   в режиме расчета автосохранение не работает.</li>
  
</ul>

<p class="noindent"><span id="light_ref7">На вкладке &laquo;<span class="menu">папки</span>&raquo; окна настроек</span>
(<a href="#pic4" title="Окно настроек: вкладка папки">рис.&nbsp;280</a>)
<span id="ref8">можно</span>
задать расположение <span id="light_ref8">основных папок RDS</span>.</p>

<div class="pic"><div class="container" id="pic4">
<img src="../img/Setup_Folders.png" width="578" height="422" alt="Окно настроек: вкладка папки" />
<p id="light_pic4">Рис.&nbsp;280. Окно настроек: вкладка &laquo;<span class="menu">папки</span>&raquo;</p>
</div></div>


<p>Все папки RDS можно условно разделить на две группы: папки с редко изменяемым
и с часто изменяемым содержимым. Файлы в папках с редко изменяемым содержимым меняются
только при установке в RDS новых программных модулей или при обновлении
существующих. К этим папкам относятся:</p>

<ul>
  <li><span id="light_ref9">папка установки</span>
  <span id="ref10">RDS</span>, в которой находится
  главный файл &laquo;<span class="file">rds.exe</span>&raquo; и все дополнительные исполняемые
  файлы (для этой папки принято
  условное обозначение
  &laquo;<span id="light_ref10">$RDS$</span>&raquo;);</li>

  <li><span id="light_ref11">папка стандартных DLL</span>, в
  которой находятся динамически подключаемые библиотеки с моделями стандартных блоков
  и модулями расширения;</li>

  <li><span id="light_ref12">папка с файлами заголовков</span> для
  написания моделей блоков на языках C и C++;</li>

  <li><span id="light_ref13">папка с документацией</span> и
  файлами справки RDS.</li>
</ul>

<p class="noindent">Файлы в папках с часто изменяемым содержимым добавляются,
стираются и переписываются в результате действий пользователя при работе с
RDS. К ним относятся:</p>

<ul>
  <li><span id="light_ref14">папка настроек</span>,
  <span id="ref15">в</span> которой находится главный файл настроек
  &laquo;<span class="file">rds.ini</span>&raquo; и все дополнительные файлы, создаваемые моделями блоков
  и модулями расширения для хранения общих параметров (условное обозначение
  &laquo;<span id="light_ref15">$INI$</span>&raquo;);</li>

  <li><span id="light_ref16">папка <a href="um_2_1.htm" title="&sect;2.1. Главное окно и главное меню">панели блоков</a></span>,
  в которой располагаются файлы блоков, составляющие содержимое указанной панели
  (см. <a href="um_2_16_4.htm" title="&sect;2.16.4. Редактирование библиотек без использования RDS">&sect;2.16.4</a>);</li>

  <li><span id="light_ref17">папка библиотеки блоков</span>, в которой
  хранятся блоки библиотеки;</li>

  <li><span id="light_ref18">папка общих моделей</span>, в которую модули
  <a href="um_1_8.htm" title="&sect;1.8. Автоматическая компиляция моделей блоков">автоматической компиляции</a> могут записывать
  какие-либо модели, общие для всех схем
  (RDS не обрабатывает содержимое этой папки, модули автокомпиляции работают с
  ней самостоятельно);</li>

  <li><span id="light_ref19">папка шаблонов</span>,
  <span id="ref20">в</span>
  которую записываются <span id="light_ref20">шаблоны схем и исходных текстов
  моделей</span> блоков, если таковые имеются;</li>

  <li><span id="light_ref21">папка временных файлов</span>,
  используемых при работе RDS.</li>
</ul>

<p>Все папки, кроме папки установки RDS, могут быть изменены на вкладке
&laquo;<span class="menu">папки</span>&raquo;. Папка установки только отображается, изменить ее при работе
RDS нельзя (можно переместить RDS в другую папку вручную средствами
файловой системы Windows). Условные обозначения &laquo;$RDS$&raquo; (папка установки) и
&laquo;$INI$&raquo; (папка настроек) могут использоваться для указания путей ко
всем остальным папкам &ndash; это позволяет сделать RDS портативным приложением.
Например, в настройках, изображенных на
<a href="#pic4" title="Окно настроек: вкладка папки">рис.&nbsp;280</a>, приведены рекомендованные
настройки папок: пути к папкам стандартных DLL, заголовков и настроек
указаны относительно папки установки RDS (&laquo;<span class="file">$RDS$\Dll</span>&raquo;,
&laquo;<span class="file">$RDS$\Include</span>&raquo; и &laquo;<span class="file">$RDS$\</span>&raquo; соответственно,
папка настроек в данном случае совпадает с папкой установки), а все остальные
&ndash; относительно папки настроек (&laquo;<span class="file">$INI$\&hellip;</span>&raquo;). Таким образом,
если переместить всю папку RDS целиком, никаких корректировок в настройки папок
вносить не придется, и работоспособность всей системы не будет нарушена.</p>

<p>Разработчики рекомендуют установку RDS именно указанным выше образом, при
котором все папки находятся внутри папки установки. Однако, если по каким-либо
причинам в папку установки RDS нет доступа по записи (например, она находится
на устройстве с защитой от записи или в папке &laquo;<span class="file">Program Files</span>&raquo; в
Windows Vista), можно разместить папку настроек в другом месте, а все остальные
папки с часто изменяемым содержимым &ndash; внутри нее, указав пути к ним с
использованием символического обозначения &laquo;$INI$&raquo;. Тем не менее,
гораздо лучше выбрать для установки RDS папку, запись в которую разрешена
&ndash; например, внутри папки &laquo;<span class="file">Мои Документы</span>&raquo; или в корне
какого-либо дополнительного диска.</p>

<p><span id="light_ref22">На вкладке &laquo;<span class="menu">обновление окон</span>&raquo;</span>
(<a href="#pic5" title="Окно настроек: вкладка обновление окон">рис.&nbsp;281</a>)
<span id="ref23">задаются</span>
параметры используемого в RDS <span id="light_ref23">алгоритма подстройки частоты обновления
окон</span> в <a href="um_1_3.htm#ref3" title="Режим расчета">режиме расчета</a>, позволяющего снижать нагрузку на
систему за счет временного уменьшения этой частоты.</p>

<div class="pic"><div class="container" id="pic5">
<img src="../img/Setup_Refresh.png" width="578" height="422" alt="Окно настроек: вкладка обновление окон" />
<p id="light_pic5">Рис.&nbsp;281. Окно настроек: вкладка &laquo;<span class="menu">обновление окон</span>&raquo;</p>
</div></div>


<p>Если флажок &laquo;<span class="menu">уменьшать частоту обновления</span>&raquo; на этой вкладке
выключен, алгоритм подстройки частоты использоваться не будет, и в режиме
расчета все окна подсистем будут обновляться с частотой,
<a href="um_2_11_4.htm#pic2" title="Вкладка общие окна параметров подсистемы">указанной в их параметрах</a>. Если
же флажок включен, можно задать для алгоритма интервал корректировки в миллисекундах
(на <a href="#pic5" title="Окно настроек: вкладка обновление окон">рисунке</a> &ndash; 1000 мс, то есть одна
секунда) и два граничных значения затрат процессорного времени на обновление окон в
процентах: максимально допустимые (на рисунке &ndash; 50%), и неснижаемые (на рисунке
&ndash; 30%) затраты. При значениях, указанных на рисунке, алгоритм будет работать
следующим образом: в режиме расчета каждую секунду будет измеряться общее время,
затраченное RDS на рисование содержимого всех открытых окон. Если это время
будет занимать более 50% прошедшей секунды, частоты обновления всех окон будут
пропорционально снижены так, чтобы уложиться в 50% времени. Частоты обновления
останутся низкими до тех пор, пока в очередную секунду суммарное время обновления
окон не станет ниже 30% (это может произойти, например, если закрылось несколько
окон со сложными изображениями). В этом случае RDS попытается вернуть сниженные
частоты обратно к их исходным значениям.</p>

<p>Использование алгоритма подстройки частоты ухудшает плавность анимации в окнах, но
на медленных машинах этот алгоритм позволяет повысить скорость расчета: это может
помочь в тех случаях, когда моделирование не успевает за реальным временем.</p>

<p><span id="light_ref24">На вкладке &laquo;<span class="menu">совместимость и быстродействие</span>&raquo;</span>
(<a href="#pic6" title="Окно настроек: вкладка совместимость и быстродействие">рис.&nbsp;282</a>)
можно изменить поведение RDS для устранения некоторых редко
встречающихся ошибок.</p>

<div class="pic"><div class="container" id="pic6">
<img src="../img/Setup_Compatibility.png" width="578" height="422" alt="Окно настроек: вкладка совместимость и быстродействие" />
<p id="light_pic6">Рис.&nbsp;282. Окно настроек: вкладка &laquo;<span class="menu">совместимость и быстродействие</span>&raquo;</p>
</div></div>


<p>Флажок &laquo;<span class="menu">производить расчет в главном потоке программы</span>&raquo; переводит
RDS из стандартного двухпоточного режима в однопоточный. В двухпоточном режиме
интерфейс пользователя обслуживается в главном потоке, а
<a href="um_1_3.htm#ref4" title="Такт расчета">циклический вызов моделей блоков</a>
в режиме расчета &ndash; в дополнительном. В однопоточном режиме циклический вызов
моделей выполняется в главном потоке, прерываясь время от времени для обслуживания
интерфейса (отработки реакции на клавиатуру и мышь и т.п.). Однопоточный режим может
дать небольшой прирост производительности на старых машинах, но его не следует
включать без крайней необходимости: он может приводить к задержкам расчета при
различных действиях пользователя.</p>

<p>Флажок &laquo;<span class="menu">запретить потоку расчета переходить в режим ожидания</span>&raquo; не
дает потоку расчета останавливаться и ждать внешнего события в тех случаях, когда
в течение нескольких тактов расчета ни один блок не сработал (в однопоточном режиме
этот флажок игнорируется). Переход в режим ожидания позволяет снизить нагрузку на
систему, но, при неправильно написанных моделях блоков, он может привести к
периодическим остановкам расчета. Модель блока, написанная согласно всем требованиям
<a href="pm_index.htm" title="Руководство программиста">руководства программиста</a>, не требует включения этого флажка.</p>

<p>Флажок &laquo;<span class="menu">использовать только стандартные курсоры Windows</span>&raquo;, как
следует из его названия, отключает все используемые в RDS формы курсора мыши,
кроме стандартных, встроенных в Windows. Его следует включать только в том
случае, если в каких-либо режимах курсор пропадает с экрана.</p>

<p>Флажок &laquo;<span class="menu">запретить масштабы, в которых возможно некорректное отображение</span>&raquo;
ограничивает допустимые масштабы
<a href="um_2_3.htm" title="&sect;2.3. Элементы и меню окна подсистемы">окон подсистем</a>
так, чтобы длина и ширина рабочего поля с учетом масштаба не превышали 32767
точек экрана &ndash; иногда при этом изображение схемы может искажаться. На практике
такое встречается редко &ndash; избыточно крупный масштаб 1000% при рабочем поле
2000 на 2000 точек (это размер рабочего поля по умолчанию) делает видимую ширину и
длину поля равными 20000 точкам, то есть ниже указанного порога.</p>

<p>Флажок &laquo;<span class="menu">проверять схему при загрузке</span>&raquo;, включенный по умолчанию,
разрешает RDS выполнять проверку структуры каждого загружаемого файла схемы.
<span id="ref25">Файлы</span>
схем в RDS имеют текстовый формат и могут редактироваться как
программами, созданными сторонними разработчиками, так и, при желании, самим
пользователем в любом текстовом редакторе, поддерживающем кодировку
<span id="light_ref25">CP1251</span>. Такие отредактированные файлы весьма
желательно проверять при загрузке, поскольку нарушения в их формате могут
привести к неожиданным ошибкам. Проверка при загрузке, включенная по умолчанию,
может замедлить загрузку очень больших файлов (более пяти тысяч блоков), поэтому
если пользователь работает с такими схемами и не редактирует файлы вручную или
сторонними программами, эту проверку можно отключить. При работе с файлами
нормального размера проверка не дает заметного замедления работы, и ее лучше
оставить включенной.</p>

<p><span id="ref26">На</span>
вкладке &laquo;<span class="menu"><span id="light_ref26">сеть &ndash; TCP</span></span>&raquo;
окна настроек
(<a href="#pic7" title="Окно настроек: вкладка сеть &ndash; TCP">рис.&nbsp;283</a>)
задаются общие параметры встроенного в RDS
<a href="um_1_6.htm#ref6" title="Сетевой обмен в RDS">сетевого модуля</a>.</p>

<div class="pic"><div class="container" id="pic7">
<img src="../img/Setup_TCP.png" width="578" height="422" alt="Окно настроек: вкладка сеть &ndash; TCP" />
<p id="light_pic7">Рис.&nbsp;283. Окно настроек: вкладка &laquo;<span class="menu">сеть &ndash; TCP</span>&raquo;</p>
</div></div>


<p><span id="ref27">Схемы</span>, загруженные в RDS на
разных машинах, могут обмениваться данными по
сети, если одна из запущенных копий RDS возьмет на себя функции
<span id="light_ref27">сервера</span> и будет управлять обменом данными между остальными.
<span id="ref28">Для</span>
этого на выбранной в качестве сервера машине можно либо запустить
&laquo;<span class="file">rds.exe</span>&raquo; с параметром командной строки
&laquo;<span id="light_ref28">/server</span>&raquo;, либо добавить в
схему, загруженную на этой машине, специальный блок, делающий сервером тот
&laquo;<span class="file">rds.exe</span>&raquo;, в котором загружена эта схема. В любом случае,
в настройках RDS на всех остальных машинах необходимо указать адрес этого
сервера и порт, к которому на этом сервере нужно обращаться. Таким образом, если
необходимо создать распределенную схему, части которой будут находиться на разных
машинах, следует выполнить следующие действия:</p>

<ol>
  <li>Выбрать самую слабо загруженную машину в сети, которая станет сервером. Установить
  на ней RDS, в настройках RDS разрешить обмен данными по сети и ввести
  порт, который будет использовать этот сервер (свободный номер порта можно узнать
  у системного администратора).</li>

  <li>Запустить на машине-сервере &laquo;<span class="file">rds.exe</span>&raquo; с параметром командной
  строки &laquo;/server&raquo;, или запустить на ней RDS обычным способом и
  загрузить схему со специальным серверным блоком.</li>

  <li>Установить RDS на остальные машины сети, которые будут использоваться
  для распределенной схемы, в настройках RDS разрешить обмен данными по сети
  и указать адрес выбранного сервера (его тоже можно узнать у системного
  администратора) и введенный в его настройках порт. Теперь блоки в схемах на
  этих машинах смогут общаться друг с другом через сервер.</li>
</ol>

<p>Чтобы правильно настроить параметры сети в RDS, необходимо иметь общее
представление о работе сетей, IP-адресах, портах и т.п. Здесь сетевые настройки
будут перечислены очень кратко &ndash; в большинстве случаев, для успешной
настройки сети в RDS достаточно выполнить три указанных выше шага.</p>

<p>Флажок &laquo;<span class="menu">разрешить блокам обмениваться данными по сети</span>&raquo; на вкладке
&laquo;<span class="menu">сеть &ndash; TCP</span>&raquo; управляет общим разрешением сетевых функций
RDS: если он не установлен, стандартные библиотечные блоки не смогут ни
передавать данные по сети, ни принимать их (это может не касаться специально
разработанных блоков, модели которых работают с сетью напрямую, минуя RDS).
<span id="ref29">Стандартные</span>
<span id="ref30">сетевые</span>
функции RDS используют для работы протоколы
<span id="light_ref29">TCP</span> и <span id="light_ref30">UDP</span>,
причем TCP используется в качестве основного протокола &ndash; если запретить
сетевые функции на вкладке &laquo;<span class="menu">сеть &ndash; TCP</span>&raquo;, вкладка
&laquo;<span class="menu"><a href="#pic8" title="Окно настроек: вкладка сеть &ndash; UDP">сеть &ndash; UDP</a></span>&raquo; автоматически
отключится (UDP используется только для передачи самих данных, вся управляющая
информация всегда передается по TCP).</p>

<p>В поле ввода &laquo;<span class="menu">сервер по умолчанию</span>&raquo; вводится имя или IP-адрес
сервера, к которому будут обращаться блоки в схеме, если в их параметрах явно
не указан другой сервер. Как правило, конкретный сервер в параметрах блоков не
указывают, что позволяет вводить адрес сервера только в настройках RDS,
не трогая настройки каждого блока при смене сервера. В поле ввода
&laquo;<span class="menu">порт по умолчанию</span>&raquo; вводится номер порта сервера. Этот номер
используется двумя способами. Во-первых, блоки в схеме, загруженной в эту копию
RDS, будут обращаться к этому порту на указанном сервере, если в их настройках
явно не указан другой номер порта. Во-вторых, если запустить данную копию
RDS с параметром командной строки &laquo;/server&raquo;, она станет
выделенным сервером, работающим через этот порт (параметры командной строки
RDS подробно описаны в
<a href="app_index.htm#light_htm:app_v" title="Приложение В. Параметры командной строки RDS">приложении В</a>).</p>

<p>Флажок &laquo;<span class="menu">передавать мелкие пакеты немедленно</span>&raquo; запрещает системе
собирать небольшие пакеты данных вместе, чтобы потом передать их одним большим
пакетом. Сборка пакетов вместе улучшает работу сети, но при этом пакеты данных
передаются неравномерно, что может быть критично в распределенной схеме, в
которой в этих пакетах постоянно передаются текущие значения каких-либо
изменяющихся со временем переменных.</p>

<p>Поле ввода &laquo;<span class="menu">ожидать ответа сервера не более&hellip;</span>&raquo; позволяет
ввести интервал времени в секундах, по истечении которого RDS перестает
ждать ответ от сервера и продолжает передачу данных. Обычно RDS не ждет
ответа от сервера, передав ему данные, но модель блока сетевого обмена может
запросить такой ответ &ndash; при этом дальнейшая передача данных прекращается до
получения этого ответа. Если ответ не пришел в течение указанного времени,
передача будет продолжена несмотря на это.</p>

<p>Поле ввода &laquo;<span class="menu">восстанавливать разорванное соединение через&hellip;</span>&raquo;
задает интервал в секундах, по истечении которого RDS предпримет повторную
попытку соединения с сервером, если предыдущая попытка не удалась. При разрыве
уже установленного соединения RDS будет пытаться восстановить его с
заданной периодичностью. Отключить это поведение нельзя: пока в схеме есть
хотя бы один блок, требующий обмена данными по сети, RDS будет пытаться
связаться с сервером.</p>

<p><span id="ref31">Флажок</span>
&laquo;<span class="menu"><span id="light_ref31">сервер может устанавливать связь только с указанными клиентами</span></span>&raquo;
влияет на поведение RDS только в режиме сервера: если флажок включен,
сервер будет отклонять соединения со всеми машинами, адреса которых не находятся в
списке под флажком. Для добавления и удаления адресов в списке служат кнопки
справа от него.</p>

<p>Установка последнего флажка вкладки,
&laquo;<span class="menu">открывать окно сетевых соединений при установке связи</span>&raquo;, приведет к тому,
что при соединении с сервером автоматически откроется
<a href="um_2_20.htm" title="&sect;2.20. Окно сетевых соединений">информационное окно</a> с
параметрами этого соединения. Это окно полезно при отладке схем &ndash; в нем видно,
с каким именно сервером установлено соединение, какие
<a href="um_1_6.htm#ref7" title="Канал сервера">каналы передачи данных</a>
используются и т.п. Его всегда можно открыть вручную пунктом меню
&laquo;<span class="menu">окна | сетевые соединения</span>&raquo;, поэтому, если схема отлажена и работает
без проблем, этот флажок можно сбросить.</p>

<p><span id="light_ref32">Вкладка &laquo;<span class="menu">сеть &ndash; UDP</span>&raquo;</span>
(<a href="#pic8" title="Окно настроек: вкладка сеть &ndash; UDP">рис.&nbsp;284</a>)
<span id="ref33">позволяет</span>
включить или выключить использование протокола
<span id="light_ref33">UDP</span> для передачи данных между блоками схем на
разных машинах. Этот протокол используется в RDS только вместе с TCP, поэтому,
если на вкладке
&laquo;<span class="menu"><a href="#pic7" title="Окно настроек: вкладка сеть &ndash; TCP">сеть &ndash; TCP</a></span>&raquo; запрещена передача
данных, эта вкладка тоже будет не активна.</p>

<div class="pic"><div class="container" id="pic8">
<img src="../img/Setup_UDP.png" width="578" height="422" alt="Окно настроек: вкладка сеть &ndash; UDP" />
<p id="light_pic8">Рис.&nbsp;284. Окно настроек: вкладка &laquo;<span class="menu">сеть &ndash; UDP</span>&raquo;</p>
</div></div>


<p>Флажок &laquo;<span class="menu">разрешить использование UDP</span>&raquo;, как и следует из его
названия, разрешает RDS использовать протокол UDP для ускоренной передачи
данных (в некоторых случаях он работает быстрее TCP).</p>

<p>Флажок &laquo;<span class="menu">фиксированный порт UDP</span>&raquo; позволяет назначить для данного
протокола жестко зафиксированный номер порта (свободный номер порта можно узнать
у системного администратора). Если он не установлен, номер порта будет выбран
автоматически. В большинстве случаев флажок можно не устанавливать, однако если
какие-либо порты на машине заблокированы (или, наоборот, разрешено использование
только нескольких портов), номер порта лучше задать вручную так, чтобы он попал
в разрешенный список или диапазон.</p>

<p>Поле ввода &laquo;<span class="menu">максимальный размер блока</span>&raquo; позволяет ограничить
размер пакета данных, передаваемого через UDP: если требуется передача большего объема
данных, RDS автоматически разобьет эти данные на несколько пакетов.</p>

<p>Нажатие кнопки &laquo;<span class="menu">OK</span>&raquo; запишет измененные параметры в файл
&laquo;<span class="file">rds.ini</span>&raquo; и закроет окно настроек. Отменить изменение
параметров нельзя.</p>

<p>Следует иметь в виду, что если папка настроек не совпадает с папкой установки
RDS (см. <a href="#pic4" title="Окно настроек: вкладка папки">рис.&nbsp;280</a>), в системе
будет сразу два файла &laquo;<span class="file">rds.ini</span>&raquo;: один &ndash; в папке установки
(в нем будет указан путь к папке настройки), а другой &ndash; в папке настройки
(в нем будут записаны все остальные параметры).</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_17.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_19_1.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_18">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
