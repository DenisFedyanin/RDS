<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.2. Пример загрузки готовой схемы и ее расчета</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p>&sect;2.2. Пример загрузки готовой схемы и ее расчета</p>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_1.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_3.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_2">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3>&sect;2.2. Пример загрузки готовой схемы и ее расчета</h3>
<p class="abstract">Описывается работа с одной из готовых схем-примеров, входящих в состав RDS.</p>


<p>Для того, чтобы получить представление о работе RDS в целом,
загрузим одну из готовых схем-примеров.
<span id="ref2"><span id="ref1">Запустив RDS</span></span>, выберем пункт
главного меню &laquo;<span class="menu">файл | загрузить</span>&raquo; (вместо этого можно нажать
соответствующую ему кнопку панели общего назначения или сочетание клавиш
<span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">O</span>)
и выберем в появившемся диалоге открытия файла схему
&laquo;<span class="file"><span id="light_ref1">Dynamic.rds</span></span>&raquo;,
располагающуюся в папке
&laquo;<span class="file"><span id="light_ref2">Samples</span></span>&raquo;
внутри папки RDS. Выбранная схема будет
загружена в память, после чего откроется окно ее корневой подсистемы
(в данном случае, схема состоит из единственной подсистемы – корневой),
на панели открытых окон в главном окне RDS появится кнопка
&laquo;Система&raquo;, соответствующая этому окну, а в главное меню
добавятся пункты &laquo;<span class="menu">Редактирование</span>&raquo; и &laquo;<span class="menu">Подсистема</span>&raquo;
(<a href="#pic1" title="Окна RDS сразу после загрузки схемы">рис.&nbsp;19</a>).
Заголовок главного окна RDS тоже изменится &ndash; в нем появится имя
файла загруженной схемы.</p>

<div class="pic"><div class="container" id="pic1">
<img src="../img/MainWindowDynamic.png" width="777" height="572" alt="Окна RDS сразу после загрузки схемы" />
<p id="light_pic1">Рис.&nbsp;19. Окна RDS сразу после загрузки схемы</p>
</div></div>


<p>Не будем сейчас подробно останавливаться на добавленных пунктах главного меню
и различных вспомогательных элементах окна подсистемы (они будут описаны в
<a href="um_2_3.htm" title="&sect;2.3. Элементы и меню окна подсистемы">&sect;2.3</a>), сконцентрируемся на работе с
загруженной схемой. Схема отображается на рабочем поле окна подсистемы.
Она состоит из блоков и связей, соединяющих эти блоки между собой.
Блоки схемы имеют разное назначение и могут выглядеть по-разному, их внешний
вид может изменяться в процессе работы или оставаться неизменным. В схеме на
<a href="#pic1" title="Окна RDS сразу после загрузки схемы">рис.&nbsp;19</a> в правой части окна
находится блок-график с координатной сеткой &ndash; на нем будет рисоваться график
зависимости его входной величины &laquo;<span class="rdsvar">Value</span>&raquo; от времени. Вход
&laquo;<span class="rdsvar">Value</span>&raquo; графика соединен связью с выходом &laquo;<span class="rdsvar">y</span>&raquo;
блока &laquo;<span class="rdsvar">w13dyn1</span>&raquo;, который моделирует поведение колебательного
звена &ndash; одного из стандартных блоков, рассматриваемых в теории управления.
Отдельная ветвь этой же связи присоединена к входу &laquo;<span class="rdsvar">x2</span>&raquo; блока
вычитания &ndash; круглого блока с одним черным и тремя белыми секторами.
Колебательное звено &laquo;<span class="rdsvar">w13dyn1</span>&raquo; соединено связями еще с четырьмя
блоками &ndash; тремя полями ввода, служащими для задания значений его
параметров &laquo;<span class="rdsvar">K</span>&raquo; &laquo;<span class="rdsvar">T</span>&raquo; и &laquo;<span class="rdsvar">Ksi</span>&raquo;,
и сумматором (круглый блок с четырьмя белыми секторами), формирующим значение
на входе &laquo;<span class="rdsvar">x</span>&raquo; этого колебательного звена. В схему также входят
другие блоки: интегратор, умножение на константу, блок вычитания (краткие
пояснения назначения блоков приведены на
<a href="#pic2" title="Блоки загруженной схемы">рис.&nbsp;20</a>).
<span id="ref3">В левой верхней части схемы</span>
размещается блок с названием &laquo;<span class="rdsvar">RTP1</span>&raquo;,
который не соединен связями с другими блоками.
Это блок управления динамическим расчетом, так называемый
&laquo;<span id="light_ref3">планировщик</span>&raquo;,
отвечающий за течение времени в схеме.
<span id="ref4">Несмотря на то</span>, что от планировщика не
отходит ни одной связи, другие блоки схемы могут получать от него текущее
значение времени непосредственно, с помощью доступа к созданной им
<a href="um_1_5.htm" title="&sect;1.5. Динамические переменные">динамической переменной</a>
&laquo;<span class="rdsvar"><span id="light_ref4">DynTime</span></span>&raquo;.
Поведение блоков в схеме может быть весьма разнообразным, и некоторые механизмы
их взаимодействия скрыты от пользователя.</p>

<div class="pic"><div class="container" id="pic2">
<img src="../img/DynamicSchemeExplained.png" width="746" height="401" alt="Блоки загруженной схемы" />
<p id="light_pic2">Рис.&nbsp;20. Блоки загруженной схемы</p>
</div></div>


<p><span id="ref5">Сразу</span>
после загрузки схемы RDS находится в
<span id="light_ref5"><a href="um_1_3.htm" title="&sect;1.3. Режимы работы RDS">режиме</a>
редактирования</span> &ndash;
об этом сигнализирует
<img class="right" src="../img/Button_edit_pressed.png" width="25" height="25" alt="Кнопка: режим редактирования" />
нажатая <a href="um_2_1.htm#light_ref28" title="Кнопки главного окна">кнопка</a> этого режима на панели общего назначения,
а также галочка около пункта главного меню &laquo;<span class="menu">система | режим редактирования</span>&raquo;
(разумеется, она будет видна, только если открыть подменю &laquo;<span class="menu">система</span>&raquo;).
В режиме редактирования можно изменять схему и добавлять в нее блоки и связи,
но для взаимодействия с блоками (например, для изменения значений в полях ввода)
необходимо перейти в режим моделирования или расчета. Не будем сразу начинать
расчет, сначала подадим на вход схемы (то есть введем в самое левое поле ввода,
подключенное к входу &laquo;<span class="rdsvar">x1</span>&raquo; блока вычитания, см.
<a href="#pic2" title="Блоки загруженной схемы">рис.&nbsp;20</a>)
значение &laquo;2&raquo; вместо значения &laquo;1&raquo;, которое подается
на вход сейчас.
<span id="ref7"><span id="ref6">Для этого</span></span>
<span id="light_ref7">перейдем</span> в
<span id="light_ref6">режим моделирования</span>, выбрав пункт меню
&laquo;<span class="menu">система | режим моделирования</span>&raquo; (вместо этого можно нажать клавишу
<span class="keys">F3</span> или соответствующую этому пункту
<img class="right" src="../img/Button_calc.png" width="25" height="25" alt="Кнопка: режим моделирования" />
кнопку на панели
главного окна). Теперь можно ввести новое значение в поле ввода на входе
схемы &ndash; нужно щелкнуть на нем левой кнопкой мыши, ввести с клавиатуры
значение &laquo;2&raquo; и нажать клавишу <span class="keys">Enter&nbsp;&crarr;</span>.</p>

<p><span id="light_ref9"><span id="light_ref8">Запустим расчет</span></span>,
выбрав пункт главного меню
&laquo;<span class="menu">расчет | старт</span>&raquo; (вместо этого можно нажать клавишу
<span class="keys">F9</span> или соответствующую
<img class="right" src="../img/Button_run.png" width="25" height="25" alt="Кнопка: запуск расчета" />
<a href="um_2_1.htm#light_ref28" title="Кнопки главного окна">кнопку</a>
на панели расчета). По умолчанию в схеме включена
синхронизация с реальным временем и
запланирована остановка расчета через 50 секунд (эти параметры задаются в
настройках блока-планировщика, см.
<a href="#pic5" title="Окно настройки блока-планировщика">рис.&nbsp;23</a>),
поэтому расчет будет производиться медленно &ndash; 50 секунд условного времени
схемы займут 50 секунд реального времени. В процессе расчета будет видно,
как постепенно, с течением времени, строится график выхода, при этом его
вертикальная ось будет автоматически подстраиваться таким образом, чтобы
вся кривая уместилась на поле графика. Горизонтальная ось графика размечена
только до 25 секунд, а расчет остановится через 50, поэтому через 25 секунд,
когда линия графика дойдет до конца оси времени, диапазон этой оси увеличится
вдвое (поведение и внешний вид блока-графика, включая его реакцию на выход
значения за диапазоны осей, задается в его окне настройки). По истечении
пятидесяти секунд расчет автоматически остановится, при этом окно подсистемы
примет вид, показанный на
<a href="#pic3" title="Окно подсистемы после завершения расчета">рис.&nbsp;21</a>.</p>

<div class="pic"><div class="container" id="pic3">
<img src="../img/Dynamic_result_1.png" width="776" height="406" alt="Окно подсистемы после завершения расчета" />
<p id="light_pic3">Рис.&nbsp;21. Окно подсистемы после завершения расчета</p>
</div></div>


<p>В процессе расчета можно, как и в режиме моделирования, менять значения в
полях ввода.
<span id="ref11"><span id="ref10">При желании</span></span>, расчет можно в любой момент
<span id="light_ref10"><span id="light_ref11">остановить</span></span>,
выбрав пункт главного меню &laquo;<span class="menu">расчет | стоп</span>&raquo;
(вместо этого можно нажать клавишу <span class="keys">F7</span> или
соответствующую
<img class="right" src="../img/Button_stop.png" width="25" height="25" alt="Кнопка: остановка расчета" />
кнопку на панели расчета), при этом RDS вернется в режим моделирования.
Если потом снова запустить расчет, он продолжится с момента остановки,
а не начнется заново &ndash; таким образом, если в процессе расчета нужно
поменять значения в нескольких полях ввода одновременно, можно не спешить
быстро изменить их все, а остановить расчет, изменить значения, а
затем снова продолжить расчет.</p>

<p>Попробуем изменить значение входа схемы в процессе расчета, только сначала
вернем схему в исходное состояние: если мы просто запустим расчет, он
продолжится, и в следующий раз автоматически остановится еще через 50 секунд.
<span id="ref12">Чтобы</span>
<span id="light_ref12">сбросить расчет</span>,
то есть вернуть схему в исходное состояние, нужно выбрать пункт главного меню
&laquo;<span class="menu">расчет | сброс</span>&raquo; (вместо этого можно нажать сочетание клавиш
<span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">F2</span> или
соответствующую
<img class="right" src="../img/Button_reset.png" width="25" height="25" alt="Кнопка: сброс расчета" />
кнопку на панели расчета). При этом график очистится и все внутренние переменные
схемы вернутся к своим начальным значениям. Сбросим схему, а затем запустим
расчет снова, но на этот раз не будем ждать автоматической остановки: когда
время достигнет 20 секунд, остановим расчет вручную, изменим значение на
входе схемы на &laquo;0&raquo; и продолжим расчет. На графике будет видно,
что значение выхода схемы резко пойдет вниз, в сторону нуля, поскольку
значение на ее входе мгновенно (с точки зрения схемы) уменьшилось. Когда
расчет завершится после 50 секунд, окно подсистемы примет вид, изображенный на
<a href="#pic4" title="Окно подсистемы после завершения расчета (на 20-й секунде значение входа схемы было изменено)">рис.&nbsp;22</a>.</p>

<div class="pic"><div class="container" id="pic4">
<img src="../img/Dynamic_result_2.png" width="776" height="406" alt="Окно подсистемы после завершения расчета (на 20-й секунде значение входа схемы было изменено)" />
<p id="light_pic4">Рис.&nbsp;22. Окно подсистемы после завершения расчета<br />
(на 20-й секунде значение входа схемы было изменено)</p>
</div></div>


<p>Если мы не собираемся в процессе расчета изменять какие-либо входы и
параметры схемы, можно отключить синхронизацию с реальным временем и не
ждать 50 секунд , чтобы увидеть результаты расчета.
<span id="ref13">Сделаем это</span>: сначала
сбросим расчет (при этом график очистится, а поле ввода на входе схемы
восстановит свое исходное значение &laquo;2&raquo;) и
<span id="light_ref13">перейдем в режим редактирования</span>, чтобы настроить параметры блока-планировщика.
<img class="right" src="../img/Button_edit.png" width="25" height="25" alt="Кнопка: режим редактирования" />
Выберем пункт меню &laquo;<span class="menu">система | режим редактирования</span>&raquo;
(вместо этого можно нажать клавишу <span class="keys">F2</span> или
соответствующую этому пункту
кнопку на панели главного окна), щелкнем правой кнопкой мыши по
планировщику (в этой схеме он называется &laquo;<span class="rdsvar">RTP1</span>&raquo; и изображается
<img class="right" src="../img/DynamicSync_Picture.png" width="30" height="30" alt="Блок-планировщик" />
прямоугольником с изогнутой стрелкой) и выберем пункт контекстного меню
&laquo;<span class="menu">настройка</span>&raquo; (можно просто дважды щелкнуть левой кнопкой мыши на
планировщике &ndash; параметры этого блока установлены так, что двойной щелчок
на нем автоматически открывает окно настроек). Откроется окно, изображенное на
<a href="#pic5" title="Окно настройки блока-планировщика">рис.&nbsp;23</a>.</p>

<div class="pic"><div class="container" id="pic5">
<img src="../img/DynamicSync_Setup.png" width="638" height="334" alt="Окно настройки блока-планировщика" />
<p id="light_pic5">Рис.&nbsp;23. Окно настройки блока-планировщика</p>
</div></div>


<p>В этом окне нужно выключить флаг
&laquo;<span class="menu">синхронизация с реальным временем</span>&raquo; на панели
&laquo;<span class="menu">синхронизация</span>&raquo; в левой нижней части окна, после чего нажать кнопку
&laquo;<span class="menu">OK</span>&raquo;. Теперь, если запустить расчет, график появится практически
мгновенно &ndash; пятьдесят секунд условного времени схемы уже не будут
соответствовать пятидесяти секундам реального, и схема будет рассчитана с
максимально возможной скоростью. Окно подсистемы после остановки расчета будет
выглядеть в точности так же, как и при включенной синхронизации
(см. <a href="#pic3" title="Окно подсистемы после завершения расчета">рис.&nbsp;21</a>).</p>

<p>Если теперь завершить RDS или попытаться загрузить другую схему,
будет выдано предупреждение: мы изменили параметры одного из блоков,
и нам будет предложено сохранить изменения в файле схемы. Можно согласиться,
отказаться или отменить выход или загрузку новой схемы.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_1.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_3.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_2">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
