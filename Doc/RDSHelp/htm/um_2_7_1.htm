<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.7.1. Общие принципы создания связей</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_7">&sect;2.7. Создание и изменение связей</a></p>
<div class="level"><p>&sect;2.7.1. Общие принципы создания связей</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_6.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_7_2.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_7_1">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3>&sect;2.7. Создание и изменение связей</h3>
<p class="abstract">Описываются стандартные действия по соединению блоков связями.</p>
<h4>&sect;2.7.1. Общие принципы создания связей</h4>
<p class="abstract">Описываются виды связей между блоками и способ создания таких связей.</p>


<p>Связи соединяют между собой
<a href="um_1_4.htm#ref20" title="Роли переменных в блоке">выходы и входы</a> блоков и в
<a href="um_1_3.htm#ref3" title="Режим расчета">режиме расчета</a>
передают данные между ними.
<span id="ref2"><span id="ref1">Связь может соединять</span></span>
между собой один выход и один вход &ndash; в этом случае она называется
<span class="term" id="light_ref1">простой</span>, или один выход и несколько входов
&ndash; в этом случае она называется
<span class="term" id="light_ref2">разветвленной</span>
(<a href="#pic1" title="Простые (слева) и разветвленные (справа) связи">рис.&nbsp;42</a>).
Создание связи, соединяющей несколько выходов блоков, невозможно
&ndash; при передаче данных получателей может быть много, но источник
должен быть единственным.</p>

<div class="pic"><div class="container" id="pic1">
<img src="../img/Connections.png" width="546" height="234" alt="Простые (слева) и разветвленные (справа) связи" />
<p id="light_pic1">Рис.&nbsp;42. Простые (слева) и разветвленные (справа) связи</p>
</div></div>


<p>На рабочем поле схемы связь изображается набором точек (узлов) и
соединяющих их отрезков прямых или кривых линий. В простейшем случае
простая связь состоит из двух конечных узлов (точек соединения с блоками)
и линии между ними. Узлы, присоединенные ко входам блоков, всегда
помечается стрелками, при этом рядом с ними и с узлами, присоединенными к
выходам, обычно отображается имя связанной переменной блока. Таким образом,
по внешнему виду связи сразу можно определить, что с чем она соединяет.
Например, связь, изображенная в левом нижнем углу
<a href="#pic1" title="Простые (слева) и разветвленные (справа) связи">рис.&nbsp;42</a>, соединяет выход
&laquo;<span class="rdsvar">y</span>&raquo; правого блока с входом &laquo;<span class="rdsvar">x1</span>&raquo; левого.
Цвет, толщина, стиль линии и размеры стрелок могут задаваться индивидуально
для каждой связи в <a href="um_2_7_2.htm" title="&sect;2.7.2. Изменение внешнего вида, параметров и конфигурации связи">окне ее параметров</a>.
Отображение имен переменных возле конечных узлов может быть
отключено как
<a href="um_2_3.htm#light_ref6" title="Панель элементов">для всей подсистемы</a>, так и
<a href="um_2_7_2.htm#light_ref10" title="Включение/выключение имени переменной около связи">для конкретного узла связи</a>. Связь, изображенная
в левом верхнем углу <a href="#pic1" title="Простые (слева) и разветвленные (справа) связи">рис.&nbsp;42</a>,
соединяет выход &laquo;<span class="rdsvar">edit</span>&raquo; поля ввода (левого блока) с входом
&laquo;<span class="rdsvar">x</span>&raquo; правого, однако, отображение имени &laquo;<span class="rdsvar">edit</span>&raquo;
рядом с узлом запрещено, так как у поля ввода есть только один выход, и его
имя можно не показывать.</p>

<p>Кроме конечных узлов в связи могут также присутствовать промежуточные узлы,
служащие точками излома или разветвления связи. Они не соединены с блоками
и нужны только для придания связи желаемого внешнего вида. В точках разветвления
обычно изображается жирный кружок (см.
<a href="#pic1" title="Простые (слева) и разветвленные (справа) связи">рис.&nbsp;42</a> справа), позволяющий
отличить разветвление от точки, в которой линии двух независимых связей
пересекаются без соединения. Толщина этого кружка может быть задана в
<a href="um_2_7_2.htm" title="&sect;2.7.2. Изменение внешнего вида, параметров и конфигурации связи">окне параметров</a> связи. Линии,
соединяющие узлы, могут быть прямыми или кривыми Безье. Исходно все связи
рисуются прямыми линиями, но после рисования в
<a href="um_2_3.htm#ref18" title="Контекстное меню линии связи или шины">контекстном меню</a>
уже созданной линии можно
<a href="um_2_7_2.htm#ref11" title="Кривая Безье в линии связи">переключать ее тип</a>.</p>

<p><span id="ref3">Создание</span>
связи начинается с выбора одного из ее конечных узлов, то
есть с выбора входа или выхода одного из блоков, которые будет
соединять связь. Для начала рисования связи следует в
<a href="um_1_3.htm#ref1" title="Режим редактирования">режиме редактирования</a>
подвести курсор мыши к точке на границе изображения блока, к которой
будет подходить связь, а затем либо нажать правую кнопку мыши и выбрать в
контекстном меню пункт &laquo;<span class="menu">начать связь</span>&raquo;
(<a href="#pic2_0" title="Начало создания связи через контекстное меню (а) или при помощи щелчка мыши с нажатой клавишей Ctrl (б)">рис.&nbsp;43&nbsp;а</a>),
либо нажать левую кнопку мыши при нажатой клавише <span class="keys">Ctrl</span>
(<a href="#pic2_1" title="Начало создания связи через контекстное меню (а) или при помощи щелчка мыши с нажатой клавишей Ctrl (б)">рис.&nbsp;43&nbsp;б</a>).
В обоих случаях откроется <span id="light_ref3">дополнительное меню</span>, в котором будут
перечислены входы и выходы блока, которые его разработчик
<a href="um_2_9_2.htm#ref2" title="Разрешение входа/выхода в меню">пометил как основные</a>.</p>

<div class="pic"><div class="container" id="pic2">
<div class="multi" id="pic2_0"><img src="../img/ConnectStart_context.png" width="391" height="381" alt="Начало создания связи через контекстное меню (а) или при помощи щелчка мыши с нажатой клавишей Ctrl (б) 1" /><p id="light_pic2_0">(а)</p></div><div class="multi" id="pic2_1"><img src="../img/ConnectStart_ctrl.png" width="177" height="147" alt="Начало создания связи через контекстное меню (а) или при помощи щелчка мыши с нажатой клавишей Ctrl (б) 2" /><p id="light_pic2_1">(б)</p></div><p id="light_pic2">Рис.&nbsp;43. Начало создания связи через контекстное меню (а) или при помощи щелчка мыши с нажатой клавишей <span class="keys">Ctrl</span> (б)</p>
</div></div>


<p>Точка на изображении блока, к которой будет подходить связь, может
выбираться произвольно &ndash; в RDS нет специальных правил,
требующих, например, располагать входы блока слева, а выходы &ndash;
справа, или специальных точек соединения на изображениях блоков. Работа
связи будет определяться не положением ее точки присоединения к блоку,
а именем переменной, к которой связь подключается. Не обязательно указывать
точку точно на границе изображения блока &ndash; главное, чтобы она оказалась
внутри прямоугольной области, занимаемой этим изображением. В момент
начала создания связи RDS автоматически переместит ее начальную точку
на ближайшую границу описывающего прямоугольника блока. При необходимости,
эту точку можно будет переместить в любое положение внутри этого
прямоугольника позже, когда вся связь будет уже нарисована.</p>

<p>В меню, открывающемся при начале рисования связи, следует выбрать имя
переменной блока, к которой будет подключена создаваемая связь. Назначение
этих переменных обычно приводится в описании каждого библиотечного
блока, кроме того, если разработчик блока предусмотрел
<a href="um_2_9_2.htm#ref1" title="Комментарий переменной">пояснения к переменным</a>,
такие пояснения выводятся в этом же меню после имени каждой переменной.
В меню перечисляются сначала выходы блока, потом, после
горизонтальной черты &ndash; входы. Связь можно начинать рисовать
как от выхода ко входу, так и от входа к выходу &ndash; направление
передачи данных определяется ролью соединяемых переменных в блоках,
а не последовательностью их задания при рисовании связи.</p>

<div class="picright"><div class="container" id="pic3">
<img src="../img/connect_list.png" width="335" height="281" alt="Полный список переменных блока" />
<p id="light_pic3">Рис.&nbsp;44. Полный список переменных блока</p>
</div></div>


<p><span id="ref4">Следует</span>
помнить, что в меню перечислены только основные входы и выходы,
то есть те переменные, для которых разработчик блока явно указал
необходимость включения в меню создания связи. В блоке могут быть и другие,
скрытые входы и выходы &ndash; чтобы увидеть
<span id="light_ref4">полный список переменных блока</span>,
следует, вместо имени переменной, выбрать в
<a href="#pic2" title="Начало создания связи через контекстное меню (а) или при помощи щелчка мыши с нажатой клавишей Ctrl (б)">меню</a>
пункт &laquo;<span class="menu">список</span>&raquo;.
При этом откроется окно, в котором будут перечислены имеющиеся в
блоке переменные с указанием их типа и числа уже подключенных к ним связей
(<a href="#pic3" title="Полный список переменных блока">рис.&nbsp;44</a>).
В этом окне можно либо выбрать переменную в списке, либо вручную ввести ее
имя в поле ввода в нижней части, и подтвердить свой выбор нажатием кнопки
&laquo;<span class="menu">OK</span>&raquo; (кнопка &laquo;<span class="menu">Отмена</span>&raquo; прерывает создание связи).
 По умолчанию в окне показываются только переменные, к которым связь может быть подключена:
 например, если создается связь от выхода какого-то блока,
 при подключении этой связи к другому блоку в окне списка переменных будут отображаться
 только входы этого блока.
 Чтобы увидеть в списке все переменные блока, включая те, к которым нельзя присоединить
 данную связь, следует включить флажок &laquo;<span class="menu">показывать все переменные</span>&raquo; под списком.</p>

<p>После того, как первая соединяемая переменная выбрана в меню
(<a href="#pic2" title="Начало создания связи через контекстное меню (а) или при помощи щелчка мыши с нажатой клавишей Ctrl (б)">рис.&nbsp;43</a>)
или в окне списка переменных
(<a href="#pic3" title="Полный список переменных блока">рис.&nbsp;44</a>), курсор мыши принимает
форму перекрестия и за ним начинает тянуться линия к выбранной начальной
точке связи
(<a href="#pic4_0" title="Рисование связи после выбора первой соединяемой переменной: перемещение курсора ко второму блоку (а), выбор соединяемой переменной (б), готовая связь (в)">рис.&nbsp;45&nbsp;а</a>).
Для создания простейшей связи достаточно переместить курсор на изображение
блока, содержащего вторую соединяемую переменную, и нажать левую кнопку мыши.
При этом откроется меню, содержащее основные (то есть специально
помеченные разработчиком блока)
переменные, к которым может быть подключена эта связь
(<a href="#pic4_1" title="Рисование связи после выбора первой соединяемой переменной: перемещение курсора ко второму блоку (а), выбор соединяемой переменной (б), готовая связь (в)">рис.&nbsp;45&nbsp;б</a>).</p>

<div class="pic"><div class="container" id="pic4">
<div class="multi" id="pic4_0"><img src="../img/ConnInProgress1.png" width="178" height="124" alt="Рисование связи после выбора первой соединяемой переменной: перемещение курсора ко второму блоку (а), выбор соединяемой переменной (б), готовая связь (в) 1" /><p id="light_pic4_0">(а)</p></div><div class="multi" id="pic4_1"><img src="../img/ConnInProgress2.png" width="229" height="124" alt="Рисование связи после выбора первой соединяемой переменной: перемещение курсора ко второму блоку (а), выбор соединяемой переменной (б), готовая связь (в) 2" /><p id="light_pic4_1">(б)</p></div><div class="multi" id="pic4_2"><img src="../img/ConnInProgress3.png" width="178" height="124" alt="Рисование связи после выбора первой соединяемой переменной: перемещение курсора ко второму блоку (а), выбор соединяемой переменной (б), готовая связь (в) 3" /><p id="light_pic4_2">(в)</p></div><p id="light_pic4">Рис.&nbsp;45. Рисование связи после выбора первой соединяемой переменной:<br />перемещение курсора ко второму блоку (а), выбор соединяемой переменной (б), готовая связь (в)</p>
</div></div>


<p>Поскольку первая соединяемая переменная уже выбрана, в это меню попадут
только переменные, совместимые с ней по типу и роли в блоке. Если рисование
связи было начато от выхода блока, в меню попадут только входы, поскольку
два выхода не могут быть соединены между собой. Если рисование было начато
от входа, в меню попадут и входы и выходы. При этом будут показаны только
переменные тех типов, соединение которых
<a href="um_1_4.htm#ref23" title="Допустимые соединения типов переменных">допустимо и не вызовет потери данных</a>.
Например, если указанный в качестве начальной точки связи выход
блока имеет тип &laquo;<span class="rdsvar">double</span>&raquo; (вещественное число двойной точности),
логические входы блока, на изображении которого была нажата левая кнопка мыши,
не попадут в меню. Точно так же, в меню не попадут никакие переменные, кроме
массивов и матриц, если указанный выход &ndash; массив. Полный список
переменных всегда можно получить, выбрав пункт меню &laquo;<span class="menu">список</span>&raquo;
&ndash; при этом откроется уже знакомое окно со списком всех переменных блока
(см. <a href="#pic3" title="Полный список переменных блока">рис.&nbsp;44</a>). В нем можно указать
вторую соединяемую переменную вручную, даже если это вызовет потерю данных.
В списке переменных рядом с их именами отображаются цветные метки: зеленая,
если соединение возможно без потерь; желтая, если соединение возможно,
но при этом может произойти потеря точности или информации; красная, если
соединение невозможно в принципе. При выборе переменной в списке непосредственно
под ним выводится сообщение о возможных проблемах в данном соединении
(на <a href="#pic3" title="Полный список переменных блока">рис.&nbsp;44</a> под списком
отображается &laquo;OK&raquo; &ndash; соединение возможно без потери
точности).</p>

<p>После выбора имени переменной в меню готовая связь отобразится на
рабочем поле схемы (<a href="#pic4_2" title="Рисование связи после выбора первой соединяемой переменной: перемещение курсора ко второму блоку (а), выбор соединяемой переменной (б), готовая связь (в)">рис.&nbsp;45&nbsp;в</a>).
Конечная точка связи, как и ранее начальная, будет автоматически перемещена
к ближайшей границе изображения блока. Внешний вид связи (толщина линии,
цвет и т.п.) будет взят из
<a href="um_2_13.htm" title="&sect;2.13. Стили связей и шин">набора стилей</a> согласно типу
соединяемых переменных.</p>

<p>Если связь должна изображаться не одним отрезком прямой, а ломаной линией,
в процессе рисования в нее можно добавить промежуточные узлы, просто
нажимая левую кнопку мыши в той точке свободного места рабочего поля,
в которую нужно поместить такой узел. При этом линия, тянущаяся за курсором
мыши, будет все время соединять его с последним добавленным узлом
(<a href="#pic5" title="Последовательность создания связи с промежуточными узлами">рис.&nbsp;46</a>).</p>

<div class="pic"><div class="container" id="pic5">
<div class="multi" id="pic5_0"><img src="../img/ConnInProgressAux1.png" width="178" height="156" alt="Последовательность создания связи с промежуточными узлами 1" /><p id="light_pic5_0">(а)</p></div><div class="multi" id="pic5_1"><img src="../img/ConnInProgressAux2.png" width="178" height="156" alt="Последовательность создания связи с промежуточными узлами 2" /><p id="light_pic5_1">(б)</p></div><div class="multi" id="pic5_2"><img src="../img/ConnInProgressAux3.png" width="227" height="156" alt="Последовательность создания связи с промежуточными узлами 3" /><p id="light_pic5_2">(в)</p></div><div class="multi" id="pic5_3"><img src="../img/ConnInProgressAux4.png" width="178" height="156" alt="Последовательность создания связи с промежуточными узлами 4" /><p id="light_pic5_3">(г)</p></div><p id="light_pic5">Рис.&nbsp;46. Последовательность создания связи с промежуточными узлами</p>
</div></div>


<p>Заканчивается рисование связи, как и в предыдущем случае, щелчком на
изображении блока и выбором переменной из списка. Следует помнить, что
промежуточный узел при рисовании связи не может быть размещен на изображении
какого-либо блока, поскольку щелчок на изображении любого блока считается
концом связи и открывает список переменных. При необходимости, любое
количество промежуточных узлов может быть
<a href="um_2_7_2.htm#ref13" title="Добавление узлов в связь">добавлено в связь позже</a>,
когда она уже создана, и эти узлы могут быть перемещены куда угодно,
в том числе и на изображения других блоков. Тем не менее, пересечение
связью изображения &laquo;постороннего&raquo; блока не рекомендуется
из соображений лучшей читаемости схемы.</p>

<p>Отменить начатое рисование связи можно нажав правую кнопку мыши
(при этом последний участок рисуемой ломаной линии будет удален) или
сделав двойной щелчок на свободном месте рабочего поля. Если для связи уже
было указано несколько промежуточных узлов, такая связь не будет
автоматически стерта, а останется соединенной только с одной переменной,
с которой было начато рисование. Второй конец связи будет
&laquo;висеть в воздухе&raquo; и она не будет передавать никаких данных.
Незаконченную связь можно дорисовать в любой момент, нажав на ее
оборванном конце левую кнопку мыши, удерживая клавишу
<span class="keys">Ctrl</span>, или нажав на нем правую кнопку и выбрав
в контекстном меню пункт &laquo;<span class="menu">продолжить связь</span>&raquo;. Следует помнить,
что состав пунктов контекстного меню связи зависит от того, куда
пришелся щелчок правой кнопки мыши: пункт
&laquo;<span class="menu">продолжить связь</span>&raquo; будет присутствовать в меню только при
щелчке на конечный узел оборванной связи.</p>

<p>Описанным выше способом создаются простые связи. Для того, чтобы создать
разветвленную связь, следует сначала создать одну из ее ветвей как простую
связь, а затем по очереди добавлять к ней остальные ветви. Для этого
нужно выбрать на уже созданной связи точку, в которой она разветвится
(не важно, будет это узел или какая-либо произвольная точка на одной из
линий) и либо нажать левую кнопку мыши, удерживая клавишу
<span class="keys">Ctrl</span>, либо нажать правую кнопку и выбрать
в контекстном меню пункт &laquo;<span class="menu">ответвить связь</span>&raquo;
(<a href="#pic6" title="Последовательность создания ответвления связи">рис.&nbsp;47</a>).
После этого курсор мыши примет форму перекрестия, и за ним, как и
при рисовании простой связи, будет тянуться линия от выбранной точки
ветвления. Дальше рисование связи осуществляется обычным образом
&ndash; щелчки на свободном месте рабочего поля добавляют промежуточные
узлы, щелчок на изображении блока открывает меню со списком совместимых
со связью переменных, выбор одной из которых завершает рисование
ветви связи.</p>

<div class="pic"><div class="container" id="pic6">
<div class="multi" id="pic6_0"><img src="../img/ConnBranch1.png" width="244" height="409" alt="Последовательность создания ответвления связи 1" /><p id="light_pic6_0">(а)</p></div><div class="multi" id="pic6_1"><img src="../img/ConnBranch2.png" width="170" height="129" alt="Последовательность создания ответвления связи 2" /><p id="light_pic6_1">(б)</p></div><div class="multi" id="pic6_2"><img src="../img/ConnBranch3.png" width="198" height="129" alt="Последовательность создания ответвления связи 3" /><p id="light_pic6_2">(в)</p></div><div class="multi" id="pic6_3"><img src="../img/ConnBranch4.png" width="164" height="129" alt="Последовательность создания ответвления связи 4" /><p id="light_pic6_3">(г)</p></div><p id="light_pic6">Рис.&nbsp;47. Последовательность создания ответвления связи</p>
</div></div>


<p>Чтобы проще было проводить строго горизонтальные и строго вертикальные линии,
в процессе рисования связи можно расширить перекрестие курсора мыши,
нажав клавишу <span class="keys">Shift</span>. Пока она нажата, на
рабочем поле будут отображаться горизонтальная и вертикальная линии,
пересекающиеся в точке под курсором. Увидев, как эти линии проходят по
изображениям блоков, можно представить себе, как будет выглядеть будущая
связь, если вставить промежуточный узел в данной точке. В некоторых случаях
в момент присоединения к блоку RDS автоматически делает линию строго
горизонтальной или вертикальной, если взаимное положение последнего узла и
соединяемого блока это допускает.</p>

<p>Связи также можно вводить внутрь подсистем и выводить из них наружу,
эти действия описываются в <a href="um_2_11_2.htm" title="&sect;2.11.2. Создание подсистемы и размещение в ней блоков">&sect;2.11.2</a>.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_6.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_7_2.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_7_1">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
