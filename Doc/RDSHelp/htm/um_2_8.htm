<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.8. Использование шин</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p>&sect;2.8. Использование шин</p>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_7_3.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_9_1.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_8">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3>&sect;2.8. Использование шин</h3>
<p class="abstract">Описывается создание шин и использование их для передачи данных.</p>


<p><span id="ref1">Шины</span>
 используются для того, чтобы большое количество разветвленных
пересекающихся связей не загромождало сложные схемы. В RDS шина &ndash;
это набор независимых <span id="light_ref1">каналов</span> передачи данных. Ее можно представить себе как
&laquo;пучок&raquo; связей, заключенных внутрь одной линии, где эти связи
никак не взаимодействуют между собой. Линия шины может быть разветвленной и
проходить через все рабочее поле схемы, другие связи могут подходить к ней и
отходить от нее в любой точке, соединяясь с каналами этой шины и получая от
них или передавая им данные. Технически шина в RDS является связью
сложной структуры, поэтому ее редактирование очень похоже на описанное
в <a href="um_2_7_1.htm" title="&sect;2.7.1. Общие принципы создания связей">&sect;2.7.1</a> редактирование связи &ndash;
шины можно разветвлять, продолжать, перемещать, удалять в них узлы и т.п.
&ndash; за исключением того, что связи начинают рисовать от входов или
выходов блоков, а шины обычно рисуют, начиная их в произвольной точке
рабочего поля (см. ниже). Шины также можно вводить внутрь подсистем и
выводить из них наружу при помощи специальных блоков-вводов, эти действия
описываются в <a href="um_2_11_3.htm" title="&sect;2.11.3. Ввод шин в подсистему">&sect;2.11.3</a>.</p>

<p>Соединения блоков с использованием шин отличаются от обычных соединений
только внешним видом, на передачу данных прохождение их через шину не
влияет. На
<a href="#pic1" title="Соединение блоков при помощи разветвленных связей (а) и при помощи шины (б)">рис.&nbsp;80</a>
изображены одни и те же соединения с использованием шины и без него.
В данном случае не очень принципиально, соединены изображенные на рисунке блоки
непосредственно или через шину, однако, если бы блоки 3, 4 и 5 находились на
другом конце рабочего поля подсистемы, между ними и блоками 1 и 2 пришлось
бы тянуть семь параллельных связей вместо единственной шины. Кроме того,
каналам шины можно давать имена, отражающие смысл передаваемых данных.
На рисунке изображены условные блоки, поэтому и имена каналов тоже условные:
здесь имя &laquo;<span class="rdsvar">bNyM</span>&raquo; означает, что этот канал передает данные выхода
&laquo;<span class="rdsvar">M</span>&raquo; блока &laquo;<span class="rdsvar">M</span>&raquo;. Тем не менее, даже в этом
условном примере по именам каналов в правой части рисунка проще понять, что
на вход &laquo;<span class="rdsvar">x3</span>&raquo; блока 5 поступают данные с выхода
&laquo;<span class="rdsvar">y1</span>&raquo; блока 1 &ndash; связь между входом блока и шиной
сделана короткой, и пользователь сразу видит имя канала &laquo;<span class="rdsvar">b1y1</span>&raquo;
на другом конце этой связи.</p>

<div class="pic"><div class="container" id="pic1">
<div class="multi" id="pic1_0"><img src="../img/BusExample1.png" width="267" height="254" alt="Соединение блоков при помощи разветвленных связей (а) и при помощи шины (б) 1" /><p id="light_pic1_0">(а)</p></div><div class="multi" id="pic1_1"><img src="../img/BusExample2.png" width="267" height="254" alt="Соединение блоков при помощи разветвленных связей (а) и при помощи шины (б) 2" /><p id="light_pic1_1">(б)</p></div><p id="light_pic1">Рис.&nbsp;80. Соединение блоков при помощи разветвленных связей (а)<br />и при помощи шины (б)</p>
</div></div>


<p>Каналы шины в чем-то похожи на переменные блока: каждый канал имеет имя,
уникальное в данной шине (в подсистеме может находиться произвольное количество
не связанных между собой шин) и
<a href="um_1_4.htm#ref1" title="Типы переменных блока">тип</a>. К каналам, как и к переменным,
присоединяются связи. Однако, набор переменных блока жестко задается его
разработчиком, а каналы в шину можно добавлять в любой момент, в том числе и в
момент присоединения к ней связи. Кроме того, переменная в блоке
<a href="um_1_4.htm#ref20" title="Роли переменных в блоке">должна быть</a> либо
входом, либо выходом, либо внутренней, а канал шины является одновременно и
входом, и выходом: входом он будет для связи, передающей в него данные, а
выходом &ndash; для связей, получающих их.</p>

<p>Связи к шинам присоединяются примерно так же,
<a href="um_2_7_1.htm" title="&sect;2.7.1. Общие принципы создания связей">как и к блокам</a> (ниже будут
подробно рассмотрены различные способы присоединения) &ndash; вместо имени
переменной просто указывается имя канала. К каждому каналу может быть
присоединена только одна связь, передающая данные в канал (то есть связь,
на другом конце которой &ndash; выход) и произвольное количество связей,
передающих данные из канала на входы других блоков. В отличие от блоков,
в которых к одному входу может быть присоединено несколько связей (вход
получает данные последней сработавшей), в шинах подключение нескольких связей
к каналу как к входу запрещено.</p>

<div class="picright"><div class="container" id="pic2">
<img src="../img/BusDraw1.png" width="401" height="269" alt="Начало рисования шины" />
<p id="light_pic2">Рис.&nbsp;81. Начало рисования шины</p>
</div></div>


<p>Начать рисование шины можно в любой точке рабочего поля подсистемы. Для
этого следует в <a href="um_1_3.htm#ref1" title="Режим редактирования">режиме редактирования</a>
нажать правую кнопку мыши в точке,
где начнется шина, в контекстном меню выбрать пункт &laquo;<span class="menu">создать</span>&raquo;,
а в открывшемся подменю &ndash; пункт &laquo;<span class="menu">начать шину</span>&raquo;
(<a href="#pic2" title="Начало рисования шины">рис.&nbsp;81</a>). После этого курсор мыши
примет форму перекрестия, и от выбранной точки за ним будет тянуться прямая
линия (<a href="#pic3" title="Добавление в шину промежуточного узла (а), завершение рисования шины (б), готовая шина (в)">рис.&nbsp;82</a>).
Щелчками левой кнопкой можно добавлять в шину промежуточные узлы, двойной
щелчок завершает рисование. После двойного щелчка курсор мыши снова примет форму
стрелки, и на рабочем поле появится шина, цвет и толщина линии которой будут
взяты из установок для шин в
<a href="um_2_13.htm" title="&sect;2.13. Стили связей и шин">наборе стилей</a>.</p>

<p>Можно начать рисование шины и другим способом: вместо щелчка правой кнопкой
мыши на рабочем поле для вызова контекстного меню можно в главном меню RDS
выбрать пункт &laquo;<span class="menu">редактирование | создать | начать шину</span>&raquo;, после чего
щелкнуть левой кнопкой мыши в точке начала шины. Далее рисование производится
уже описанным выше способом.</p>

<div class="pic"><div class="container" id="pic3">
<div class="multi" id="pic3_0"><img src="../img/BusDraw2.png" width="184" height="74" alt="Добавление в шину промежуточного узла (а), завершение рисования шины (б), готовая шина (в) 1" /><p id="light_pic3_0">(а)</p></div><div class="multi" id="pic3_1"><img src="../img/BusDraw3.png" width="183" height="185" alt="Добавление в шину промежуточного узла (а), завершение рисования шины (б), готовая шина (в) 2" /><p id="light_pic3_1">(б)</p></div><div class="multi" id="pic3_2"><img src="../img/BusDraw4.png" width="176" height="171" alt="Добавление в шину промежуточного узла (а), завершение рисования шины (б), готовая шина (в) 3" /><p id="light_pic3_2">(в)</p></div><p id="light_pic3">Рис.&nbsp;82. Добавление в шину промежуточного узла (а),<br />завершение рисования шины (б), готовая шина (в)</p>
</div></div>


<p>Созданная таким образом шина не содержит ни одного канала передачи данных.
Можно сразу добавить необходимые каналы в окне параметров шины или добавлять
их по одному в процессе подключения к ней связей. Сначала рассмотрим окно
параметров шины и возможности, которые оно предоставляет.</p>

<div class="picright"><div class="container" id="pic4">
<img src="../img/BusParams1.png" width="439" height="384" alt="Вкладка внешний вид окна параметров типичной шины" />
<p id="light_pic4">Рис.&nbsp;83. Вкладка &laquo;<span class="menu">внешний вид</span>&raquo;<br />окна параметров типичной шины</p>
</div></div>


<p><span id="ref2">Для</span>
вызова <span id="light_ref2">окна параметров шины</span> следует в режиме
редактирования либо дважды щелкнуть на любой из линий шины, либо нажать на
ней правую кнопку мыши и выбрать в контекстном меню пункт &laquo;<span class="menu">параметры</span>&raquo;.
Окно содержит три вкладки: &laquo;<span class="menu">внешний вид</span>&raquo;,
&laquo;<span class="menu">имя и каналы</span>&raquo; и &laquo;<span class="menu">соединения</span>&raquo;.</p>

<p>Вкладка &laquo;<span class="menu">внешний вид</span>&raquo;
(<a href="#pic4" title="Вкладка внешний вид окна параметров типичной шины">рис.&nbsp;83</a>) совпадает с
<a href="um_2_7_2.htm#pic1_0" title="Вкладки окна параметров связи внешний вид (а) и соединения (б)">одноименной вкладкой окна параметров связи</a>:
поскольку шина в RDS тоже является связью, параметры внешнего вида шин
и связей совпадают.
<span id="ref3">Как</span> и для связей, для шин задается
<span id="light_ref3">стиль</span>, толщина и цвет
линии, диаметр круга в точках ветвления и параметры стрелки (стрелка на шине
рисуется в
<a href="um_2_11_3.htm" title="&sect;2.11.3. Ввод шин в подсистему">точке ее подключения</a>
к подсистеме или вводу шины). На этой вкладке можно также выбрать для шины
один из стандартных стилей, разрешить или запретить перемещение мышью и указать
<a href="um_2_12.htm" title="&sect;2.12.1. Использование слоев">слой</a>, на котором она размещается.</p>

<p><span id="ref4">На</span> вкладке &laquo;<span class="menu">имя и каналы</span>&raquo;
(<a href="#pic5_0" title="Вкладки имя и каналы (а) и соединения (б) окна параметров типичной шины">рис.&nbsp;84&nbsp;а</a>)
задается <span id="light_ref4">имя шины</span> и отображается список ее
каналов. Имя шины не выводится на рабочем поле &ndash; фактически,
единственная функция в RDS, которая его использует, это
<a href="um_2_15_1.htm" title="&sect;2.15.1. Выделение блоков и связей по заданному критерию">выделение по критерию</a>: пользователь
может автоматически выделить в подсистеме шины с похожими именами.
Задается это имя в поле ввода в верхней части вкладки, имя шины должно быть
уникальным в данной подсистеме. По умолчанию RDS дает шинам имена
&laquo;<span class="rdsvar">Шина1</span>&raquo;, &laquo;<span class="rdsvar">Шина2</span>&raquo; и т.д.</p>

<div class="pic"><div class="container" id="pic5">
<div class="multi" id="pic5_0"><img src="../img/BusParams2.png" width="439" height="360" alt="Вкладки имя и каналы (а) и соединения (б) окна параметров типичной шины 1" /><p id="light_pic5_0">(а)</p></div><div class="multi" id="pic5_1"><img src="../img/BusParams3.png" width="439" height="360" alt="Вкладки имя и каналы (а) и соединения (б) окна параметров типичной шины 2" /><p id="light_pic5_1">(б)</p></div><p id="light_pic5">Рис.&nbsp;84. Вкладки &laquo;<span class="menu">имя и каналы</span>&raquo; (а) и &laquo;<span class="menu">соединения</span>&raquo; (б) окна параметров типичной шины</p>
</div></div>


<p><span id="light_ref5">Список каналов</span>
занимает большую часть вкладки и состоит из четырех колонок:
имя канала, тип канала, число связей на его входе и число связей на выходе.
На <a href="#pic5_0" title="Вкладки имя и каналы (а) и соединения (б) окна параметров типичной шины">рис.&nbsp;84&nbsp;а</a> изображена вкладка окна
параметров шины с
<a href="#pic1_1" title="Соединение блоков при помощи разветвленных связей (а) и при помощи шины (б)">рис.&nbsp;80&nbsp;б</a>
&ndash; в списке можно видеть все семь каналов, к которым подключаются связи,
изображенные на рисунке. В данном случае к входу каждого канала подключена одна
связь (подключение двух и более было бы ошибкой &ndash; источник данных должен
быть один, а отсутствие связей на входе сделало бы канал бессмысленным &ndash;
ему неоткуда было бы брать данные для передачи), к выходам &ndash; по одной или
по две. Справа от списка находятся кнопки, позволяющие изменить параметры
выбранного в списке канала или добавить новый:</p>

<div class="tablecenter"><div class="tcont">
<table>
  <tr>
    <th>Кнопка</th>
    <th>Действие</th>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowUp.png" width="25" height="25" alt="Кнопка: вверх" /></td>
    <td>Переместить выбранный канал на одну позицию вверх по списку</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowDown.png" width="25" height="25" alt="Кнопка: вниз" /></td>
    <td>Переместить выбранный канал на одну позицию вниз по списку</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Brackets.png" width="25" height="25" alt="Кнопка: изменить" /></td>
    <td>Изменить имя и тип выбранного канала</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Plus.png" width="25" height="25" alt="Кнопка: плюс" /></td>
    <td>Добавить новый канал</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Delete.png" width="25" height="25" alt="Кнопка: удалить" /></td>
    <td>Удалить выбранный канал</td>
  </tr>
</table>
</div></div>

<p>Номер канала в списке, изменяемый первыми двумя кнопками, не влияет на
передачу данных. Последовательность каналов определяет только внешний вид
меню подключения связи к шине
(см. <a href="#pic8" title="Подключение к шине выхода блока: меню соединения (а) и готовая связь (б)">рис.&nbsp;87</a> ниже) &ndash;
обычно наиболее употребительные каналы стараются поднять в списке
повыше, чтобы соответствующие им пункты меню были первыми.</p>

<p><span id="ref6">Для</span>
добавления канала в шину следует нажать кнопку со знаком &laquo;+&raquo;,
при этом откроется <span id="light_ref6">дополнительное окно
(<a href="#pic6" title="Окно добавления канала при задании простого типа переменной (а) и матрицы (б)">рис.&nbsp;85</a>)</span>,
в котором следует задать имя нового канала и его тип. Имя канала вводится в
поле ввода слева, а тип выбирается в выпадающем списке справа. В этом списке
содержатся все стандартные <a href="um_1_4.htm#ref1" title="Типы переменных блока">типы переменных</a>
RDS и имена структур,
<a href="um_2_14.htm" title="&sect;2.14. Создание и изменение структур">заданных для данной схемы</a>.
Если выбрать в списке пункт &laquo;<span class="menu">массив</span>&raquo; или &laquo;<span class="menu">матрица</span>&raquo;,
под ним появится еще один выпадающий список, в котором нужно выбрать тип
элемента массива или матрицы
(<a href="#pic6_1" title="Окно добавления канала при задании простого типа переменной (а) и матрицы (б)">рис.&nbsp;85&nbsp;б</a>).
Если в этом втором списке тоже выбрать пункт
&laquo;<span class="menu">матрица</span>&raquo;, под ним появится еще один список (получится матрица
матриц каких-либо типов) и т.д. Следует помнить, что вложенность матриц в
RDS ограничена пятью. После ввода имени и выбора типа канала следует
нажать &laquo;<span class="menu">OK</span>&raquo; &ndash; добавленный канал появится в списке.</p>

<div class="pic"><div class="container" id="pic6">
<div class="multi" id="pic6_0"><img src="../img/BusAddChannel1.png" width="353" height="137" alt="Окно добавления канала при задании простого типа переменной (а) и матрицы (б) 1" /><p id="light_pic6_0">(а)</p></div><div class="multi" id="pic6_1"><img src="../img/BusAddChannel2.png" width="353" height="161" alt="Окно добавления канала при задании простого типа переменной (а) и матрицы (б) 2" /><p id="light_pic6_1">(б)</p></div><p id="light_pic6">Рис.&nbsp;85. Окно добавления канала при задании простого типа переменной (а)<br />и матрицы (б)</p>
</div></div>


<p><span id="light_ref7">Изменить имя и тип канала</span>
можно в любой момент, нажав кнопку с фигурными
скобками и многоточием между ними. При этом открывается
<a href="#pic6" title="Окно добавления канала при задании простого типа переменной (а) и матрицы (б)">такое же окно</a>, как и
при добавлении канала &ndash; в нем можно отредактировать имя и выбрать новый
тип. Если к каналу шины уже подключены связи, соединяющие его с блоками,
изменение типа на
<a href="um_1_4.htm#ref23" title="Допустимые соединения типов переменных">несовместимый</a> может привести к
неработоспособности этих связей &ndash; &laquo;проблемные&raquo; входы и
выходы при этом будут помечены
<a href="um_2_7_2.htm#pic5" title="Ошибка в соединении: выход типа double не может быть подключен к матрице">желтыми иконками</a>. Удаление канала
кнопкой с крестом тоже может привести к отключению связей, уже подключенных
к этому каналу, они будут помечены
<a href="um_2_7_2.htm#pic3" title="Ошибка в соединении: переменной Var нет в блоке Int2">красными иконками</a>.</p>

<p>Вкладка окна параметров шины &laquo;<span class="menu">соединения</span>&raquo;
(<a href="#pic5_1" title="Вкладки имя и каналы (а) и соединения (б) окна параметров типичной шины">рис.&nbsp;84&nbsp;б</a>) содержит в
левой части список всех каналов этой шины с указанием общего числа связей,
подключенных к каждому каналу. При выборе в нем какого-либо канала
в правой части вкладки отобразится список всех входов и выходов блоков схемы,
соединенных связями с этим каналом (имя переменной в блоке отделяется от имени
самого блока двоеточием). В разделе &laquo;выходы&raquo; будут перечислены
выходы блоков, передающие данные в этот канал (при правильном присоединении
в этом разделе должен быть только один выход), в разделе &laquo;входы&raquo;
&ndash; входы блоков, получающие данные канала. Эта вкладка &ndash;
информационная, изменить что-либо на ней невозможно.</p>

<p><span id="ref8">Если</span>
для схемы заданы какие-либо <a href="um_2_12a.htm" title="&sect;2.12.2. Использование классов">классы объектов</a>, в окне
параметров шины будет присутствовать <span id="light_ref8">вкладка &laquo;<span class="menu">классы</span>&raquo;</span>
(<a href="#pic7" title="Вкладка классы окна параметров шины">рис.&nbsp;86</a>), на которой можно включить эту шину в
один или несколько классов схемы. При отсутствии в схеме классов эта вкладка не отображается.</p>

<div class="pic"><div class="container" id="pic7">
<img src="../img/BusClasses.png" width="439" height="360" alt="Вкладка классы окна параметров шины" />
<p id="light_pic7">Рис.&nbsp;86. Вкладка &laquo;<span class="menu">классы</span>&raquo; окна параметров шины</p>
</div></div>


<p>Большую часть вкладки занимает список классов схемы, в котором галочками отмечены те
из них, к которым принадлежит данная шина. Шина, как и любой объект схемы, может
одновременно принадлежать к нескольким классам или не принадлежать ни к одному, на
<a href="#pic7" title="Вкладка классы окна параметров шины">рис.&nbsp;86</a> она принадлежит к классам
&laquo;вычислительные&raquo; и &laquo;логические&raquo;. Кнопки
&laquo;<span class="menu">включить все</span>&raquo; и &laquo;<span class="menu">выключить все</span>&raquo; внизу вкладки устанавливают и
сбрасывают все галочки соответственно, кнопка &laquo;<span class="menu">классы</span>&raquo; открывает
<a href="um_2_12a.htm#pic1" title="Окно списка классов схемы">окно редактирования классов</a> схемы.</p>

<p>Все изменения, сделанные на вкладках окна параметров шины, вносятся в схему
только при нажатии кнопки &laquo;<span class="menu">OK</span>&raquo;. Если в
<a href="um_2_18.htm" title="&sect;2.18. Настройки RDS">настройках RDS</a>
разрешена отмена действий пользователя, эти изменения можно отменить нажатием
<span class="keys">Ctrl</span>&nbsp;+&nbsp;<span class="keys">Z</span>.</p>

<p>Подключение связей к шине во многом похоже на подключение их к блокам, но
меню подключения и дополнительные окна несколько отличаются. Если
<a href="um_2_7_1.htm#pic2" title="Начало создания связи через контекстное меню (а) или при помощи щелчка мыши с нажатой клавишей Ctrl (б)">начать связь от выхода блока</a>
и дотянуть ее до шины, при щелчке на шине появится меню
(<a href="#pic8_0" title="Подключение к шине выхода блока: меню соединения (а) и готовая связь (б)">рис.&nbsp;87&nbsp;а</a>)
с перечислением имен всех каналов, совместимых с данным типом выхода,
и еще не имеющих соединенных с ними выходов блоков (в меню также будут
присутствовать пункты &laquo;<span class="menu">список</span>&raquo; и &laquo;<span class="menu">добавить</span>&raquo;,
которые будут описаны ниже).</p>

<div class="pic"><div class="container" id="pic8">
<div class="multi" id="pic8_0"><img src="../img/ConnToBus1.png" width="242" height="149" alt="Подключение к шине выхода блока: меню соединения (а) и готовая связь (б) 1" /><p id="light_pic8_0">(а)</p></div><div class="multi" id="pic8_1"><img src="../img/ConnToBus2.png" width="139" height="149" alt="Подключение к шине выхода блока: меню соединения (а) и готовая связь (б) 2" /><p id="light_pic8_1">(б)</p></div><p id="light_pic8">Рис.&nbsp;87. Подключение к шине выхода блока: меню<br />соединения (а) и готовая связь (б)</p>
</div></div>


<p>Если же начать связь от входа блока, совместимые по типу каналы шины будут
перечислены в меню подключения два раза
(<a href="#pic9_0" title="Подключение к шине входа блока: меню соединения (а) и готовая связь (б)">рис.&nbsp;88&nbsp;а</a>):
сначала &ndash; как выходы (с иконками &laquo;круг и стрелка от него&raquo;),
а затем &ndash; как входы (с иконками &laquo;круг и стрелка к нему&raquo;).
При этом во второй части списка будут присутствовать только те каналы,
к которым еще не подключены связи от выходов блоков &ndash; например, в меню на
<a href="#pic9_0" title="Подключение к шине входа блока: меню соединения (а) и готовая связь (б)">рис.&nbsp;88&nbsp;а</a>
в нижней части отсутствует канал &laquo;<span class="rdsvar">Chn_2</span>&raquo;, поскольку к нему уже
подключена связь от выхода поля ввода.</p>

<div class="pic"><div class="container" id="pic9">
<div class="multi" id="pic9_0"><img src="../img/ConnToBus3.png" width="268" height="214" alt="Подключение к шине входа блока: меню соединения (а) и готовая связь (б) 1" /><p id="light_pic9_0">(а)</p></div><div class="multi" id="pic9_1"><img src="../img/ConnToBus4.png" width="148" height="149" alt="Подключение к шине входа блока: меню соединения (а) и готовая связь (б) 2" /><p id="light_pic9_1">(б)</p></div><p id="light_pic9">Рис.&nbsp;88. Подключение к шине входа блока: меню<br />соединения (а) и готовая связь (б)</p>
</div></div>


<p>Чтобы не перепутать подключение к выходу и ко входу канала, пользователю
следует обращать внимание на иконки в левой части меню. Если использовать
канал как выход, он станет для подключаемой связи источником данных,
то есть данные, попавшие в канал, будут передаваться этой связью на вход
блока. Если же использовать канал как вход, связь станет для него источником
данных. На первый взгляд может показаться, что соединять между собой вход
блока и вход канала бессмысленно &ndash; у этой связи нет источника данных
и она не будет ничего никуда передавать. Однако, такое соединение может
быть первым этапом создания сложной разветвленной связи: пользователь может
сначала соединить между собой два входа, а потом добавить к этой связи ветвь,
соединяющую ее с каким-либо выходом.</p>

<p>Связи можно подключать не только к вертикальным линиям шин, как на
рис.
<a href="#pic1" title="Соединение блоков при помощи разветвленных связей (а) и при помощи шины (б)">80</a>,
<a href="#pic8" title="Подключение к шине выхода блока: меню соединения (а) и готовая связь (б)">87</a> и
<a href="#pic9" title="Подключение к шине входа блока: меню соединения (а) и готовая связь (б)">88</a>,
но и к горизонтальным и диагональным
(<a href="#pic10" title="Подключение связей к шине с разных сторон">рис.&nbsp;89</a>).
Однако, подключение к вертикальным линиям обычно позволяет получить схему,
выглядящую более компактно.</p>

<div class="pic"><div class="container" id="pic10">
<img src="../img/BusConnSides.png" width="505" height="196" alt="Подключение связей к шине с разных сторон" />
<p id="light_pic10">Рис.&nbsp;89. Подключение связей к шине с разных сторон</p>
</div></div>


<div class="picright"><div class="container" id="pic11">
<img src="../img/ConnToBusList.png" width="334" height="311" alt="Окно списка каналов шины при присоединении связи" />
<p id="light_pic11">Рис.&nbsp;90. Окно списка каналов шины при<br />присоединении связи</p>
</div></div>


<p><span id="ref9">Наверху</span>
в меню подключения связи к шине всегда располагается пункт
&laquo;<span class="menu">список</span>&raquo;, открывающий окно, в котором можно выбрать канал
из <span id="light_ref9">полного списка каналов шины</span>
(<a href="#pic11" title="Окно списка каналов шины при присоединении связи">рис.&nbsp;90</a>). Это окно в целом
похоже на окно списка переменных, используемое при подключении связи к блоку
(см. <a href="um_2_7_1.htm#pic3" title="Полный список переменных блока">рис.&nbsp;44</a>), но, в отличие от
последнего, у окна списка каналов шины две вкладки: на вкладке
&laquo;<span class="menu">входы</span>&raquo; каналы перечислены с точки зрения использования их
как получателей данных от связи, а на вкладке &laquo;<span class="menu">выходы</span>&raquo; &ndash;
с точки зрения использования их как источников данных. Если связь тянется от
выхода блока, следует выбирать вкладку &laquo;<span class="menu">входы</span>&raquo;: у связи уже
есть источник данных (выход блока), и канал может быть только получателем.
Если же связь тянется от входа блока, можно выбрать любую вкладку: при
выборе канала на вкладке &laquo;<span class="menu">выходы</span>&raquo; связь будет получать от него
данные, при выборе его же на вкладке &laquo;<span class="menu">входы</span>&raquo; он будет получать
данные от связи. Если соединение канала со связью по тем или иным причинам
невозможно (<a href="um_1_4.htm#ref23" title="Допустимые соединения типов переменных">несовместимый тип</a>
или у связи уже есть источник данных), при его выборе в списке в нижней части
окна будет выведено сообщение об ошибке. В этом же окне можно добавить в шину
новый канал и подключить к нему связь, нажав кнопку &laquo;<span class="menu">новый</span>&raquo;. Это
действие полностью аналогично выбору в меню подключения
(рис.
<a href="#pic8" title="Подключение к шине выхода блока: меню соединения (а) и готовая связь (б)">87</a>,
<a href="#pic9" title="Подключение к шине входа блока: меню соединения (а) и готовая связь (б)">88</a>) пункта &laquo;<span class="menu">добавить</span>&raquo;,
описанного ниже.</p>

<p><span id="ref10">На втором месте</span>
в меню подключения связи к шине всегда находится пункт
&laquo;<span class="menu">добавить</span>&raquo; &ndash; при его выборе, а также при нажатии кнопки
&laquo;<span class="menu">новый</span>&raquo; в
<a href="#pic11" title="Окно списка каналов шины при присоединении связи">окне списка каналов</a>,
открывается <span id="light_ref10">окно добавления канала к шине
(<a href="#pic12" title="Окно добавления канала к шине при подключении связи">рис.&nbsp;91</a>)</span>.
Это окно похоже на окно добавления канала в параметрах шины, описанное ранее
(см. <a href="#pic6" title="Окно добавления канала при задании простого типа переменной (а) и матрицы (б)">рис.&nbsp;85</a>)
&ndash; в нем точно так же вводится имя канала и выбирается его тип.
Но в этом окне тип уже будет исходно установлен согласно типу переменной, от
которой тянется подключаемая связь, а в его нижней части располагаются два
дополнительных флажка, управляющих подключением связи ко входу или выходу канала
(если связь тянется от выхода блока, флажок &laquo;<span class="menu">подключить к выходу</span>&raquo;
будет не активен, так как связь не может соединять два выхода). По нажатию
кнопки &laquo;<span class="menu">OK</span>&raquo; в шину будет добавлен новый канал и связь будет
подключена к нему.</p>

<div class="pic"><div class="container" id="pic12">
<img src="../img/ConnToBusAddChn.png" width="399" height="210" alt="Окно добавления канала к шине при подключении связи" />
<p id="light_pic12">Рис.&nbsp;91. Окно добавления канала к шине при подключении связи</p>
</div></div>


<p>Если в шине уже есть каналы, можно начать рисование связи от самой шины.
Для этого следует выбрать точку на линии шины, от которой начнется связь,
щелкнуть на ней правой кнопкой мыши и выбрать в контекстном меню пункт
&laquo;<span class="menu">начать связь</span>&raquo; (вместо вызова контекстного меню можно, как и при
рисовании связи от блока, щелкнуть в выбранной точке левой кнопкой мыши при
нажатой клавише <span class="keys">Ctrl</span>). При этом откроется меню,
в котором можно будет выбрать имя канала, с которым будет соединена создаваемая
связь. Это меню содержит двойной список каналов шины: сначала для использования их
как выходов, затем &ndash; как входов. Оно похоже на изображенное на
<a href="#pic9" title="Подключение к шине входа блока: меню соединения (а) и готовая связь (б)">рис.&nbsp;88</a>,
только в нем не будет пункта &laquo;<span class="menu">добавить</span>&raquo;. После выбора в меню
нужного канала (или указания канала в окне списка, вызываемого пунктом
&laquo;<span class="menu">список</span>&raquo;, см.
<a href="#pic11" title="Окно списка каналов шины при присоединении связи">рис.&nbsp;90</a>), рисование связи
производится обычным образом.</p>

<p>Как и связь, шина может быть продолжена
(<a href="#pic13" title="Продолжение шины: начало (а), окончание (б), готовая шина (в)">рис.&nbsp;92</a>)
или разветвлена
(<a href="#pic14" title="Ответвление шины: начало (а), окончание (б), готовая шина (в)">рис.&nbsp;93</a>)
в любой точке при помощи тех же действий и тех же пунктов меню, которые
используются при
<a href="um_2_7_2.htm" title="&sect;2.7.2. Изменение внешнего вида, параметров и конфигурации связи">редактировании связи</a>. Все остальные
действия по редактированию шины (добавление и перемещение узлов, перемещение
отрезков, удаление
узлов, линий и ветвей) тоже совпадают с аналогичными действиями для связи
и здесь не приводятся.</p>

<div class="pic"><div class="container" id="pic13">
<div class="multi" id="pic13_0"><img src="../img/ContinueBus1.png" width="338" height="323" alt="Продолжение шины: начало (а), окончание (б), готовая шина (в) 1" /><p id="light_pic13_0">(а)</p></div><div class="multi" id="pic13_1"><img src="../img/ContinueBus2.png" width="236" height="171" alt="Продолжение шины: начало (а), окончание (б), готовая шина (в) 2" /><p id="light_pic13_1">(б)</p></div><div class="multi" id="pic13_2"><img src="../img/ContinueBus3.png" width="218" height="156" alt="Продолжение шины: начало (а), окончание (б), готовая шина (в) 3" /><p id="light_pic13_2">(в)</p></div><p id="light_pic13">Рис.&nbsp;92. Продолжение шины: начало (а), окончание (б), готовая шина (в)</p>
</div></div>


<div class="pic"><div class="container" id="pic14">
<div class="multi" id="pic14_0"><img src="../img/BranchBus1.png" width="337" height="275" alt="Ответвление шины: начало (а), окончание (б), готовая шина (в) 1" /><p id="light_pic14_0">(а)</p></div><div class="multi" id="pic14_1"><img src="../img/BranchBus2.png" width="236" height="155" alt="Ответвление шины: начало (а), окончание (б), готовая шина (в) 2" /><p id="light_pic14_1">(б)</p></div><div class="multi" id="pic14_2"><img src="../img/BranchBus3.png" width="213" height="155" alt="Ответвление шины: начало (а), окончание (б), готовая шина (в) 3" /><p id="light_pic14_2">(в)</p></div><p id="light_pic14">Рис.&nbsp;93. Ответвление шины: начало (а), окончание (б), готовая шина (в)</p>
</div></div>


<p>Следует учитывать, что при перемещении всей шины или отдельных ее узлов все
точки соединения связей с этой шиной будут двигаться так, чтобы оставаться на
шине, поэтому после такого перемещения форма связей может измениться
(<a href="#pic15" title="Перемещение узла шины (а) и вызванное им изменение внешнего вида связей (б)">рис.&nbsp;94</a>).</p>

<div class="pic"><div class="container" id="pic15">
<div class="multi" id="pic15_0"><img src="../img/BusPointMove1.png" width="270" height="257" alt="Перемещение узла шины (а) и вызванное им изменение внешнего вида связей (б) 1" /><p id="light_pic15_0">(а)</p></div><div class="multi" id="pic15_1"><img src="../img/BusPointMove2.png" width="270" height="257" alt="Перемещение узла шины (а) и вызванное им изменение внешнего вида связей (б) 2" /><p id="light_pic15_1">(б)</p></div><p id="light_pic15">Рис.&nbsp;94. Перемещение узла шины (а) и вызванное им изменение внешнего вида связей (б)</p>
</div></div>



</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_7_3.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_9_1.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_8">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
