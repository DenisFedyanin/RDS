<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;2.9.2. Редактирование списка переменных блока</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2">Глава 2. Интерфейс пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_2_9">&sect;2.9. Создание простых блоков и изменение их параметров</a></p>
<div class="level"><p>&sect;2.9.2. Редактирование списка переменных блока</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_2_9_1.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_1.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_9_2">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 2. Интерфейс пользователя</h2>
<h3 class="off">&sect;2.9. Создание простых блоков и изменение их параметров</h3>
<h4>&sect;2.9.2. Редактирование списка переменных блока</h4>
<p class="abstract">Описывается окно для задания структуры статических переменных простого блока &ndash; эти переменные могут быть его входами и выходами.</p>


<p>Изменение состава
<a href="um_1_4.htm" title="&sect;1.4. Статические переменные блоков">статических переменных</a>
блока может потребоваться обычному пользователю, не разрабатывающему
модели блоков самостоятельно, только при создании блоков с
<a href="um_1_2.htm#light_ref22">анимированными картинками</a>
(см. пример в <a href="um_2_10_12.htm" title="&sect;2.10.12. Пример создания блока с анимированной картинкой">&sect;2.10.12</a>. Пользователи,
создающие блоки, модели которых
<a href="um_1_8.htm" title="&sect;1.8. Автоматическая компиляция моделей блоков">автоматически компилируются</a>
RDS, тоже
имеют дело с редактированием переменных, но при этом все необходимые действия
обычно выполняются через
<a href="um_3_6_2.htm" title="&sect;3.6.2. Статические переменные блока">редактор модели</a>
и компилируемая модель автоматически согласуется с этими переменными
(см. <a href="um_index.htm#light_htm:um_3" title="Глава 3. Использование стандартных модулей автокомпиляции">главу 3</a>). Хотя вызов редактора переменных в
этом случае осуществляется по-другому, окно редактора переменных будет тем
же самым, описанным здесь. Следует помнить, что внесение изменений в список
переменных библиотечного блока, как правило, приводит к его неработоспособности.
Исключение составляет переименование переменных (модели блоков чаще всего
обращаются к переменным по номерам, а не по именам, подробно это описано в
<a href="pm_2_5_1.htm" title="&sect;2.5.1. Доступ к статическим переменным и работа в режиме расчета">&sect;2.5.1 руководства программиста</a>), а также разрешение и запрет
добавления отдельных входов и выходов в
<a href="um_2_7_1.htm#ref3" title="Меню создания связи">меню создания связи</a>
&ndash; эти изменения в переменных касаются только интерфейса пользователя,
на работу самого блока они не влияют. Все прочие действия &ndash; изменение
номера переменной в списке, ее типа, ее начального значения и т.п.
&ndash; могут привести к тому, что модель либо откажется работать,
выдав сообщение об ошибке, либо будет работать неправильно.</p>

<p>Для изменения статических переменных блока следует
<a href="um_2_9_1.htm#ref1" title="Открытие окна параметров блока">открыть окно параметров</a>
этого блока и нажать на его вкладке
<a href="um_2_9_1.htm#pic8" title="Вкладка переменные окна параметров блока">&laquo;<span class="menu">переменные</span>&raquo;</a>
кнопку &laquo;<span class="menu">изменить</span>&raquo; (изменить переменные нескольких блоков одновременно
можно через <a href="um_2_15_3.htm" title="&sect;2.15.3. Групповая установка параметров">окно групповой установки параметров</a>).
При этом откроется окно редактора переменных, изображенное на
<a href="#pic1" title="Окно редактора переменных">рис.&nbsp;108</a>.</p>

<div class="pic"><div class="container" id="pic1">
<img src="../img/VarEdit_block.png" width="670" height="347" alt="Окно редактора переменных" />
<p id="light_pic1">Рис.&nbsp;108. Окно редактора переменных</p>
</div></div>


<p>Большую часть окна занимает таблица, в которой каждой переменной блока
соответствует строка, содержащая ее имя, тип, начальное значение и т.п.
Для того, чтобы изменить какой-либо параметр переменной, следует щелкнуть
мышью в строке переменной в колонке нужного параметра и ввести его в
появившемся поле ввода (внутри строки можно переходить к полю ввода
следующего параметра нажатием клавиши <span class="keys">Tab</span>). Новую
переменную можно добавить, щелкнув на пустой строке в конце списка и введя
ее имя в появившемся поле &ndash; как только имя будет введено, все колонки
справа от него заполнятся автоматически, и их можно будет изменить, задав
нужный тип, роль, значение и другие параметры добавленной переменной,
описанные ниже. Можно добавить новую переменную не только в конец, но
и в середину списка &ndash; для этого служит кнопка со знаком
&laquo;+&raquo; в нижней части окна (кнопки также будут
описаны ниже).</p>

<p>Самая первая колонка списка &ndash; &laquo;<span class="menu">начало</span>&raquo; &ndash;
отображает смещение переменной в байтах от начала всей области памяти
переменных блока (эта информация используется программистами при обращении
к переменным из функции модели). В этой колонке ничего изменить нельзя &ndash;
смещение автоматически вычисляется редактором согласно размерам предшествующих
переменных. На <a href="#pic1" title="Окно редактора переменных">рис.&nbsp;108</a> первая
переменная &laquo;<span class="rdsvar">Start</span>&raquo; имеет смещение 0, поскольку она
располагается в самом начале области переменных, вторая переменная
&laquo;<span class="rdsvar">Ready</span>&raquo; &ndash; смещение 1, поскольку перед ней располагается
сигнальная переменная размером в один байт, четвертая переменная
&laquo;<span class="rdsvar">y</span>&raquo; &ndash; смещение 10, поскольку перед ней расположены
две сигнальных переменных по одному байту каждая и одна переменная типа
double размером в восемь байтов, и т.д. Для
двух первых переменных
в этой колонке отображается еще и иконка замка, указывающая на то,
что в любом простом блоке эти переменные
<a href="um_1_4.htm#light_ref24" title="Сигналы запуска и готовности блока">фиксированы</a>, их нельзя удалить
или поменять им тип.</p>

<p><span id="ref1">Во</span>
второй колонке списка вводится имя переменной и, при желании,
<span id="light_ref1">комментарий</span>, который будет отображаться в
<a href="um_2_7_1.htm#ref3" title="Меню создания связи">меню подключения связи</a>. Имена переменных в
RDS должны удовлетворять тем же требованиям, что и идентификаторы в языке
C (это облегчает написание моделей): имя может содержать только буквы латинского
алфавита, цифры и знак подчеркивания, и при этом оно не должно начинаться с
цифры. Имена чувствительны к регистру, поэтому, например,
&laquo;<span class="rdsvar">Var</span>&raquo; и &laquo;<span class="rdsvar">var</span>&raquo; будут считаться разными
переменными. Имя переменной должно быть уникальным, в одном и том же блоке
не может быть двух переменных с одинаковыми именами. Если попытаться дать
какой-либо переменной имя, совпадающее с именем другой переменной, будет
выдано предупреждение о том, что переменная с таким именем уже существует,
и изменение имени будет отменено. Комментарий переменной отделяется от ее
имени пробелом, может быть произвольной длины и содержать в себе пробелы.
Фактически, введенная пользователем в колонке &laquo;<span class="menu">имя</span>&raquo; строка
разбивается по самому первому пробелу: все, что до него, считается
именем переменной, все, что после &ndash; комментарием. Например, в тексте
&laquo;Depth (глубина погружения)&raquo; именем переменной будет считаться
&laquo;<span class="rdsvar">Depth</span>&raquo;, а комментарием &ndash; &laquo;(глубина погружения)&raquo;.
Если во введенном пользователем тексте нет ни одного пробела, он весь будет
считаться именем переменной.</p>

<p>В третьей колонке задается тип переменной, он выбирается из выпадающего списка.
В этом списке перечислены все
<a href="um_1_4.htm#ref1" title="Типы переменных блока">стандартные типы переменных RDS</a>
и имена структур,
<a href="um_2_14.htm" title="&sect;2.14. Создание и изменение структур">заданных для данной схемы</a>. Если
выбрать в списке пункт &laquo;массив&raquo; или &laquo;матрица&raquo;,
высота колонки увеличится, и под списком появится еще один выпадающий список,
в котором нужно выбрать тип элемента массива или матрицы. Например, для матрицы
вещественных чисел под списком с выбранным пунктом &laquo;матрица&raquo;
во втором списке следует выбрать пункт &laquo;double&raquo;. Если в этом
втором списке тоже выбрать пункт &laquo;матрица&raquo;, под ним появится еще
один список (получится матрица матриц какого-либо типа) и т.д. Например, матрице
матриц целых чисел будут соответствовать три списка, расположенных друг под
другом: &laquo;матрица&raquo;, &laquo;матрица&raquo; и
&laquo;int&raquo;. Следует помнить, что вложенность матриц в RDS
ограничена пятью
(<a href="#pic2" title="Пример массива пятерной (максимальной для RDS) вложенности: массив матриц матриц матриц матриц вещественных чисел">рис.&nbsp;109</a>).
Для первых двух переменных блока жестко задан сигнальный тип, изменить
его нельзя.</p>

<div class="pic"><div class="container" id="pic2">
<img src="../img/VarEdit_5matr.png" width="618" height="227" alt="Пример массива пятерной (максимальной для RDS) вложенности: массив матриц матриц матриц матриц вещественных чисел" />
<p id="light_pic2">Рис.&nbsp;109. Пример массива пятерной (максимальной для RDS) вложенности:<br />массив матриц матриц матриц матриц вещественных чисел</p>
</div></div>


<p>В четвертой колонке
<a href="#pic1" title="Окно редактора переменных">списка</a>,
в заголовке которой изображена размерная стрелка,
выводится размер области, занимаемой переменной, в байтах. Размер переменной
однозначно определяется ее типом, значение в этой колонке выводится для справки
и не может быть изменено. Размещение переменных в памяти RDS подробно
рассматривается в
<a href="pm_index.htm#light_htm:pm_2_5" title="&sect;2.5. Статические переменные блоков">&sect;2.5 руководства программиста</a>
пользователю эта информация обычно не нужна.</p>

<p>В колонке с заголовком &laquo;<span class="menu">вход/выход</span>&raquo; задается
<a href="um_1_4.htm#ref20" title="Роли переменных в блоке">роль переменной в блоке</a>
и указывается дополнительная управляющая переменная, если такая есть.
Управляющие переменные используются моделью блока для опознания сработавших
входных связей и управления срабатыванием выходных, поэтому пользователь,
не создающий модель самостоятельно, как правило не вводит их. Роль переменной
выбирается из выпадающего списка, содержащего следующие варианты:</p>

<ul>
  <li>&laquo;<span class="menu">Внутр.</span>&raquo; &ndash; переменная будет внутренней, к ней
  нельзя подключать связи.</li>

  <li>&laquo;<span class="menu">Вход</span>&raquo; &ndash; переменная будет входом блока, к ней
  можно <a href="um_2_7_1.htm" title="&sect;2.7.1. Общие принципы создания связей">подключать связи</a>, которые в
  режиме расчета будут записывать в нее значения с выходов других блоков.</li>

  <li>&laquo;<span class="menu">Выход</span>&raquo; &ndash; переменная будет выходом блока, к ней
  можно подключать связи, которые в режиме расчета будут передавать ее
  значение на входы других блоков.</li>

  <li>&laquo;<span class="menu">Вх/Сигнал</span>&raquo; &ndash; переменная будет входом, при этом
  при срабатывании любой связи, подключенной к этому входу, в сигнальную
  переменную, указанную в дополнительном выпадающем списке в этой же колонке
  (<a href="#pic3" title="Привязка к входу x управляющего сигнала x_changed : при срабатывании любой связи, подключенной к x , в x_changed будет записана единица">рис.&nbsp;110</a>), будет записана единица.</li>

<div class="pic"><div class="container" id="pic3">
<img src="../img/VarEdit_inctrl.png" width="638" height="227" alt="Привязка к входу x управляющего сигнала x_changed : при срабатывании любой связи, подключенной к x , в x_changed будет записана единица" />
<p id="light_pic3">Рис.&nbsp;110. Привязка к входу &laquo;<span class="rdsvar">x</span>&raquo; управляющего сигнала &laquo;<span class="rdsvar">x_changed</span>&raquo;: при срабатывании<br />любой связи, подключенной к &laquo;<span class="rdsvar">x</span>&raquo;, в &laquo;<span class="rdsvar">x_changed</span>&raquo; будет записана единица</p>
</div></div>


  <li>&laquo;<span class="menu">Вых/Логич.</span>&raquo; &ndash; переменная будет выходом, при этом связи,
  подключенные к этому выходу, будут работать только тогда, когда логическая
  переменная, указанная в дополнительном выпадающем списке в этой же колонке
  (<a href="#pic4" title="Привязка к выходу y управляющей переменной y_enabled : только если y_enabled будет иметь ненулевое значение, связи, подключенные к выходу y , сработают">рис.&nbsp;111</a>),
  будет иметь ненулевое значение. Если данная переменная &ndash; массив,
  управляющая переменная может быть не только логической, но и целой. В этом
  случае из всех связей, подключенных к массиву-выходу, сработают только те,
  которые подключены к элементу массива с номером, содержащимся в управляющей
  переменной (подключение связей к отдельным элементам массивов описывается в
  <a href="um_2_7_3.htm" title="&sect;2.7.3. Подключение связей к полям структур и элементам массивов">&sect;2.7.3</a>.</li>

<div class="pic"><div class="container" id="pic4">
<img src="../img/VarEdit_outctrl.png" width="638" height="227" alt="Привязка к выходу y управляющей переменной y_enabled : только если y_enabled будет иметь ненулевое значение, связи, подключенные к выходу y , сработают" />
<p id="light_pic4">Рис.&nbsp;111. Привязка к выходу &laquo;<span class="rdsvar">y</span>&raquo; управляющей переменной &laquo;<span class="rdsvar">y_enabled</span>&raquo;: только<br />если &laquo;<span class="rdsvar">y_enabled</span>&raquo; будет иметь ненулевое значение, связи, подключенные к<br />выходу &laquo;<span class="rdsvar">y</span>&raquo;, сработают</p>
</div></div>

</ul>

<p>Использование управляющих переменных с входами и выходами блока подробно
рассматривается в <a href="pm_index.htm#light_htm:pm_2_5" title="&sect;2.5. Статические переменные блоков">&sect;2.5 руководства программиста</a>
и <a href="um_index.htm#light_htm:um_3_7_2" title="&sect;3.7.2. Работа со статическими переменными блока">&sect;3.7.2 описания пользователя</a>.
<a href="um_1_4.htm#light_ref24" title="Сигналы запуска и готовности блока">Первые две переменных</a> блока (чаще всего они
называются &laquo;<span class="rdsvar">Start</span>&raquo; и &laquo;<span class="rdsvar">Ready</span>&raquo;) всегда являются
входом и выходом, их роли изменить нельзя.</p>

<p><span id="ref2">В колонке</span>
<a href="#pic1" title="Окно редактора переменных">списка</a>
с заголовком &laquo;<span class="menu">меню</span>&raquo; ставится флажок, если переменная
<span id="light_ref2">должна присутствовать в
<a href="um_2_7_1.htm#ref3" title="Меню создания связи">меню подключения связи</a></span>
(этот флажок доступен только
для входов и выходов). Если сбросить его, к переменной все равно можно будет
подключить связь, выбрав в меню создания связи
пункт <a href="um_2_7_1.htm#ref4" title="Список переменных блока при подключении связи">&laquo;<span class="menu">список</span>&raquo;</a>.</p>

<p><span id="ref3">В</span>
колонке с заголовком <span id="light_ref3">&laquo;<span class="menu">пуск</span>&raquo;</span>, доступной только для входов
блока, ставится флажок, если срабатывание связи, подключенной к этому входу,
должно автоматически запускать функцию модели в следующем такте расчета.
Если пользователь не разрабатывает
модели блоков, он может не обращать на него внимания. Разумеется, установка или
сброс этого флажка у библиотечного блока может привести к неработоспособности
последнего.</p>

<p>В колонке с заголовком &laquo;<span class="menu">ABC</span>&raquo; и стрелкой ставится флажок,
если при подключении связи к данной переменной (она должна быть входом или
выходом) рядом с точкой подключения связи по умолчанию следует отображать имя
переменной. Этот флажок управляет именно отображением по умолчанию &ndash;
после того, как связь присоединена, вывод имени переменной можно
<a href="um_2_7_2.htm#light_ref8" title="Имя переменной в узле связи">включать и выключать</a>
независимо от установки флажка в редакторе переменных.</p>

<p>Наконец, в колонке &laquo;<span class="menu">по умолчанию</span>&raquo; вводится значение переменной
по умолчанию, которое автоматически присваивается ей при создании блока,
после загрузки схемы и при сбросе расчета. Формат ввода этого значения описывается
в <a href="um_1_4.htm#ref22" title="Значение переменной по умолчанию">&sect;1.4</a>.</p>

<p>Начинающему пользователю можно особенно не раздумывать над тем, устанавливать
ли флажки в колонках &laquo;<span class="menu">меню</span>&raquo; и &laquo;<span class="menu">ABC</span>&raquo; &ndash; они
влияют только на удобство подключения связей к блоку и на его внешний вид,
но никак не отражаются на его работе.</p>

<p>Ниже <a href="#pic1" title="Окно редактора переменных">таблицы переменных</a> в окне
находится информационная строка и кнопки управления.
<span id="ref4">В</span> информационной строке
отображается число переменных в списке и
<span class="term"><span id="light_ref4">строка типа</span></span> &ndash;
специальная строка, в которой каждой переменной блока, в зависимости от ее типа,
соответствует один или несколько символов. Строка типа используется
программистами для проверки соответствия структуры переменных блока требованиям
модели (см. <a href="pm_2_5_1.htm" title="&sect;2.5.1. Доступ к статическим переменным и работа в режиме расчета">&sect;2.5.1 руководства программиста</a>),
пользователь, как правило, не имеет с ней дела, даже если он создает блоки с
<a href="um_1_8.htm" title="&sect;1.8. Автоматическая компиляция моделей блоков">автоматически компилируемыми моделями</a>,
поскольку в этом случае модуль автоматической компиляции встраивает в модель все
необходимые проверки без участия пользователя. Кнопки управления позволяют
переместить переменную в списке, удалить ее или добавить в список новую:</p>

<div class="tablecenter"><div class="tcont">
<table>
  <tr>
    <th>Кнопка</th>
    <th>Действие</th>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowUp.png" width="25" height="25" alt="Кнопка: вверх" /></td>
    <td>Переместить выбранную переменную на одну позицию вверх по списку.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_ArrowDown.png" width="25" height="25" alt="Кнопка: вниз" /></td>
    <td>Переместить выбранную переменную на одну позицию вниз по списку.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Plus.png" width="25" height="25" alt="Кнопка: плюс" /></td>
    <td>Добавить переменную перед выбранной (в списке появляется пустая строка,
    щелкнув на которой можно ввести имя переменной). Добавить переменную в конец
    списка всегда можно, щелкнув на пустой строке после последней переменной,
    специальной кнопки для этого не предусмотрено.</td>
  </tr>
  <tr>
    <td class="center"><img class="btn" src="../img/Button_Delete.png" width="25" height="25" alt="Кнопка: удалить" /></td>
    <td>Удалить выбранную в списке переменную.</td>
  </tr>
</table>
</div></div>

<p>При помощи этих кнопок нельзя удалить или переместить
<a href="um_1_4.htm#light_ref24" title="Сигналы запуска и готовности блока">первые две переменных</a> блока &ndash; они
жестко фиксированы и не могут быть изменены.</p>

<p>Нажатие кнопки &laquo;<span class="menu">OK</span>&raquo; заносит новый список переменных в
<a href="um_2_9_1.htm#pic8" title="Вкладка переменные окна параметров блока">окно параметров блока</a>,
из которого был вызван редактор переменных. В блок эти переменные будут
занесены только после нажатия кнопки &laquo;<span class="menu">OK</span>&raquo; в окне параметров.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_2_9_1.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_2_10_1.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_2_9_2">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
