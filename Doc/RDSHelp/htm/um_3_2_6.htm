<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;3.2.6. Подключение модуля автоматического поиска модулей</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_3">Глава 3. Использование стандартных модулей автокомпиляции</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_3_2">&sect;3.2. Установка стандартных модулей автокомпиляции и компиляторов</a></p>
<div class="level"><p>&sect;3.2.6. Подключение модуля автоматического поиска модулей</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_3_2_5.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_3_3.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_3_2_6">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 3. Использование стандартных модулей автокомпиляции</h2>
<h3 class="off">&sect;3.2. Установка стандартных модулей автокомпиляции и компиляторов</h3>
<h4>&sect;3.2.6. Подключение модуля автоматического поиска модулей</h4>
<p class="abstract">Описывается подключение дополнительного модуля автокомпиляции, который не компилирует модели сам, а обращается к одному из других, уже подключенных и настроенных, модулей.</p>


<p><span id="ref1">Дополнительный</span> модуль автоматической компиляции
<span id="light_ref1">&laquo;SearchComp&raquo;</span> из библиотеки &laquo;<span class="file">Common.dll</span>&raquo;
не предназначен для работы с каким-либо конкретным компилятором. При подключении к блоку он перебирает
все остальные модули автокомпиляции из &laquo;<span class="file">Common.dll</span>&raquo; и ищет среди них подключенный и
настроенный, который и будет использоваться для работы с моделями и их компиляции. Например, если в
RDS настроен только модуль <a href="um_3_2_1.htm" title="&sect;3.2.1. Установка и подключение компилятора Borland C++ 5.5">&laquo;BCpp55&raquo;</a> для работы с
Borland C++ 5.5, подключение к какому-либо блоку автокомпилируемой модели с указанием модуля
&laquo;SearchComp&raquo; приведет к тому, что эта модель будет компилироваться именно при помощи
Borland C++ 5.5.</p>

<p>Это может оказаться полезным в тех случаях, когда схему с автокомпилируемыми моделями необходимо
передать другому пользователю. Чтобы схема сохранила работоспособность, необходимо, чтобы у другого
пользователя был подключен тот же самый модуль автокомпиляции и установлен тот же самый компилятор,
которые использовались при создании схемы. Можно, конечно, отключить в параметрах всех блоков
автоматическую компиляцию моделей и передать схему вместе с уже скомпилированными DLL этих моделей.
Однако, если необходимо сохранить возможность автоматической компиляции, другому пользователю
придется либо устанавливать у себя конкретный, использованный при создании схемы, компилятор,
либо переключать в схеме все автокомпилируемые блоки на использование другого, уже установленного,
модуля при помощи
<a href="um_2_15_4.htm" title="&sect;2.15.4. Пакетная обработка">функции пакетной обработки</a>. Чтобы не заставлять пользователя,
которому передается схема, совершать эти действия, можно подключить ко всем автокомпилируемым блокам
модуль &laquo;SearchComp&raquo;. При этом на каждой машине этот модуль будет вызывать для
редактирования и компиляции модели тот модуль, который на ней настроен. Если на двух машинах
используются разные модули автокомпиляции из библиотеки &laquo;<span class="file">Common.dll</span>&raquo;, схема с
подключенным модулем &laquo;SearchComp&raquo; будет работать на обеих без каких-либо
дополнительных настроек.</p>

<p>Перебор модулей автокомпиляции в поисках настроенного выполняется в том же порядке, в котором
модули перечислены в <a href="um_3_1.htm#light_ref2" title="Список стандартных модулей автокомпиляции">&sect;3.1</a>: сначала будет проверен модуль для
Borland C++, затем &ndash; для Open Watcom C++, и т.д. Модуль считается подключенным и настроенным,
если в его настройках правильно указаны пути к исполняемым файлам компилятора и редактора связей (если,
конечно, последний представляет собой отдельную программу), и эти исполняемые файлы существуют. Настройка
путей к компилятору подробно описывается в
<a href="um_3_2_1.htm" title="&sect;3.2.1. Установка и подключение компилятора Borland C++ 5.5">&sect;3.2.1</a> &ndash; <a href="um_3_2_5.htm" title="&sect;3.2.5. Установка и подключение компилятора Microsoft Visual C++ 2003 toolkit">&sect;3.2.5</a>
и в <a href="um_3_9_3.htm" title="&sect;3.9.3. Подключение универсальных модулей и настройка путей">&sect;3.9.3</a>. Проверяются только стандартные модули, то есть те,
которые перечислены в <a href="um_3_1.htm" title="&sect;3.1. Принцип действия стандартного модуля автокомпиляции">&sect;3.1</a>. Модули, созданные сторонними
разработчиками, могут иметь другой формат файлов моделей и, вероятнее всего, не смогут работать с
моделями, созданными одним из стандартных модулей. Кроме того, дополнительный модуль находится в
библиотеке &laquo;<span class="file">Common.dll</span>&raquo; и знает только о стандартных модулях автокомпиляции,
находящихся в той же библиотеке, поэтому и перебирает в поисках настроенного только их.</p>

<p>Поскольку дополнительный модуль автокомпиляции &laquo;SearchComp&raquo; не выполняет компиляцию
самостоятельно, а обращается к другим модулям, собственных настроек он не имеет. Для того, чтобы
его можно было использовать, достаточно просто подключить его к RDS. Если он еще не подключен,
следует запустить RDS и открыть
<a href="um_2_19_1.htm" title="&sect;2.19.1. Подключение модулей автоматической компиляции моделей блоков">окно установки модулей автокомпиляции</a> пунктом главного меню
&laquo;<span class="menu">сервис | автокомпиляция</span>&raquo;. Если в этом окне среди прочих модулей нет модуля с функцией
&laquo;SearchComp&raquo; и библиотекой &laquo;<span class="file">Common.dll</span>&raquo;, необходимо нажать кнопку
&laquo;<span class="menu">+</span>&raquo;, выбрать в выпадающем списке &laquo;<span class="menu">библиотека</span>&raquo; файл
&laquo;$DLL$\Common.dll&raquo; (можно ввести это имя вручную), в поле ввода
&laquo;<span class="menu">функция</span>&raquo; ввести &laquo;SearchComp&raquo; (буквы
&laquo;S&raquo; и &laquo;C&raquo; &ndash; в верхнем регистре), а в поле
&laquo;<span class="menu">название</span>&raquo; &ndash; какое-либо понятное пользователю название для модуля, например,
&laquo;поиск среди настроенных&raquo; (после ввода имени функции название модуля должно появиться
в поле само). В результате окно примет вид, подобный изображенному на
<a href="#pic1" title="Параметры дополнительного модуля поиска в окне установки модулей автокомпиляции">рис.&nbsp;312</a>.</p>

<div class="pic"><div class="container" id="pic1">
<img src="../img/AC_Modules_SearchComp.png" width="533" height="370" alt="Параметры дополнительного модуля поиска в окне установки модулей автокомпиляции" />
<p id="light_pic1">Рис.&nbsp;312. Параметры дополнительного модуля поиска<br />в окне установки модулей автокомпиляции</p>
</div></div>


<p>При попытке настроить этот модуль (например, при двойном щелчке на названии модуля в списке) будет
выдавиться сообщение о том, что он только замещает один из стандартных, с указанием, какой именно из
стандартных модулей будет использован для компиляции
(<a href="#pic2" title="Сообщение, выдаваемое при вызове настройки дополнительного модуля поиска">рис.&nbsp;313</a>).</p>

<div class="pic"><div class="container" id="pic2">
<img src="../img/AC_SearchCompSetupMsg.png" width="640" height="218" alt="Сообщение, выдаваемое при вызове настройки дополнительного модуля поиска" />
<p id="light_pic2">Рис.&nbsp;313. Сообщение, выдаваемое при вызове настройки дополнительного модуля поиска</p>
</div></div>


<p>Теперь при редактировании схемы можно создавать автокомпилируемые модели, привязывая их к модулю
&laquo;SearchComp&raquo; (&laquo;поиск среди настроенных&raquo;). Вместо него каждый раз
будет вызываться тот из стандартных модулей, компилятор для которого установлен и настроен.</p>

<p>Следует иметь в виду, что при поиске настроенных модулей автокомпиляции модуль &laquo;SearchComp&raquo;
игнорирует альтернативные наборы параметров модулей. Имя такого набора вводится в
<a href="um_2_19_1.htm" title="&sect;2.19.1. Подключение модулей автоматической компиляции моделей блоков">окне подключения модулей автокомпиляции</a> после имени функции
через дробь: например, ввод в качестве имени функции &laquo;BCpp55&raquo; подключает модуль
автокомпиляции для Borland C++ с основным набором параметров, а
&laquo;BCpp55/new&raquo; – тот же модуль, но с альтернативным набором параметров &laquo;new&raquo;.
В поиске участвуют только основные наборы параметров, поэтому если пользователь для какого-то модуля
ввел только альтернативный набор, не введя основной, такой модуль не будет считаться правильно
настроенным и не будет найден.</p>

<p>Следует также учитывать, что поиск настроенного модуля может немного
замедлить загрузку схемы, поэтому, если схему не предполагается передавать другим пользователям,
лучше использовать в ней не модуль поиска, а конкретный модуль автокомпиляции для установленного
компилятора.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_3_2_5.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_3_3.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_3_2_6">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
