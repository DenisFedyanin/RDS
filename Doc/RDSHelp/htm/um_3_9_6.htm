<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
<head>
  <link rel="stylesheet" type="text/css" href="../css/main.css" />
  <link rel="stylesheet" type="text/css" href="../css/cpp.css" />
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1251" />
  <script type="text/javascript" src="script.js"></script>
  <title>&sect;3.9.6. Запуск компилятора и редактора связей</title>
</head><body onload="DocLoad()">
<div class="pageheader"><span class="off"><b>Текущий раздел:</b></span>
<div class="int"><p id="top"><a href="../index.htm">Описания RDS</a></p>
<div class="level"><p><a href="um_index.htm">Описание пользователя</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_3">Глава 3. Использование стандартных модулей автокомпиляции</a></p>
<div class="level"><p><a href="um_index.htm#light_htm:um_3_9">&sect;3.9. Настройки стандартного модуля автокомпиляции</a></p>
<div class="level"><p>&sect;3.9.6. Запуск компилятора и редактора связей</p>
</div>
</div>
</div>
</div>
</div></div>
<div class="topnav"><span class="off"><b>Навигация:</b></span>
<div class="left">
<span class="button"><a href="um_3_9_5.htm" title="Предыдущий параграф" id="pgup">&lt;&lt;</a></span>
<span class="button"><a href="um_3_9_7.htm" title="Следующий параграф" id="pgdn">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_3_9_6">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>

<div class="text">
<h1 class="off">Описание пользователя</h1>
<h2 class="off">Глава 3. Использование стандартных модулей автокомпиляции</h2>
<h3 class="off">&sect;3.9. Настройки стандартного модуля автокомпиляции</h3>
<h4>&sect;3.9.6. Запуск компилятора и редактора связей</h4>
<p class="abstract">Описывается настройка командной строки для запуска компилятора и редактора связей.</p>


<p>Для того, чтобы модуль мог скомпилировать модель блока, мало указать пути к исполняемым файлам компилятора и
редактора связей
на вкладке &laquo;<span class="menu"><a href="um_3_9_3.htm#pic2" title="Настройка путей для компилятора">компилятор</a></span>&raquo; окна его параметров. Нужно
также задать параметры командной строки для запуска этих программ со всеми параметрами, необходимыми для правильной
компиляции DLL Windows.</p>

<p>Для того, чтобы задать командную строку запуска компилятора, следует
<a href="um_3_9_1.htm#light_ref1" title="Вызов настроек модуля автокомпиляции">вызвать окно настройки</a> модуля и на его вкладке
&laquo;<span class="menu">компилятор</span>&raquo; нажать кнопку &laquo;<span class="menu">дополнительно</span>&raquo;.
В открывшемся дополнительном окне настроек следует выбрать вкладку &laquo;<span class="menu">компилятор</span>&raquo;
(<a href="#pic1" title="Настройка запуска компилятора (на примере Borland C++ 5.5)">рис.&nbsp;493</a>).</p>

<div class="pic"><div class="container" id="pic1">
<img src="../img/AC_setup_aux_comp.png" width="571" height="354" alt="Настройка запуска компилятора (на примере Borland C++ 5.5)" />
<p id="light_pic1">Рис.&nbsp;493. Настройка запуска компилятора (на примере Borland C++ 5.5)</p>
</div></div>


<p>В верхней части вкладки вводится командная строка для запуска компилятора. В нее должно входить имя
исполняемого файла с полным путем к нему и, после него, все необходимые параметры (иногда называемые
&laquo;ключами&raquo;).
В командной строке можно использовать любые символические обозначения файлов и папок, описанные
в <a href="um_3_9_4.htm" title="&sect;3.9.4. Символические имена параметров в настройках">&sect;3.9.4</a> &ndash; таким образом, для указания полного пути к
исполняемому файлу компилятора достаточно написать &laquo;$COMP$&raquo;.</p>

<p>Любые пути в командной строке следует вводить в двойных кавычках. Это связано с тем, что разделителем
параметров в командной строке Windows является пробел, и, если пробел окажется внутри пути к файлу, строка
будет разобрана неправильно. Допустим, например, что мы хотим запустить компилятор
&laquo;<span class="file">bcc32.exe</span>&raquo;, находящийся в папке
&laquo;<span class="file">C:\Program Files\bcpp55\bin\</span>&raquo;. Можно попытаться записать командную строку в следующем виде:</p>

<pre class="cpp">  C:\Program Files\bcpp55\bin\bcc32.exe</pre>

<p>При этом пробел в имени папки &laquo;<span class="file">Program Files</span>&raquo;
будет распознан как разделитель параметров, и Windows будет пытаться запустить исполняемый файл
&laquo;<span class="file">C:\Program</span>&raquo; и передать ему параметр
&laquo;<span class="file">Files\bcpp55\bin\bcc32.exe</span>&raquo;, что, разумеется, не увенчается успехом. Ситуация изменится,
если заключить строку в двойные кавычки:</p>

<pre class="cpp">  "C:\Program Files\bcpp55\bin\bcc32.exe"</pre>

<p>Двойные кавычки дадут Windows понять, что весь текст между ними является одним параметром, и будет
запущен правильный файл.</p>

<p>На всякий случай, командную строку всегда следует завершать одним лишним пробелом. Хотя это и не является
обязательным требованием, некоторые программы неправильно разбирают переданные им параметры без этого пробела.</p>

<p>Командная строка должна начинаться с полного пути к исполняемому файлу компилятора (то есть с текста
&laquo;$COMP$&raquo; в двойных кавычках), за которым следуют все параметры этого компилятора, необходимые для
компиляции DLL Windows &ndash; их можно узнать из описания к компилятору. Перед настройкой модуля автокомпиляции
настоятельно рекомендуется научиться компилировать модели блоков вручную &ndash; так можно проверить действие
параметров компилятора и определить, какие именно параметры требуются. Все пути, присутствующие в параметрах,
необходимо заключать в двойные кавычки по указанной выше причине.</p>

<p><span id="ref1">Параметры</span>
можно указывать не только в командной строке, длина которой ограничена. Многие компиляторы позволяют записать
параметры в текстовый файл (так называемый <span id="light_ref1">response file</span>), а в командной строке
указать только имя этого файла. При большом количестве параметров этот путь предпочтительнее. Текстовый файл с
параметрами всегда создается модулем автокомпиляции в папке временных файлов RDS, поэтому в качестве его
имени с полным путем можно использовать сочетание символических обозначений
&laquo;$RDSTEMP$\$RESPONSE$&raquo;. Как правило, для указания использования такого файла в командной
строке компилятора предусмотрен специальный параметр &ndash; например, в Borland C++ 5.5 полный путь к
файлу параметров указывается после символа &laquo;@&raquo;.</p>

<p>Содержимое файла параметров вводится в большом многострочном поле непосредственно под полем для
командной строки (см. <a href="#pic1" title="Настройка запуска компилятора (на примере Borland C++ 5.5)">рис.&nbsp;493</a>). В этом поле тоже можно
использовать любые символические обозначения файлов и папок. Чтобы не вводить эти обозначения вручную, можно
установить курсор в том месте поля ввода командной строки или файла параметров, в котором нужно вставить
обозначение, нажать кнопку &laquo;<span class="menu">вставить параметр</span>&raquo; в левой нижней части вкладки, и выбрать
нужное обозначение в появившемся меню
(см. <a href="um_3_9_5.htm#pic2" title="Меню вставки параметра (символического обозначения)">рис.&nbsp;492</a>).
Кнопка &laquo;<span class="menu">восстановить исходные</span>&raquo; присваивает командной строке и тексту файла параметров
значения по умолчанию, подходящие для компилятора, для которого предназначен модуль (в универсальных модулях
оба поля просто очищаются).</p>

<p>После завершения работы компилятора исходный текст программы, сформированный модулем, преобразуется в
объектный файл. Для получения из него DLL необходимо обработать его редактором связей. Некоторые компиляторы
способны сами вызывать редактор связей, но, чаще всего, приходится настраивать его вызов вручную. Для этого
служит вкладка &laquo;<span class="menu">редактор связей</span>&raquo;
(<a href="#pic2" title="Настройка запуска редактора связей (на примере Borland C++ 5.5)">рис.&nbsp;494</a>)
окна дополнительных настроек модуля, открывающегося кнопкой &laquo;<span class="menu">дополнительно</span>&raquo; вкладки
&laquo;<span class="menu">компилятор</span>&raquo; основного окна настроек.</p>

<div class="pic"><div class="container" id="pic2">
<img src="../img/AC_setup_aux_link.png" width="571" height="354" alt="Настройка запуска редактора связей (на примере Borland C++ 5.5)" />
<p id="light_pic2">Рис.&nbsp;494. Настройка запуска редактора связей (на примере Borland C++ 5.5)</p>
</div></div>


<p>В верхней части вкладки находится флажок &laquo;<span class="menu">вызывать редактор связей после компилятора</span>&raquo; &ndash;
для отдельного запуска редактора связей он должен быть установлен. Если компилятор сам вызывает редактор
связей, флажок устанавливать не нужно, но в этом случае все параметры, необходимые для сборки DLL, должны
быть указаны в параметрах вызова компилятора согласно его описанию.</p>

<p>Ниже флажка располагаются поля ввода для командной строки редактора связей и файла параметров, если
он используется. Файл параметров для редактора связей, как и для компилятора, создается модулем автокомпиляции в
папке временных файлов RDS. В обоих полях ввода можно использовать символические обозначения
файлов и папок (см. <a href="um_3_9_4.htm" title="&sect;3.9.4. Символические имена параметров в настройках">&sect;3.9.4</a>) &ndash; их можно вводить вручную или
выбирать из меню, открывающегося при нажатии кнопки &laquo;<span class="menu">вставить параметр</span>&raquo; в нижней части вкладки.
Кнопка &laquo;<span class="menu">восстановить исходные</span>&raquo; присваивает обоим полям значения по умолчанию.</p>

<p>После завершения работы редактора связей должен быть создан исполняемый файл DLL с моделью блока, пригодный
для подключения к RDS. Как правило, никаких дополнительных действий с этим файлом делать не нужно.
Тем не менее, модуль автокомпиляции поддерживает запуск еще одной, дополнительной, программы после редактора связей.
Необходимость ее запуска, ее командная строка и содержимое файла параметров, если он нужен, задаются на вкладке
&laquo;<span class="menu">после компиляции</span>&raquo; в том же окне
(<a href="#pic3" title="Настройка запуска дополнительной программы">рис.&nbsp;495</a>).
Ни один из стандартных компиляторов не требует запуска такой дополнительной программы.</p>

<div class="pic"><div class="container" id="pic3">
<img src="../img/AC_setup_aux_postexe.png" width="571" height="354" alt="Настройка запуска дополнительной программы" />
<p id="light_pic3">Рис.&nbsp;495. Настройка запуска дополнительной программы</p>
</div></div>


<p>В нижней части всего дополнительного окна настроек, слева от кнопок &laquo;<span class="menu">OK</span>&raquo; и
&laquo;<span class="menu">отмена</span>&raquo;, находится включенный по умолчанию флажок
&laquo;<span class="menu">сворачивать окна консольных приложений</span>&raquo;. Его установка позволяет
&laquo;спрятать&raquo; дополнительные окна, открывающиеся в момент запуска компилятора и редактора связей.
Эти окна, которые открываются на короткое время и, как правило, имеют черный цвет, могут сбить пользователя с
толку, поэтому лучше держать их скрытыми. В них обычно нет информации, которая могла бы пригодиться
пользователю &ndash; при правильной настройке модуля автокомпиляции сообщения об ошибках, выдаваемые
компилятором и редактором связей, будут разобраны и показаны пользователю в окне редактора модели.</p>

</div>
<p style="clear:both; min-height:1em; padding:0px; margin: 0px;"></p><hr class="off" /><div class="bottomnav">
<div class="left">
<span class="button"><a href="um_3_9_5.htm" title="Предыдущий параграф" id="pgup_f">&lt;&lt;</a></span>
<span class="button"><a href="um_3_9_7.htm" title="Следующий параграф" id="pgdn_f">&gt;&gt;</a></span>
<span class="divider"></span>
<span class="button"><a href="um_index.htm#light_htm:um_3_9_6">Оглавление</a></span>
<span class="button"><a href="alpha.htm">Указатель</a></span>
</div>
</div>
</body>
</html>
